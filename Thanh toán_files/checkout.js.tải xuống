
var currently_selected_friend_block = '';
var currently_selected_friend_name = '';
var currently_selected_friend_id = 0;

var g_nPaymentMethodStep = 1;			var g_nPurchaseTotal = 0;				var g_strProviderRemaining = '';		var g_strProviderMethod = '';			var g_bShowAddressForm = true;

var nGetFinalPriceCalls = 0;

var g_bFinalizeTransactionInProgress = false;

function ReportCheckoutJSError( message, e )
{
	try
	{
		if (typeof e == 'string')
    		e = new Error(e);

		ReportError( '/public/javascript/checkout.js?l=vietnamese', message, message+":\n\n  Exception: "+e.name+" - "+e.message+"\n" );
	} catch( e )
	{
			}
}

function OnLoadCheckoutForm()
{
	UpdateStateSelectState();
	UpdatePaymentInfoForm();

	try
	{
		var curTab = g_initialTab;
		SetTabEnabled( g_initialTab );
	}
	catch( e )
	{
			}
}

function ScrollCheckoutFormIntoView()
{
	ScrollToIfNotInView( $J('.checkout_main'), null, 20 );
}

function OpenUrlInNewBlankWindow( newURL )
{
	return window.open( newURL, "_blank" );
}

function CompleteCreditCardAuthentication()
{
	if ( $('credit_card_authentication_form').firstChild )
		$('credit_card_authentication_form').firstChild.submit();
}

function SetUpCreditCardAuthentication( newUrl, postData )
{
	$('cart_area').style.display = 'none';
	$('receipt_area').style.display = 'none';
  $('col_right_payment_info').style.display = 'none';
	$('credit_card_authentication_area').style.display = 'block';
	$('pending_receipt_area').style.display = 'none';
  $('col_right_review').style.display = 'block';

	var form = document.createElement( "form" );
	form.setAttribute( "method", "post" );
	form.setAttribute( "action", newUrl );
	form.setAttribute( "target", "_authentication" );
	form.setAttribute( "style", "display:none" );

	for( var i = 0; i < postData.length; i++ )
	{
		var param = postData[i];
		var input = document.createElement( "input" );
		input.type = "hidden";
		input.name = param.name;
		input.value = param.value;
		form.appendChild( input );
	}

	while ( $('credit_card_authentication_form').firstChild )
	{
        $('credit_card_authentication_form').removeChild( $('credit_card_authentication_form').firstChild );
    }

	$('credit_card_authentication_form').appendChild( form );

    CompleteCreditCardAuthentication();
}

function GetAdditionalParametersForExternalPaymentProcessor( extProcessor )
{
	return "";
}

var g_bPayPalAuthInFlight = false;
function PerformPayPalAuthorization()
{
	try
	{
		if ( $('paypaltoken').value )
		{
			var paypal_url = encodeURIComponent( 'https://www.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=%s'.replace( "%s", $('paypaltoken').value ) );
			var transID = $('transaction_id').value;
			OpenUrlInNewBlankWindow( 'https://checkout.steampowered.com/paypal/launchauth/?webbasedpurchasing=1&transid=' + transID + '&authurl='+paypal_url + GetAdditionalParametersForExternalPaymentProcessor( 'paypal' ) + '&s=' + g_sessionID );
			$('external_payment_processor_notice').innerHTML = 'Một cửa sổ mới đã được mở tới trang PayPal. Hãy đăng nhập hoặc tạo một tài khoản ở đó để xem lại các chi tiết và cấp phép cho việc giao dịch. Nếu bạn không nhìn thấy cửa sổ mới thì hãy kiểm tra xem trình duyệt của bạn có đang chặn vì coi đó là cửa sổ bật lên không.';
			g_bPayPalAuthInFlight = true;
		}
	}
	catch( e )
	{
		ReportCheckoutJSError( 'Failed launcing new window for PayPal auth', e );
	}
}


function OnCreateQiwiInvoiceFailure( eResult, resultDetail )
{
	var sErrorMessage = 'Một lỗi không ngờ đã xảy ra. Việc mua hàng của bạn chưa hoàn thành.<br>Vui lòng chờ vài phút rồi thử lại.<br>Nếu bạn vẫn gặp phải vấn đề này, hãy liên hệ <a href="http://support.steampowered.com">đội hỗ trợ Steam</a>.';

		switch ( resultDetail )
	{
		case 1:
			sErrorMessage = 'Việc mua hàng của bạn không hoàn thành.<br>Bên xử lý thanh toán hiện tại không hiện hữu. Xin vui lòng chọn một hình thức thanh toán khác hoặc thử lại sau.';
			break;

		case 2:
			sErrorMessage = 'Việc mua hàng của bạn không hoàn thành.<br>Số điện thoại bạn nhập không nhận diện được bởi nhà cung cấp dịch vụ thanh toán. Vui lòng sửa lại số này và thử lại.';
			break;

		case 3:
		case 4:
		case 5:
		case 6:
						sErrorMessage = 'Một lỗi không ngờ đã xảy ra. Việc mua hàng của bạn chưa hoàn thành.<br>Vui lòng chờ vài phút rồi thử lại.<br>Nếu bạn vẫn gặp phải vấn đề này, hãy liên hệ <a href="http://support.steampowered.com">đội hỗ trợ Steam</a>.';
			break;

		case 7:
			sErrorMessage = 'Việc mua hàng của bạn không hoàn thành.<br>Bên xử lý thanh toán báo rằng giao dịch này sẽ khiến bạn vượt quá hạn mức thanh toán hàng ngày. Xin vui lòng chọn một hình thức thanh toán khác hoặc thử lại sau.';
			break;

		default:
			sErrorMessage = 'Một lỗi không ngờ đã xảy ra. Việc mua hàng của bạn chưa hoàn thành.<br>Vui lòng chờ vài phút rồi thử lại.<br>Nếu bạn vẫn gặp phải vấn đề này, hãy liên hệ <a href="http://support.steampowered.com">đội hỗ trợ Steam</a>.';
			break;
	}
	DisplayErrorMessage( sErrorMessage );

	$J('#purchase_button_bottom').show();
	$J('#purchase_button_inprogress_bottom').hide();
}


var g_bCreateQiwiInvoiceRunning = false;
function CreateQiwiInvoiceAndFinalizeTransaction( url )
{
	if ( g_bCreateQiwiInvoiceRunning )
		return;

		if ( !$('accept_ssa') || !$('accept_ssa').checked )
	{
		DisplayErrorMessage( 'Bạn phải đồng ý với các điều khoản trong Thỏa thuận người đăng ký Steam để bán vật phẩm này.' );
		ValidationMarkFieldBad( $('purchase_confirm_ssa') );
		return;
	}

	if ( $('accept_right_withdrawal') && !$('accept_right_withdrawal').checked )
	{
		DisplayErrorMessage( 'Bạn phải đồng ý với điều khoản trong quyền hoàn trả theo luật định của mình.' );
		ValidationMarkFieldBad( $('purchase_confirm_right_withdrawal') );
		return;
	}

	$J('#purchase_button_bottom').hide();
	$J('#purchase_button_inprogress_bottom').show();

	var g_winQiwiWindow = window.open( 'https://checkout.steampowered.com/qiwi/launchauth', 'qiwiWindow' );

	g_bCreateQiwiInvoiceRunning = true;

	try
	{
		var phoneNumber = $('mobile_number').value;
		var re = new RegExp(/^\+7|^\+38/ );
		var m = re.exec(phoneNumber);

		phoneNumber = phoneNumber.replace( m, "" );
		// strip out non-digits
		phoneNumber = phoneNumber.replace(/\D/g, "" );

		// add the country code back
		phoneNumber = m + phoneNumber;

		new Ajax.Request('https://checkout.steampowered.com/checkout/qiwiinvoice/',
		{
		    method:'post',
		    parameters: {
				// Info for all carts
				'phone' : phoneNumber,
				'transid' : $('transaction_id').value
			},
			onSuccess: function(transport)
			{
			    	g_bCreateQiwiInvoiceRunning = false;
				if ( transport.responseText ){
					try {
						var result = transport.responseText.evalJSON(true);
			      		} catch ( e ) {
			      			// Failure
			      			OnCreateQiwiInvoiceFailure( 2, -1 );
			      			g_winQiwiWindow.close();
			      		}
			      	   	// Success...
			      	   	if ( result.success == 1 )
			      	   	{
			      	   											      	   		g_winQiwiWindow = window.open( result.url, 'qiwiWindow' );
			      	   		PollForTransactionStatus( $('transaction_id').value, 120, 15 );
			      	   		return;
			      	   	}
			      	   	else
			      	   	{
			      	   		OnCreateQiwiInvoiceFailure( result.success, result.result_detail );
			      	   		g_winQiwiWindow.close();
			      	   		return;
			      	   	}
			  	}

								OnCreateQiwiInvoiceFailure( 2, -1 );
			    },
			onFailure: function()
			{
			    	g_bCreateQiwiInvoiceRunning = false;
								OnCreateQiwiInvoiceFailure( 2, -1 );
				g_winQiwiWindow.close();
			}
		});
	}
	catch(e)
	{
		ReportCheckoutJSError( 'Failed gathering form data and calling CreateQiwiInvoiceAndFinalizeTransaction', e );
	}
}

var g_winExternal = false;
function PerformExternalFinalizeTransaction( url, useExternalRedirect)
{
		if ( !$('accept_ssa') || !$('accept_ssa').checked )
	{
		DisplayErrorMessage( 'Bạn phải đồng ý với các điều khoản trong Thỏa thuận người đăng ký Steam để bán vật phẩm này.' );
		ValidationMarkFieldBad( $('purchase_confirm_ssa') );
		return;
	}

	if ( $('accept_right_withdrawal') && !$('accept_right_withdrawal').checked )
	{
		DisplayErrorMessage( 'Bạn phải đồng ý với điều khoản trong quyền hoàn trả theo luật định của mình.' );
		ValidationMarkFieldBad( $('purchase_confirm_right_withdrawal') );
		return;
	}

	try
	{
		
		
		var escapedUrl = encodeURIComponent( url );
		var transID = $('transaction_id').value;

		var method = $('payment_method');

		if( useExternalRedirect )
		{
			var displayPendingReceipt = false;
			switch ( method.value )
			{
				case 'boleto':
				case 'boacompragold':
				case 'bancodobrasilonline':
				case 'itauonline':
				case 'bradescoonline':
				case 'pagseguro':
				case 'visabrazil':
				case 'amexbrazil':
				case 'hipercard':
				case 'aura':
				case 'mastercardbrazil':
				case 'dinerscardbrazil':
				case 'multibanco':
				case 'payshop':
				case 'maestroboacompra':
				case 'visaelectronboacompra':
				case 'molpoints':
				case 'konbini':
				case 'bank_transfer_japan':
				case 'payeasy':
				case 'oxxo':
				case 'toditocash':
				case 'carnet':
				case 'spei':
				case '3pay':
				case 'isbank':
				case 'garanti':
				case 'akbank':
				case 'yapikredi':
				case 'halkbank':
				case 'bankasya':
				case 'finansbank':
				case 'denizbank':
				case 'ptt':
				case 'cashu':
				case 'onecard':
				case 'pse':
				case 'exito':
				case 'efecty':
				case 'baloto':
				case 'pinvalidda':
				case 'mangirkart':
				case 'bancocreditodeperu':
				case 'bbvacontinental':
				case 'safetypay':
				case 'pagoefectivo':
				case 'nodwin_cod':
				case 'pagofacil':
				case 'rapipago':
				case 'santanderrio':
				case 'redpagos':
				case 'boletoflash':
				case 'cashincis':
					displayPendingReceipt = true;
					break;

				default:
					break;
			}

			var bOpenURLInSteamExternalWindow = false;

			if ( g_bIsInClientOrOverlay )
			{
				switch ( method.value )
				{
					case 'itauonline':
						bOpenURLInSteamExternalWindow = true;
						break;

					default:
						break;
				}
			}

			if ( g_bInReactMobileApp )
			{
				OpenUrlInNewBlankWindow( 'https://checkout.steampowered.com/checkout/externallink/?transid=' + transID );
			}
			else if ( bOpenURLInSteamExternalWindow )
			{
				g_winExternal = window.open( 'steam://openurl_external/https://checkout.steampowered.com/checkout/externallinkex/?transid=' + transID, '_external_provider', '' );
			}
			else
			{
				g_winExternal = window.open( 'https://checkout.steampowered.com/checkout/externallink/?transid=' + transID, '_external_provider', 'width=1280,height=900' );
			}

						if ( displayPendingReceipt )
			{
				DisplayPendingReceiptPage();
			}
			else
			{
				PollForTransactionStatus( $('transaction_id').value, method.value == 'cafefunded' ? 120 : 40, 15 );
			}
		}
		else
		{
			OpenUrlInNewBlankWindow( 'https://checkout.steampowered.com/paypal/launchauth/?webbasedpurchasing=1&transid=' + transID + '&authurl='+escapedUrl + '&s=' + g_sessionID );
			if ( method.value != 'paypal' && method.value != 'storedpaypal' && method.value != 'updatepaypal' )
			{
				PollForTransactionStatus( $('transaction_id').value, 80, 15 );
			}
		}

		$J('#purchase_button_bottom').hide();
		$J('#purchase_button_inprogress_bottom').show();
	}
	catch( e )
	{
		ReportCheckoutJSError( 'Failed launching new window for external auth', e );
	}
}

function PopupCVV2Explanation()
{
	try
	{
		var method = $('payment_method');
		var type = 'non-amex';
		if ( method && method.value == 'amex' )
		{
			type = 'amex';
		}

				window.open( 'https://checkout.steampowered.com//checkout/cvv2explain/?webbasedpurchasing=1&type='+type, '_blank', "height=225,width=225,toolbar=no,menubar=no,resiable=no,scrollbars=no,status=no,titlebar=no" );
	}
	catch( e )
	{
		ReportCheckoutJSError( 'Failed popping CVV2 explanation', e );
	}
}

function SetButtonInnerHtml( objName, value )
{
	$J( '*:not(:has("*"))' ,objName).text( value );
}

var g_nSubmitPaymentInfoButtonState = 1;
var g_bAnimatingSubmitButtonCurrently = false;
function AnimateSubmitPaymentInfoButton()
{
	try
	{
						if ( $J('#paypal-button').is(":visible") )
		{
			$J('#submit_payment_info_btn').hide();
			$J('#submit_payment_info_btn_in_progress').hide();
			g_bAnimatingSubmitButtonCurrently = false;
			return;
		}

		if ( !g_bInitTransactionCallRunning && !g_bGetFinalPriceRunning && !g_bFinalizeTransactionInProgress && !g_bPollingForTransactionStatus )
		{
			$J('#submit_payment_info_btn').show();
			$J('#submit_payment_info_btn_in_progress').hide();
			g_bAnimatingSubmitButtonCurrently = false;
			return;
		}

		g_bAnimatingSubmitButtonCurrently = true;
		$J('#submit_payment_info_btn').hide();
		$J('#submit_payment_info_btn_in_progress').show();

		g_nSubmitPaymentInfoButtonState++;
		if ( g_nSubmitPaymentInfoButtonState > 3 )
			g_nSubmitPaymentInfoButtonState = 1;

		var append = '';
		if ( g_nSubmitPaymentInfoButtonState == 1 )
		{
			append = '.';
		}
		else if ( g_nSubmitPaymentInfoButtonState == 2 )
		{
			append = '..';
		}
		else
		{
			append = '...';
		}

		SetButtonInnerHtml( 'submit_payment_info_btn_in_progress', 'Đang xử lý'+append );

		setTimeout( AnimateSubmitPaymentInfoButton, 500 );
	}
	catch( e )
	{
		ReportCheckoutJSError( 'Failed in AnimateSubmitPaymentInfoButton', e );
	}
}

var g_nStoredCardLabelState = 1;
function AnimateStoredCardProcessingLabel()
{
	try
	{
				if ( !g_bInitTransactionCallRunning && !g_bGetFinalPriceRunning )
		{
			$('stored_card_processing').hide();
			return;
		}
		$('stored_card_processing_label').show();

		g_nStoredCardLabelState++;
		if ( g_nStoredCardLabelState > 3 )
			g_nStoredCardLabelState = 1;

		var append = '';
		if ( g_nStoredCardLabelState == 1 )
		{
			append = '.';
		}
		else if ( g_nStoredCardLabelState == 2 )
		{
			append = '..';
		}
		else
		{
			append = '...';
		}

		$('stored_card_processing_label').innerHTML = 'Đang xử lý'+append;

		setTimeout( AnimateStoredCardProcessingLabel, 500 );
	}
	catch( e )
	{
		ReportCheckoutJSError( 'Failed in AnimateStoredCardProcessingLabel', e );
	}
}

var g_nSubmitGiftNoteButtonState = 1;
function AnimateSubmitGiftNoteButton()
{
	try
	{
				if ( !g_bInitTransactionCallRunning && !g_bGetFinalPriceRunning && !g_bSendGiftCallRunning )
		{
			$('submit_gift_note_btn').show();
			$('submit_gift_note_btn_in_progress').hide();

			return;
		}
		$('submit_gift_note_btn').hide();
		$('submit_gift_note_btn_in_progress').show();

		g_nSubmitGiftNoteButtonState++;
		if ( g_nSubmitGiftNoteButtonState > 3 )
			g_nSubmitGiftNoteButtonState = 1;

		var append = '';
		if ( g_nSubmitGiftNoteButtonState == 1 )
		{
			append = '.';
		}
		else if ( g_nSubmitGiftNoteButtonState == 2 )
		{
			append = '..';
		}
		else
		{
			append = '...';
		}

		SetButtonInnerHtml('submit_gift_note_btn_in_progress', 'Đang xử lý'+append );

		setTimeout( AnimateSubmitGiftNoteButton, 500 );
	}
	catch( e )
	{
		ReportCheckoutJSError( 'Failed in AnimateSubmitGiftNoteButton', e );
	}
}

function OnSaveBillingAddressSuccess()
{
	var form = document.createElement( 'form' );
	document.body.appendChild( form );
	form.method = 'post';
	if ( $('cache_return_url') )
		form.action = $('cache_return_url').value;
	else
		form.action = 'https://store.steampowered.com/account/';

	var address = {
		'FirstName' : $('first_name').value,
		'LastName' : $('last_name').value,
		'Address' : $('billing_address').value,
		'AddressTwo' : $('billing_address_two').value,
		'Country' : $('billing_country').value,
		'City' : $('billing_city').value,
		'State' : ( g_bHasBillingStates ? $('billing_state_select').value : $('billing_state_text').value),
		'PostalCode' : $('billing_postal_code').value,
		'Phone' : $('billing_phone').value,
		'sessionid' : g_sessionID
	}

	for ( var key in address )
	{
        var input = document.createElement('input');
        input.type = 'hidden';
        input.name = key;
        input.value = address[key];
        form.appendChild(input);
	}

	form.submit();
}

function SaveBillingAddress()
{
		if ( !$('save_my_address').checked )
	{
		OnSaveBillingAddressSuccess();
		return;
	}

	try
	{
		BillingAddress_SaveBillingAddress( g_sessionID, 'https://checkout.steampowered.com/checkout/updatebillingaddress/',
		{
		    onSuccess: function(result){
				// Success...
				if ( result.success == 1 )
				{
					OnSaveBillingAddressSuccess();
					return;
				}
				else
				{
					OnInitializeTransactionFailure( 0 );
					return;
				}
		    },
		    onFailure: function(){
				OnInitializeTransactionFailure( 0  );
			}
		});
	}
	catch(e)
	{
		ReportCheckoutJSError( 'Failed gathering form data and calling UpdateBillingAddress', e );
	}
}

var g_bInitTransactionCallRunning = false;
function InitializeTransaction()
{
		if( g_bInitTransactionCallRunning )
		return;

	var giftee_account_id = g_nGiftee_account_id;
	var giftee_email = '';
	var giftee_name = g_sGiftee_name;
	var gift_message = g_sGift_message;
	var gift_sentiment = g_sGift_sentiment;
	var gift_signature = g_sGift_signature;
	var gift_scheduled_send = g_sGift_scheduledSend;
	var bIsGift = false;
	g_eLastAuthenticationStep = false;

		$('is_external_finalize_transaction').value = 0;

		if ( g_bIsUpdateBillingInfoForm && g_bUpdateBillingFormAddressOnly )
	{
		SaveBillingAddress();
		return;
	}

		if ( g_bIsUpdateBillingInfoForm && BIsStoredCreditCard() )
	{
		var result = new Object();
		result.success = 1;
		result.purchaseresultdetail = 0;
		OnPurchaseSuccess( result );
		return;
	}

	try
	{
		var old_transaction_id = $('transaction_id').value;
		if ( old_transaction_id != '' && old_transaction_id != -1 )
		{
			$('transaction_id').value = -1;
			$('paypaltoken').value = '';

									new Ajax.Request('https://checkout.steampowered.com/checkout/canceltransaction/',
			{
			    method:'post',
			    parameters: {
					'transid' : old_transaction_id
				},
			    onSuccess: function(transport){
			    	//alert( 'cancel ok' );
					return;
			    },
			    onFailure: function(){
			    	//alert( 'cancel fail' );
					return;
				}
			});
		}
	}
	catch(e)
	{
		ReportCheckoutJSError( 'Failed cancelling previous transaction', e );
	}

	try
	{
				if ( $( 'send_via_email' ) || $('send_via_friends') )
		{
			bIsGift = true;
			if ( $( 'send_via_email' ) && $( 'send_via_email' ).checked )
			{
				giftee_email = $( 'email_input' ).value;
			}
			else
			{
				giftee_account_id = currently_selected_friend_id;
			}
			giftee_name = $('gift_recipient_name').value;
			gift_message = $('gift_message_text').value;
			gift_sentiment = $('gift_sentiment').value;
			gift_signature = $('gift_signature').value;
			gift_scheduled_send = GatherScheduledSendFields();
		}

				if ( g_bIsPurchaseRequest )
		{
			bIsGift = true;
			currently_selected_friend_name = g_sGiftee_name;
		}

		var bHasCardInfo = false;
		var method = $('payment_method');
		if ( BIsCreditCardMethod( method.value ) )
		{
			bHasCardInfo = true;
		}

				g_bInitTransactionCallRunning = true;

				AnimateSubmitPaymentInfoButton();

		var sPaymentMethod = method.value;
		if ( BIsStoredCreditCard() )
		{
			sPaymentMethod = $('stored_payment_method').value;
		}
		else if ( method.value == 'storedpaypal' && g_bEnableCachedPayPalCredentials )
		{
			sPaymentMethod = 'paypal';
		}
		else if ( method.value == 'updatepaypal' )
		{
			sPaymentMethod = 'paypal';
		}

	 	var paymentGID = '';

	 	if ( BIsStoredCreditCard() )
	 	{
	 		paymentGID = $('stored_card_id').value;
	 	}
	 	else if ( method.value == 'storedpaypal' && g_bEnableCachedPayPalCredentials )
	 	{
	 		paymentGID = $('stored_paypal_id').value;
	 	}

		var bSaveBillingAddress = g_bIsUpdateBillingInfoForm;
		if ( $('save_my_address').checked && !BIsStoredCreditCard() && method.value != 'storedpaypal' )
		{
			if ( method.value == 'paypal' || method.value == 'updatepaypal' )
				bSaveBillingAddress = g_bEnableCachedPayPalCredentials;
			else
				bSaveBillingAddress = true;
		}

		$('gift_tracking_description').hide();
		$('checkout_receipt_description').show();
				if ( g_bHardwareOnly )
		{
						$('checkout_receipt_description').hide();
		}
		else if ( bIsGift )
		{
			if ( $('send_self') && $('send_self').checked )
			{
								$('checkout_receipt_description').innerHTML = 'Những vật phẩm bạn mua đã được thêm vào kho đồ Steam của bạn. Nhấp vào <%1$s>đây<%2$s> để xem kho đồ Steam cùng các lựa chọn để gửi tặng vật phẩm đó cho bạn bè.'.replace( '<%1$s>', '<a href="' + g_sInventoryLink + '">').replace( '<%2$s>', '</a>');
			}
			else
			{
								$('checkout_receipt_description').innerHTML = 'Quà của bạn đang trên đường tới!';
				$('gift_tracking_description').show();
			}
		}
		else if ( g_bMicroTxn )
		{
						$('checkout_receipt_description').innerHTML = 'Bạn có thể sử dụng ngay số dư tài khoản của mình.';
		}
		else if ( g_bWalletCreditOnly )
		{
						$('checkout_receipt_description').innerHTML = 'Bạn có thể sử dụng ngay số dư tài khoản của mình.';
		}
		else if ( g_bIsInOverlay )
		{
						$('checkout_receipt_description').innerHTML = 'Sản phẩm được gửi số hóa của bạn giờ đã được đăng kí với tài khoản của bạn trên Steam. Để truy cập sản phẩm, chỉ cần ghé thăm <a href="steam://open/games">thư viện</a> Steam của bạn bất cứ khi nào sẵn sàng.';
		}
		else
		{
			if ( g_nItemsForSelf > 0 && g_nItemsForGifts > 0 )
			{
								$('checkout_receipt_description').innerHTML = 'Vật phẩm gửi qua đường kĩ thuật số giờ đã được đăng kí với tài khoản của bạn trên Steam. Để truy cập chúng, đơn giản chỉ cần ghé thăm thư viện Steam bất cứ khi nào bạn sẵn sàng.<br/><br/>Bản sao dư ra từ đơn hàng này đã được thêm vào kho đồ Steam của bạn. Nhấp vào <%1$s>đây<%2$s> để xem kho đồ cùng các lựa chọn để gửi những bản sao này tới bạn bè.'.replace( '<%1$s>', '<a href="' + g_sInventoryLink + '">').replace( '<%2$s>', '</a>');
			}
			else if ( g_nItemsForSelf == 0 && g_nItemsForGifts > 0 )
			{
								$('checkout_receipt_description').innerHTML = 'Những vật phẩm bạn mua đã được thêm vào kho đồ Steam của bạn. Nhấp vào <%1$s>đây<%2$s> để xem kho đồ Steam cùng các lựa chọn để gửi tặng vật phẩm đó cho bạn bè.'.replace( '<%1$s>', '<a href="' + g_sInventoryLink + '">').replace( '<%2$s>', '</a>');
			}
			else
			{
								$('checkout_receipt_description').innerHTML = 'Sản phẩm được gửi số hóa của bạn giờ đã được đăng kí với tài khoản của bạn trên Steam. Để truy cập sản phẩm, chỉ cần ghé thăm <a href="steam://open/games">thư viện</a> Steam của bạn bất cứ khi nào sẵn sàng.';
			}
		}

		new Ajax.Request('https://checkout.steampowered.com/checkout/inittransaction/',
		{
		    method:'post',
		    parameters: {
				// Info for all carts
				'gidShoppingCart' : $J('#shopping_cart_gid').val() || -1,
				'gidReplayOfTransID' : $J('#gid_replay' ).val() || -1,
				'bUseAccountCart': ( typeof g_bUseAccountCart != 'undefined' && g_bUseAccountCart ) ? 1 : 0,
				'PaymentMethod' : sPaymentMethod,
				'abortPendingTransactions' : ( $('cancel_pending').checked ? 1 : 0 ),

				'bHasCardInfo' : ( bHasCardInfo ? 1 : 0 ),
				'CardNumber' : $('card_number').value,
				'CardExpirationYear' : $('expiration_year').value,
				'CardExpirationMonth' : $('expiration_month').value,

				// address info, which may go unused depending on payment method
				'FirstName' : g_bShowAddressForm ? $('first_name').value : '',
				'LastName' : g_bShowAddressForm ? $('last_name').value : '',
				'Address' : g_bShowAddressForm ? $('billing_address').value : '',
				'AddressTwo' : g_bShowAddressForm ? $('billing_address_two').value : '',
				'Country' : $('billing_country').value,
				'City' : g_bShowAddressForm ? $('billing_city').value : '',
				'State' : g_bShowAddressForm ? ( g_bHasBillingStates ? $('billing_state_select').value : $('billing_state_text').value) : '',
				'PostalCode' : g_bShowAddressForm ? $('billing_postal_code').value : '',
				'Phone' : g_bShowAddressForm ? $('billing_phone').value : '',

				'ShippingFirstName' : $('shipping_first_name') ? $('shipping_first_name').value : '',
				'ShippingLastName' : $('shipping_last_name').value,
				'ShippingAddress' : $('shipping_address').value,
				'ShippingAddressTwo' : $('shipping_address_two').value,
				'ShippingCountry' : $('shipping_country').value,
				'ShippingCity' : $('shipping_city').value,
				'ShippingState' : ( g_bHasBillingStates ? $('shipping_state_select').value : $('shipping_state_text').value),
				'ShippingPostalCode' : $('shipping_postal_code').value,
				'ShippingPhone' : $('shipping_phone').value,


				// gift info, which may or may not exist
				'bIsGift' : ( bIsGift ? 1 : 0 ),
				'GifteeAccountID' : giftee_account_id,
				'GifteeEmail' : giftee_email,
				'GifteeName' : giftee_name,
				'GiftMessage' : gift_message,
				'Sentiment' : gift_sentiment,
				'Signature' : gift_signature,
				'ScheduledSendOnDate': gift_scheduled_send,

				'BankAccount' : $('bank_account').value,
				'BankCode' : $('bank_code').value,
				'BankIBAN' : $('bank_iban').value,
				'BankBIC' : $('bank_bic').value,
                'TPBankID' : $('bank_name').value,
				'BankAccountID' : $('bank_account_id').value,

								'bSaveBillingAddress' : bSaveBillingAddress ? 1 : 0,
				'gidPaymentID' : paymentGID,
				'bUseRemainingSteamAccount' : (g_bUseRemainingSteamAccount ? 1 : 0),
				'bPreAuthOnly' : (g_bIsUpdateBillingInfoForm ? 1 : 0),

				'sessionid' : g_sessionID
			},
		    onSuccess: function(transport){
		    	g_bInitTransactionCallRunning = false;
				if ( transport.responseText ){
					try {
						var result = transport.responseText.evalJSON(true);
		      		} catch ( e ) {
		      			// Failure
		      			OnInitializeTransactionFailure( 0 );
		      		}
		      	   	// Success...
		      	   	if ( result.success == 1 && result.transid != -1 )
		      	   	{
		      	   		OnInitializeTransactionSuccess( result, bSaveBillingAddress );
		      	   		return;
		      	   	}
		      	   	else
		      	   	{
		      	   		OnInitializeTransactionFailure( result.purchaseresultdetail, result );
		      	   		return;
		      	   	}
			  	}

								OnInitializeTransactionFailure( 0  );
		    },
		    onFailure: function(){
								g_bInitTransactionCallRunning = false;
				OnInitializeTransactionFailure( 0  );
			}
		});
	}
	catch(e)
	{
		ReportCheckoutJSError( 'Failed gathering form data and calling InitializeTransaction', e );
	}
}

function BIsBankChoiceMethod( method )
{
    return method == 'ideal';
}

function LoadAsyncPayPalScript( src ) {
    return new Promise(function (resolve, reject) {
        if ( document.querySelector("script[src='https://www.paypal.com/sdk/js?disable-funding=credit,card,paylater,bancontact,blik&" + src + "']") === null )
        {
            var script = document.createElement('script');
            script.dataset.namespace = 'paypal_sdk';
            script.onload = () => { resolve(); };
            script.onerror = () => { reject(); };
            script.src = "https://www.paypal.com/sdk/js?disable-funding=credit,card,paylater,bancontact,blik&" + src;
            document.body.appendChild(script);
        }
        else
        {
            resolve();
        }
    });
}

function OnInitializeTransactionSuccess( result, bSaveBillingAddress )
{
	try
	{
		var method = $('payment_method');

				$('transaction_id').value = result.transid;
		var method = $('payment_method');

		$J('#submit_payment_info_btn').show();
		$J('#paypal-button').hide();

				if ( result.paymentmethod == 4 && method.value != 'storedpaypal' )
		{
						
						$J('#payment_row_one').hide();

			$J('#payment_row_address, #payment_header_title' ).hide();
			$J('#payment_header_title').hide();
			$J('#payment_row_save_my_address').hide();
			$J('#payment_row_bank_name').hide();
			$J('#payment_row_country_verification').hide();
			$J('#payment_row_step2').hide();
			$J('#payment_method_specific_note').hide();
			$J('#payment_method_notes').hide();
			$J('#payment_row_eight').show();

						$J('#credit_card_row').hide();
			$J('#card_number_label').hide();
			$J('#card_number').hide();

			$('paypaltoken').value = result.paypaltoken;
			$('external_payment_processor_notice').innerHTML = 'Giao dịch PayPal được ủy quyền thông qua trang web PayPal. Nhấn vào nút bên dưới để mở một cửa sổ trình duyệt mới để bắt đầu giao dịch.';

			if ( false || !g_bUseNewPayPalCheckout )
			{
				$('submit_payment_info_btn').href = "javascript:PerformPayPalAuthorization();";
				$( 'payment_info_form' ).onsubmit = function() { PerformPayPalAuthorization(); return false; };
				SetButtonInnerHtml('submit_payment_info_btn', 'Bắt đầu giao dịch PayPal' );
			}
			else
			{
                $('col_right_payment_info').style.display = 'none';
                $('col_right_review').style.display = 'block';
				$J('#submit_payment_info_btn').hide();
				$J('#submit_payment_info_btn_in_progress').hide();
				$J('#paypal-button').html('');

                // fetch the paypal js sdk appropriate to our checkout type
                var srcParams = 'client-id=' + result.paypalclientid + '&currency=' + result.paypalcurrency ;
                var createOrderFn = async (data, actions) => {
			                	g_bPayPalAuthInFlight = true;
                	return $J('#paypaltoken').val();
                };
                var createBillingAgreementFn = async (data, actions) => {
			                	g_bPayPalAuthInFlight = true;
                	return $J('#paypaltoken').val();
                };

                if ( bSaveBillingAddress )
                {
                    createOrderFn = undefined;
                    srcParams = srcParams + "&intent=tokenize&vault=true";
                }
                else
                {
                    createBillingAgreementFn = undefined;
                }

                                    LoadAsyncPayPalScript( srcParams ).then(
                        () => {
                            paypal_sdk.Buttons({
                                style: {
                                    color: 'gold',
                                    shape: 'rect',
                                    size: 'small',
                                    label: 'paypal',
                                    tagline: false
                                },

                                createOrder: createOrderFn,
                                createBillingAgreement: createBillingAgreementFn,
                                onApprove: async (data, actions) => {
                                    OnPayPalSuccess( $J('#transaction_id').val() );
                                },
                                onError: async (data, actions) => {
                                    OnPayPalCancel( $J('transaction_id').val() );
                                }

                            }).render("#paypal-button");
                        });
                



				$J('#paypal-button').show();
			}

			$J('#payment_method_previous_button').hide();

			return;
		}
		else if ( ( result.paymentmethod == 4 && method.value != 'storedpaypal' ) || result.paymentmethod == 3					|| result.paymentmethod == 5 || result.paymentmethod == 6					|| result.paymentmethod == 7 || result.paymentmethod == 9					|| result.paymentmethod == 10					|| result.paymentmethod == 11 || result.paymentmethod == 78					|| result.paymentmethod == 12					|| result.paymentmethod == 14					|| result.paymentmethod == 33					|| result.paymentmethod == 18 || result.paymentmethod == 19					|| result.paymentmethod == 20 || result.paymentmethod == 21					|| result.paymentmethod == 22 || result.paymentmethod == 23					|| result.paymentmethod == 24 || result.paymentmethod == 25					|| result.paymentmethod == 26 || result.paymentmethod == 27					|| result.paymentmethod == 28 || result.paymentmethod == 29					|| result.paymentmethod == 45 || result.paymentmethod == 46					|| result.paymentmethod == 47 || result.paymentmethod == 121					|| result.paymentmethod == 48					|| result.paymentmethod == 49 || result.paymentmethod == 50					|| result.paymentmethod == 51 || result.paymentmethod == 52					|| result.paymentmethod == 53 || result.paymentmethod == 54					|| result.paymentmethod == 55 || result.paymentmethod == 56					|| result.paymentmethod == 57 || result.paymentmethod == 58					|| result.paymentmethod == 59 || result.paymentmethod == 60					|| result.paymentmethod == 61 || result.paymentmethod == 62					|| result.paymentmethod == 66					|| result.paymentmethod == 31					|| result.paymentmethod == 34					|| result.paymentmethod == 36					|| result.paymentmethod == 37					|| result.paymentmethod == 38					|| result.paymentmethod == 65 || result.paymentmethod == 125					|| result.paymentmethod == 39					|| result.paymentmethod == 40					|| result.paymentmethod == 127					|| result.paymentmethod == 135					|| result.paymentmethod == 136					|| result.paymentmethod == 42					|| result.paymentmethod == 35					|| result.paymentmethod == 67					|| result.paymentmethod == 68					|| result.paymentmethod == 69					|| result.paymentmethod == 70					|| result.paymentmethod == 71					|| result.paymentmethod == 72					|| result.paymentmethod == 73					|| result.paymentmethod == 74					|| result.paymentmethod == 75					|| result.paymentmethod == 76					|| result.paymentmethod == 77					|| result.paymentmethod == 79					|| result.paymentmethod == 81					|| result.paymentmethod == 82					|| result.paymentmethod == 83					|| result.paymentmethod == 84					|| result.paymentmethod == 85					|| result.paymentmethod == 86					|| result.paymentmethod == 87					|| result.paymentmethod == 88					|| result.paymentmethod == 89					|| result.paymentmethod == 90					|| result.paymentmethod == 91					|| result.paymentmethod == 92					|| result.paymentmethod == 93					|| result.paymentmethod == 94					|| result.paymentmethod == 95					|| result.paymentmethod == 96					|| result.paymentmethod == 97					|| result.paymentmethod == 98					|| result.paymentmethod == 99					|| result.paymentmethod == 100					|| result.paymentmethod == 101					|| result.paymentmethod == 102					|| result.paymentmethod == 103					|| result.paymentmethod == 104					|| result.paymentmethod == 105					|| result.paymentmethod == 106					|| result.paymentmethod == 107					|| result.paymentmethod == 108					|| result.paymentmethod == 109					|| result.paymentmethod == 110					|| result.paymentmethod == 111					|| result.paymentmethod == 112					|| result.paymentmethod == 113					|| result.paymentmethod == 114					|| result.paymentmethod == 115					|| result.paymentmethod == 119					|| result.paymentmethod == 120					|| result.paymentmethod == 116					|| result.paymentmethod == 117					|| result.paymentmethod == 118					|| result.paymentmethod == 63					|| result.paymentmethod == 137					|| result.paymentmethod == 138					|| result.paymentmethod == 139					|| result.paymentmethod == 140					|| result.paymentmethod == 141					|| result.paymentmethod == 142					|| result.paymentmethod == 143					|| result.paymentmethod == 144					|| result.paymentmethod == 145					|| result.paymentmethod == 146					|| result.paymentmethod == 147					|| result.paymentmethod == 148					|| result.paymentmethod == 149					|| result.paymentmethod == 150					|| result.paymentmethod == 151					|| result.paymentmethod == 152					|| result.paymentmethod == 153					|| result.paymentmethod == 154					|| result.paymentmethod == 155					|| result.paymentmethod == 156					|| result.paymentmethod == 157					|| result.paymentmethod == 158					|| result.paymentmethod == 159					|| result.paymentmethod == 160					|| result.paymentmethod == 161					|| result.paymentmethod == 122				)
		{
			
						$('is_external_finalize_transaction').value = 1;


			GetFinalPriceAndUpdateReviewTab();
		}
		else if ( result.paymentmethod == 128 )
		{
						DHighlightItemByValue( 'payment_method', 'steamaccount', true );
			GetFinalPriceAndUpdateReviewTab();
		}
		else
		{
						GetFinalPriceAndUpdateReviewTab();
		}
	}
	catch( e )
	{
		ReportCheckoutJSError( 'Failed handling InitializeTransaction success', e );
	}
}

function OnInitializeTransactionFailure( detail, result )
{
	try
	{
				SetTabEnabled( 'payment_info' );
		var error_text = 'Đã có một lỗi khi thực thi hoặc cập nhật giao dịch của bạn. Xin đợi một phút và thử lại hoặc liên hệ hỗ trợ để nhận giúp đỡ.';
		if ( result && result.specificerrortext )
		{
			error_text = result.specificerrortext;
		}
		else
		{
			switch ( detail )
			{
				case 1:
					error_text = 'Thông tin thanh toán của bạn đã không đậu quá trình xác thực địa chỉ. Xin vui lòng sửa lỗi sai hoặc liên hệ đội hỗ trợ để nhận giúp đỡ.';
					break;
				case 2:
					error_text = 'Thông tin thanh toán của bạn đã báo rằng không đủ tiền. Xin vui lòng sửa lỗi sai hoặc liên hệ đội hỗ trợ để nhận giúp đỡ.';
					break;
				case 3:
					error_text = 'Đã có một lỗi nội bộ khi thực thi giao dịch của bạn. Xin liên hệ đội hỗ trợ để nhận giúp đỡ.';
					break;
				case 6:
					error_text = 'Đã có vấn đề với hình thức thanh toán đã chọn cho đơn hàng của bạn. Xin hãy chọn hình thức thanh toán khác cho đơn hàng của bạn và thử lại.';
					break;
				case 82:
					error_text = 'Hình thức chi trả này hiện không tồn tại. Chúng tôi đang giải quyết sự cố này. Xin vui lòng chọn hình thức thanh toán khác cho việc mua hàng của bạn và thử lại sau.';
					break;
				case 83:
					error_text = 'Hình thức thanh toán đã chọn không hỗ trợ cho một sản phẩm mà bạn đang mua. Xin hãy chọn hình thức thanh toán khác cho đơn hàng của bạn và thử lại.';
					break;
				case 33:
					error_text = 'Giao dịch của bạn không thể được hoàn thành vì thẻ tín dụng của bạn đã hết hạn. Hãy nhập một thẻ tín dụng mới và thử lại.';
					break;
				case 24:
					error_text = 'Giao dịch thất bại vì bạn đang cố mua một trò chơi yêu cầu quyền sở hữu của một trò chơi khác mà bạn không có. Vui lòng khắc phục lỗi này và thử lại.';
					break;
				case 9:
					error_text = 'Đơn hàng của bạn không thể được hoàn thành vì có vẻ như bạn đã sở hữu một trong những trò chơi bạn đang cố mua. Hãy kiểm tra tài khoản và giỏ hàng của bạn để xác nhận là bạn đang mua một món hàng mà mình chưa sở hữu.';
					break;
				case 57:
					error_text = 'Việc mua hàng của bạn không được hoàn thành bởi vì bạn hiện đã có đăng ký sử dụng cho cùng vật phẩm trên. Xin vui lòng quan lý các thông tin đăng ký tại trang <a href=\'https://store.steampowered.com/account\'>tài khoản</a> của bạn.';
					break;
				case 31:
					error_text = 'Việc mua hàng của bạn không thực hiện được vì loại tiền trong ví Steam không trùng với loại tiền được sử dụng trong giao dịch này.';
					break;
				case 35:
					error_text = 'Việc mua hàng của bạn không hoàn thành.<br>Số tiền thêm vào Ví tiền Steam của bạn đã vượt quá giới hạn tối đa được cho phép trong Ví tiền Steam.';
					break;
				case 39:
					error_text = 'Giao dịch của bạn không thể được hoàn thành vì giỏ hàng của bạn có chứa vật phẩm không thể dùng làm quà tặng.';
					break;
				case 40:
					error_text = 'Thanh toán của bạn không thực hiện được bởi vì giỏ hàng của bạn có chứa vật phẩm không thể được chuyển phát ra khỏi Hoa Kỳ.';
					break;
				case 38:
					error_text = 'Đơn hàng của bạn không thể hoàn thành vì một hoặc nhiều sản phẩm trong giỏ hàng đã hết. Xin vui lòng thử lại sau.';
					break;
				case 59:
					error_text = 'Đơn hàng của bạn không thể hoàn thành vì một hoặc nhiều vật phẩm trong giỏ hàng của bạn không thể được chuyển tới địa chỉ giao hàng.';
					break;
				case 44:
					error_text = 'Việc mua hàng của bạn chưa hoàn thành. Tài khoản của bạn hiện bị khóa giao dịch. Xin liên hệ đội hỗ trợ Steam để biết thêm chi tiết.';
					break;
				case 45:
					error_text = 'Cảnh báo<br><br>Lần mua hàng gần đây nhất của bạn trên Steam hiện đang bị hoãn. Nhà cung cấp dịch vụ chi trả cho bạn chưa thông báo cho chúng tôi liệu bạn có bị tính tiền cho giao dịch đó hay chưa.<br><br>Trước khi tiếp tục mua hàng, xin vui lòng liên hệ nhà cung cấp dịch vụ chi trả và xác thực rằng lần mua hàng trước của bạn chưa hoàn thành. Nếu nó đã hoàn thành và bạn tiếp tục mua hàng này, bạn có thể bị tính phí gấp đôi cho bất kỳ sản phẩm bạn mua lần thứ hai.';
					$J('#cancel_pending_verification').show();
					ValidationMarkFieldBad( $('cancel_pending_label' ) );
					break;
				case 46:
					error_text = 'Vì sự an toàn của chủ khoản, giao dịch này đã bị hủy. Các lần mua hàng tiếp theo sẽ tạm bị giới hạn - xin vui lòng liên hệ đội hỗ trợ Steam để giải quyết vấn đề này.';
					break;
				case 47:
					error_text = 'Bạn không thể hoàn thành giao dịch này vì bạn đang mua một sản phẩm đã được bao gồm cùng với một gói vật phẩm trong giỏ hàng của bạn. Vui lòng kiểm tra giỏ hàng của bạn để xác thực rằng bạn không một sản phẩm nhiều lần. Nguyên nhân thường gặp là do mua DLC cùng với các phiên bản thượng hạng của một sản phẩm đã bao gồm chính DLC đó.';
					break;
				case 23:
					error_text = 'Hình thức thanh toán hiện tại không trùng khớp với thông tin quốc gia của cửa hàng. Giỏ hàng đã được chuyển mệnh giá và tổng phí được cập nhật sẽ hiện tại trang kế tiếp. Bạn có thể xem lại giỏ hàng của mình <a href=\'https://store.steampowered.com/cart/country_changed\'>tại đây</a>, hoặc thay đổi hình thức thanh toán bên dưới.';
					break;
				case 8:
					error_text = 'Giao dịch của bạn không thể hoàn thành vì bạn đang có một giao dịch khác đang hoãn trên tài khoản của mình.';
					break;
				case 52:
					error_text = 'Giao dịch của bạn không thể hoàn thành vì bạn đang có một giao dịch khác đang hoãn cho một hoặc nhiều sản phẩm trong giỏ hàng.';
					break;
				case 55:
					error_text = 'Số thẻ này không hợp lệ cho hình thức thanh toán bạn chọn.';
					break;
				case 56:
					error_text = 'Nào tay tiêu tiền, cứ từ từ mà làm! Giỏ mua sắm của bạn đã vượt giới hạn số lượng giao dịch cho phép của chúng tôi. Hãy <a href=\'https://store.steampowered.com/cart\'>chỉnh lại đồ trong giỏ của bạn</a> rồi thử lại.';
					break;
				case 53:
					error_text = 'Có vẻ như bạn đã thử mua hàng rất nhiều lần trong vài giờ qua. Vui lòng đợi một chút trước khi thử lại.';
					break;
				case 13:
					error_text = 'Việc mua hàng của bạn không thể hoàn thành vì có vật phẩm trong giỏ hàng bị hạn chế tại quốc gia của bạn.';
					break;
				case 70:
					error_text = 'Người bạn chọn gửi quà đã có món này rồi.';
					break;
				case 71:
					error_text = 'Quà bạn đang chọn mua không có sẵn trong khu vực của người nhận.';
					break;
				case 72:
					error_text = 'Do sự chênh lệch về giá của khu vực, bạn không thể gửi món quà này đến khu vực của người nhận.';
					break;
				case 69:
					error_text = 'Đơn hàng của bạn không thể được hoàn thành vì giỏ hàng có chứa vật phẩm dành riêng cho mục đích thương mại.';
					break;
				case 74:
					error_text = 'Đơn hàng của bạn không thể được hoàn thành vì giỏ hàng có chứa vật phẩm không được phép sử dụng trên những tài khoản thương mại.';
					break;
				case 75:
					error_text = 'Quốc gia hiện tại của bạn không trùng với quốc gia của doanh nghiệp đã được đăng ký.';
					break;
				case 78:
					error_text = 'Địa chỉ thanh toán bạn nhập quá dài. Vui lòng dùng phiên bản ngắn của địa chỉ hoặc phân nó ra thành hai trường.';
					break;
				case 79:
					error_text = 'Mã số thẻ tín dụng của bạn có vẻ không hợp lệ. Vui lòng kiểm tra lại thẻ và thử lại.';
					break;
				case 81:
					error_text = 'Tên thanh toán của bạn không hợp lệ vì bị để trống hoặc có quá nhiều chữ số.';
					break;
				case 87:
					error_text = 'Đơn hàng của bạn không thể hoàn thành do giỏ hàng chứa vật phẩm mà bạn đã mua, nhưng bị gỡ bỏ khỏi tài khoản của bạn. Xin vui lòng đến <a href="https://help.steampowered.com/vi/wizard/HelpWithGame">trang hỗ trợ</a> để kích hoạt lại quyền truy cập tới nội dung của bạn.';
					break;
				case 84:
					error_text = 'Đơn hàng của bạn không thể hoàn thành vì giỏ hàng có chứa vật phẩm hiện không còn hàng và yêu cầu bạn tham gia danh sách chờ.';
					break;
				case 96:
					error_text = 'Bạn không thể cập nhật quốc gia cho tài khoản Steam nhiều hơn 1 lần trong vòng 3 tháng. Vui lòng hoàn tất giao dịch bằng phương thức thanh toán từ khu vực hiện tại của bạn.';
					break;
				case 97:
					error_text = 'Yêu cầu mã số VAT để mua hàng thương mại từ vùng của bạn. Vui lòng đăng nhập vào trang đối tác Steamworks và cập nhật mục \'Thông tin công ty\' để bao gồm mã số VAT.';
					break;
				case 98:
					error_text = 'Giao dịch không thành công vì không thể xác thực địa chỉ giao hàng được nhập.';
					break;
				case 99:
					error_text = 'Đơn hàng không thể hoàn thành vì không cần đặt cọc để mua sản phẩm này nữa.';
					break;
				case 100:
					error_text = 'Đơn hàng không thể hoàn thành vì giỏ hàng có chứa sản phẩm không hợp lệ để mua. Vui lòng <a href="https://store.steampowered.com/cart">kiểm tra giỏ hàng</a> để sửa lỗi và thử lại.';
					break;
				default:
					break;
			}
		}

		DisplayErrorMessage( error_text );
	}
	catch (e)
	{
		ReportCheckoutJSError( 'Failed handling InitializeTransaction failure', e );
	}
}


function OnAuthenticationComplete( gidTransID )
{
		if ( gidTransID && g_LastFinalizedTransactionID != gidTransID )
		return;

	if ( g_timeoutPoll )
	{
		clearTimeout( g_timeoutPoll );
	}

	g_timeoutPoll = setTimeout( NewPollForTransactionStatusClosure( g_LastFinalizedTransactionID, 120, 15 ), 1*1000 );
	return true;
}

function OnAuthenticationFail()
{
	if ( g_timeoutPoll )
	{
		clearTimeout( g_timeoutPoll );
	}

	// Show a generic error
	HandleFinalizeTransactionFailure( 2, 7, false, '' );
	return true;
}


function OnPayPalSuccess( gidTransID )
{
		if ( gidTransID && $('transaction_id').value != gidTransID )
		return;

	$J('#submit_payment_info_btn').show();
	$J('#paypal-button').hide();

		if ( $('is_external_finalize_transaction').value == 1 )
	{
				if ( g_bPollingForTransactionStatus )
		{
			if ( g_timeoutPoll )
			{
				clearTimeout( g_timeoutPoll );

				var method = $('payment_method');

				switch( method.value )
				{
										case 'boleto':
					case 'boacompragold':
					case 'bancodobrasilonline':
					case 'itauonline':
					case 'bradescoonline':
					case 'pagseguro':
					case 'visabrazil':
					case 'amexbrazil':
					case 'hipercard':
					case 'aura':
					case 'mastercardbrazil':
					case 'dinerscardbrazil':
					case 'multibanco':
					case 'payshop':
					case 'maestroboacompra':
					case 'visaelectronboacompra':
					case 'oxxo':
					case 'toditocash':
					case 'carnet':
					case 'spei':
					case '3pay':
					case 'isbank':
					case 'garanti':
					case 'akbank':
					case 'yapikredi':
					case 'halkbank':
					case 'bankasya':
					case 'finansbank':
					case 'denizbank':
					case 'ptt':
					case 'cashu':
					case 'onecard':
					case 'molpoints':
					case 'konbini':
					case 'bank_transfer_japan':
					case 'payeasy':
					case 'pse':
					case 'exito':
					case 'efecty':
					case 'baloto':
					case 'pinvalidda':
					case 'mangirkart':
					case 'bancocreditodeperu':
					case 'bbvacontinental':
					case 'safetypay':
					case 'pagoefectivo':
					case 'nodwin_cod':
					case 'boletoflash':
						DisplayPendingReceiptPage();
						break;

					default:
												g_timeoutPoll = setTimeout( NewPollForTransactionStatusClosure( $('transaction_id').value, 120, 15 ), 1*1000 );
					break;
				}
			}
		}
		else
		{
			FinalizeTransaction();
		}
	}
	else
	{
		if ( g_bPayPalAuthInFlight )
			GetFinalPriceAndUpdateReviewTab();
		g_bPayPalAuthInFlight = false;
	}
	return true;
}


function OnPayPalCancel( gidTransID )
{
		if ( gidTransID && $('transaction_id').value != gidTransID )
		return;

	$J('#payment_method_previous_button').show();
	$J('#paypal-button').hide();

	HandleFinalizeTransactionFailure( 4, 0, false, '' );
	return true;
}

var g_bGetFinalPriceRunning = false;
function GetFinalPriceAndUpdateReviewTab()
{
	try
	{
				if ( g_bGetFinalPriceRunning )
			return;

		g_bGetFinalPriceRunning = true;
		// clear the cancel pending checkbox in case we need to go back
		$('cancel_pending').checked = false;

						if ( !g_bAnimatingSubmitButtonCurrently )
			AnimateSubmitPaymentInfoButton();

				var transid = $('transaction_id').value;
		var microtxnid = $('microtxn_id') ? $('microtxn_id').value : -1;
		var cart = $J('#shopping_cart_gid' ).val() || -1;
		var gidReplayOfTransID = $J('#gid_replay' ).val() || -1;
		new Ajax.Request('https://checkout.steampowered.com/checkout/getfinalprice/',
		{
		    method:'get',
		    parameters: {
				'count' : ++nGetFinalPriceCalls,
				'transid' : transid,
				'purchasetype' : g_bIsGiftForm || g_bIsPurchaseRequest ? 'gift' : 'self',
				'microtxnid' : microtxnid,
				'cart' : cart,
				'gidReplayOfTransID' : gidReplayOfTransID
			},
		    onSuccess: function(transport){
		    	g_bGetFinalPriceRunning = false;
				if ( transport.responseText ){
					try {
						var result = transport.responseText.evalJSON(true);
		      		} catch ( e ) {
		      			OnGetFinalPriceFailure( 0 );
		      		}
		      	   	if ( result.success == 1 )
		      	   	{
		      	   		OnGetFinalPriceSuccess( result );
		      	   		return;
		      	   	}
		      	   	else
		      	   	{
		      	   		OnGetFinalPriceFailure( result.purchaseresultdetail );
		      	   		return;
		      	   	}
			  	}

								OnGetFinalPriceFailure( 0 );
		    },
		    onFailure: function(){
								g_bGetFinalPriceRunning = false;
				OnGetFinalPriceFailure( 0 );
			}
		});
	}
	catch(e)
	{
		ReportCheckoutJSError( 'Failed making GetFinalPrice request', e );
	}
}

var g_bRequiresCVVReEntry = false;
function OnGetFinalPriceSuccess( result )
{
	try
	{
				$('stored_card_processing').hide();
		g_bRequiresCVVReEntry = result.requirecvv;

				UpdateReviewPageBillingInfoWithCurrentValues( result );

		if ( result )
		{
						if ( result.total )
				g_nPurchaseTotal = result.total;

			if ( result.steamAccountBalance )
				g_nSteamAccountBalance = result.steamAccountBalance;

			if ( result.formattedProviderRemaining )
				g_strProviderRemaining = result.formattedProviderRemaining;

						if ( result.providerpaymentmethod != null && result.total && result.steamAccountBalance )
			{
				if ( result.providerpaymentmethod == 0 && result.total > result.steamAccountBalance )
				{
					SetTabEnabled( 'payment_info' );
										g_bUseRemainingSteamAccount = true;
					ShowNextPaymentMethod();
					return;
				}
			}

			result.priceOfASubChanged ? $J('#checkout_review_cart_message').show() : $('checkout_review_cart_message').hide();
		}

		var method = $('payment_method');

				if ( $('is_external_finalize_transaction').value == 1 )
		{
			if ( $('col_right_review_payment_tips') )
			{
				$J('#col_right_review_payment_tips').show();
			}

			if ( result.externalurl )
			{
								var url = result.externalurl.replace( /%/g, '%25' );
				$('purchase_button_bottom').href = "javascript:PerformExternalFinalizeTransaction( '"+url.replace( /\'/g, "\\'" )+"', " + ( result.useexternalredirect ? "true" : "false" ) + " );";
				$J('#purchase_bottom_note_paypalgc').show();

				$('purchase_top').show();

				if ( method.value == 'giropay' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch GiroPay được ủy quyền thông qua trang web ngân hàng của bạn. Nhấn vào nút bên dưới để mở một trình duyệt mới để bắt đầu giao dịch.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới ủy quyền GiroPay';

					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng GiroPay';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Để hoàn tất việc mua hàng qua Giropay bạn sẽ được chuyển đến trang web ngân hàng của bạn, nơi bạn sẽ được yêu cầu nhập mã PIN ngân hàng trực tuyến của bạn và mã TAN. Nếu bạn hiện không có cả PIN và TAN vào lúc này, xin vui lòng chọn hình thức thanh toán khác. Nếu bạn không trở về Steam sau 10 giây, xin vui lòng bấm vào nút "Return To Merchant" và cho phép xử lý giao dịch.<br/> <br/> Quá trình này có thể mất đến 60 giây. Để tránh mua phải những thất bại, xin vui lòng không nhấn nút quay lại hoặc đóng cửa sổ GiroPay trước khi quá trình hoàn tất.';
					}
				}
				else if ( method.value == 'ideal' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch iDEAL được ủy quyền thông qua trang web của iDEAL. Nhấn vào nút bên dưới để mở một trình duyệt mới để bắt đầu giao dịch.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới ủy quyền iDEAL';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng iDEAL';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hãy chắc chắn rằng bạn xác nhận giao dịch trên iDEAL. Nếu bạn không trở lại Steam sau 10 giây vui lòng nhấn nút "Back to Shop" sau khi bạn đã điền xong thông tin thanh toán của bạn và uỷ quyền cho giao dịch đuợc tiếp tục.<br/><br/>Quá trình có thể kéo dài tới 60 giây. Để giao dịch tránh bị thất bại, vui lòng không nhấn nút back hoặc đóng trang iDEAL truớc khi quá trình hoàn tất.';
					}
				}
				else if ( method.value == 'paysafe' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch paysafe Card được ủy quyền thông qua trang web của paysafe. Nhấn vào nút bên dưới để mở một trình duyệt mới để bắt đầu giao dịch.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới ủy quyền paysafecard';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng paysafecard';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hãy chắc chắn rằng bạn xác nhận giao dịch trên paysafecard. Sau khi nhập vào dãy mã bạn sẽ được chuyển hướng về Steam để xác nhận đơn hàng. Để giao dịch tránh bị thất bại, vui lòng không nhấn nút back hoặc đóng trang paysafecard truớc khi quá trình hoàn tất.';
					}
				}
				else if ( method.value == 'paypal' || method.value == 'storedpaypal' || method.value == 'updatepaypal' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch PayPal được ủy quyền thông qua trang web PayPal. Nhấn vào nút bên dưới để mở một cửa sổ trình duyệt mới để bắt đầu giao dịch.';
					$('purchase_button_bottom_text').innerHTML = 'Bắt đầu giao dịch PayPal';

					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng PayPal';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hãy chắc chắn rằng bạn xác nhận giao dịch trên PayPal. Nếu bạn không trở lại Steam sau 10 giây vui lòng nhấn nút "Return To Merchant" và uỷ quyền cho giao dịch đuợc tiếp tục.<br/><br/>Quá trình có thể kéo dài tới 60 giây. Để giao dịch tránh bị thất bại, vui lòng không nhấn nút back hoặc đóng trang PayPal truớc khi quá trình hoàn tất.';
					}
				}
				else if ( method.value == 'sofort' )
				{
					if ( result.storeCountryCode == 'GB' || result.storeCountryCode == 'BE' )
					{
						$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch DIRECTebanking được ủy quyền thông qua trang web DIRECTebanking.com. Nhấn vào nút bên dưới để mở một trình duyệt mới để bắt đầu giao dịch.';
						$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới DIRECTebanking.com';

						if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
						{
							$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng DIRECTebanking';
							$('col_right_review_payment_tips_info_text').innerHTML = 'Hãy chắc chắn rằng bạn xác nhận giao dịch trên DIRECTebanking. Khi sử dụng DIRECTebanking làm hình thức thanh toán, hãy chắc rằng bạn nhấp nút "NEXT" sau khi điền xong số TAN/PIN của mình. Bạn sẽ tự động chuyển về phần mềm Steam để xác thực việc mua hàng.<br/><br/>Quá trình này có thể mất tới 60 giây. Để giao dịch tránh bị thất bại, vui lòng không nhấn nút back hoặc đóng trang DIRECTebanking truớc khi quá trình hoàn tất.';
						}
					}
					else
					{
						$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch Sofortüberweisung được ủy quyền thông qua trang web sofortüberweisung.de. Nhấn vào nút bên dưới để mở một trình duyệt mới để bắt đầu giao dịch.';
						$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới sofortüberweisung.de';
						if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
						{
							$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng Sofortüberweisung';
							$('col_right_review_payment_tips_info_text').innerHTML = 'Hãy chắc chắn rằng bạn xác nhận giao dịch trên sofortüberweisung.de. Khi sử dụng Sofortüberweisung làm hình thức thanh toán, hãy chắc rằng bạn nhấp nút "NEXT" sau khi điền xong số TAN/PIN của mình. Bạn sẽ tự động chuyển về phần mềm Steam để xác thực việc mua hàng.<br/><br/>Quá trình này có thể mất tới 60 giây. Để giao dịch tránh bị thất bại, vui lòng không nhấn nút back hoặc đóng trang Sofortüberweisung truớc khi quá trình hoàn tất.';
						}
					}
				}
				else if ( method.value == 'webmoney' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch WebMoney được ủy quyền thông qua trang web WebMoney. Nhấn vào nút bên dưới để mở một trình duyệt web mới để bắt đầu giao dịch.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới WebMoney';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng WebMoney';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hãy chắc chắn rằng bạn xác nhận giao dịch trên WebMoney. Khi sử dụng hình thức thanh toán WebMoney, sau khi điền mã bạn sẽ tự động quay về phần mềm Steam để xác nhận mua hàng.<br/><br/>Quá trình này có thể mất tới 60 giây. Để giao dịch tránh bị thất bại, vui lòng không nhấn nút back hoặc đóng trang WebMoney truớc khi quá trình hoàn tất.';
					}
				}
				else if ( method.value == 'moneybookers' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch Skrill được ủy quyền thông qua trang web Skrill. Nhấn vào nút bên dưới để mở một trình duyệt web mới để bắt đầu giao dịch.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới Skrill';

					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng Skrill';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hãy chắc chắn rằng bạn xác nhận giao dịch trên Skrill bằng cách nhấp nút "CONFIRM" sau khi đã chọn xong hình thức thanh toán. Nếu bạn không quay trở lại Steam sau 10 giây, vui lòng nhấp nút "Return To Merchant" và cho phép giao dịch được tiếp tục.<br/><br/>Quá trình này có thể mất tới 60 giây. Để giao dịch tránh bị thất bại, vui lòng không nhấn nút back hoặc đóng trang Skrill truớc khi quá trình hoàn tất.';
					}
				}
				else if ( method.value == 'alipay' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch AliPay được ủy quyền thông qua trang web AliPay. Nhấn vào nút bên dưới để mở một trình duyệt web mới để bắt đầu giao dịch.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới AliPay';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng AliPay';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hãy chắc chắn rằng bạn xác nhận giao dịch trên AliPay. Nếu bạn không quay trở lại Steam sau 10 giây, vui lòng chọn mục "Return To Merchant" và cho phép giao dịch được tiếp tục.<br/><br/>Quá trình này có thể mất đến 60 giây. Để giao dịch tránh bị thất bại, vui lòng không nhấn nút back hoặc đóng trang AliPay truớc khi quá trình hoàn tất.';
					}
				}
				else if ( method.value == 'unionpay' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch UnionPay được thông qua trang web của UnionPay. Nhấp nút phía dưới đây để mở trang mạng mới nhằm thực thi giao dịch này.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới UnionPay';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng UnionPay';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hãy chắc chắn rằng bạn xác nhận giao dịch trên UnionPay. Nếu bạn không quay trở lại Steam sau 10 giây, vui lòng nhấp nút "Return To Merchant" và cho phép giao dịch được tiếp tục.<br/><br/>Quá trình có thể kéo dài tới 60 giây. Để giao dịch tránh bị thất bại, vui lòng không nhấn nút back hoặc đóng trang UnionPay truớc khi quá trình hoàn tất.';
					}
				}
				else if ( method.value == 'yandex' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch Yandex phải được thông qua trang web Yandex. Nhấn nút sau để mở thêm một trang web để tiến hành giao dịch.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới Yandex';

					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng Yandex';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hãy chắc chắn rằng bạn xác nhận giao dịch trên Yandex. Nếu bạn không quay trở lại Steam sau 10 giây, vui lòng chọn mục "Return To Merchant" và cho phép giao dịch được tiếp tục.<br/><br/>Quá trình này có thể mất đến 60 giây. Để giao dịch tránh bị thất bại, vui lòng không nhấn nút back hoặc đóng trang Yandex truớc khi quá trình hoàn tất.';
					}
				}
				else if ( method.value == 'qiwi' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch QIWI Wallet được ủy quyền qua trang QIWI Wallet. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới QIWI Wallet';

					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng QIWI Wallet';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang QIWI Wallet bằng cách đăng nhập và chấp thuận đơn hàng từ Steam được gửi tới QIWI Wallet Inbox.<br/><br/>Quy trình này có thể mất tới 60 giây. Sau khi chấp thuận thanh toán, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'beeline' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch Mobile được ủy quyền qua trang Xsolla. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới Xsolla';

					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng thanh toán điện thoại (Beeline)';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang Xsolla bằng cách nhập số di động và địa chỉ email của bạn. Bạn sẽ nhận được một tin nhắn mà bạn phải hồi đáp để hoàn tất chuyển khoản.<br/><br/>Quá trình này có thể mất tới 60 giây. Sau khi chấp thuận thanh toán, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'boleto' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch Boleto Bancario được ủy quyền qua trang BoaCompra. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới BoaCompra';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng Boleto Bancario';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hãy chắc rằng bạn nhận được Boleto từ trang Boacompra khi hoàn thành chuyển khoản. Một email sẽ được gửi từ BoaCompra tới bạn với đường dẫn để in Boleto.<br/><br/>Bạn cần phải thêm tiền cho hóa đơn này trước khi giao dịch hoàn thành. Quy trình này có thể mất vài ngày hành chính tùy thuộc vào thời điểm bạn hoàn thành Boleto. Một khi việc thêm tiền đã được xác thực bởi ngân hàng, bạn sẽ nhận được một email hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'boacompragold' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch BoaCompra Gold được ủy quyền qua trang BoaCompra. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới BoaCompra';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng BoaCompra Gold';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang BoaCompra bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới 5 phút. Sau khi chấp thuận thanh toán, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'bancodobrasilonline' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch Banco Do Brasil Online được ủy quyền qua trang BoaCompra. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới BoaCompra';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng Banco Do Brasil Online';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang BoaCompra bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới 5 phút. Sau khi chấp thuận thanh toán, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'itauonline' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch Itau Online được ủy quyền qua trang BoaCompra. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới BoaCompra';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng Itau Online';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang BoaCompra bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới 5 phút. Sau khi chấp thuận thanh toán, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'bradescoonline' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch Bradesco Online được ủy quyền qua trang BoaCompra. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới BoaCompra';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng Bradesco Online';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang BoaCompra bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới 5 phút. Sau khi chấp thuận thanh toán, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'pagseguro' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch Pagseguro được ủy quyền qua trang BoaCompra. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới BoaCompra';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng Pagseguro';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang BoaCompra bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới 5 phút. Sau khi chấp thuận thanh toán, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'visabrazil' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch Visa (National) được ủy quyền qua trang BoaCompra. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới BoaCompra';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng Visa (Quốc gia)';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang BoaCompra bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới vài ngày hành chính. Sau khi việc thanh toán đã được xác nhận, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'amexbrazil' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch American Express (National) được ủy quyền qua trang BoaCompra. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới BoaCompra';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng American Express (Quốc gia)';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang BoaCompra bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới vài ngày hành chính. Sau khi việc thanh toán đã được xác nhận, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'aura' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch Aura được ủy quyền qua trang BoaCompra. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới BoaCompra';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng Aura';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang BoaCompra bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới vài ngày hành chính. Sau khi việc thanh toán đã được xác nhận, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'hipercard' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch Hipercard được ủy quyền qua trang BoaCompra. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới BoaCompra';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng Hipercard';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang BoaCompra bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới vài ngày hành chính. Sau khi việc thanh toán đã được xác nhận, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'mastercardbrazil' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch Mastercard (National) được ủy quyền qua trang BoaCompra. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới BoaCompra';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng Mastercard (Quốc gia)';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang BoaCompra bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới vài ngày hành chính. Sau khi việc thanh toán đã được xác nhận, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'dinerscardbrazil' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch Diner\'s Club (National) được ủy quyền qua trang BoaCompra. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới BoaCompra';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng Diner\'s Club (Quốc gia)';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang BoaCompra bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới vài ngày hành chính. Sau khi việc thanh toán đã được xác nhận, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'multibanco' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch Multibanco được ủy quyền qua trang BoaCompra. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới BoaCompra';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng Multibanco';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang BoaCompra bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới 5 phút. Sau khi chấp thuận thanh toán, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'payshop' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch Payshop được ủy quyền qua trang BoaCompra. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới BoaCompra';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng Payshop';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang BoaCompra bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới 5 phút. Sau khi chấp thuận thanh toán, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'maestroboacompra' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch Maestro được ủy quyền qua trang BoaCompra. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới BoaCompra';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng Maestro';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang BoaCompra bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới 5 phút. Sau khi chấp thuận thanh toán, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'visaelectronboacompra' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch Visa Electron được ủy quyền qua trang BoaCompra. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới BoaCompra';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên khi dùng Visa Electron';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang BoaCompra bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới 5 phút. Sau khi chấp thuận thanh toán, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'oxxo' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch OXXO được ủy quyền qua trang BoaCompra. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới BoaCompra';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng OXXO';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang BoaCompra bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Một email từ BoaCompra sẽ được gửi tới bạn với đường dẫn đến phiếu hóa đơn OXXO có thể in giấy.<br/><br/>Bạn cần phải mang phiếu hóa đơn này đến thu ngân OXXO gần nhất, quét mã vạch, và hoàn thành chuyển khoản. Việc thanh toán sẽ được tự động đăng vào lúc 12:00pm trong ngày hành chính tiếp theo. Sau khi tiền gửi được xác thực, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'toditocash' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch Todito Cash được ủy quyền qua trang BoaCompra. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới BoaCompra';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng Todito Cash';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang BoaCompra bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới 5 phút. Sau khi chấp thuận thanh toán, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'carnet' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch Carnet được ủy quyền qua trang BoaCompra. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới BoaCompra';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng Carnet';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang BoaCompra bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới 5 phút. Sau khi chấp thuận thanh toán, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'spei' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch SPEI được ủy quyền qua trang BoaCompra. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới BoaCompra';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng SPEI';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang BoaCompra bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới 5 phút. Sau khi chấp thuận thanh toán, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == '3pay' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch Mobile được ủy quyền qua trang BoaCompra. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới BoaCompra';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng di động (3pay)';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang BoaCompra bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới 5 phút. Sau khi chấp thuận thanh toán, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'isbank' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch Is Bank được ủy quyền qua trang BoaCompra. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới BoaCompra';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng Is Bank';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang BoaCompra bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới 5 phút. Sau khi chấp thuận thanh toán, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'garanti' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch Garanti được ủy quyền qua trang BoaCompra. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới BoaCompra';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng Garanti';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang BoaCompra bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới 5 phút. Sau khi chấp thuận thanh toán, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'akbank' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch Akbank được ủy quyền qua trang BoaCompra. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới BoaCompra';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng Akbank';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang BoaCompra bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới 5 phút. Sau khi chấp thuận thanh toán, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'yapikredi' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch Yapi Kredi được ủy quyền qua trang BoaCompra. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới BoaCompra';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng Yapi Kredi';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang BoaCompra bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới 5 phút. Sau khi chấp thuận thanh toán, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'halkbank' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch Halkbank được ủy quyền qua trang BoaCompra. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới BoaCompra';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng Halkbank';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang BoaCompra bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới 5 phút. Sau khi chấp thuận thanh toán, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'bankasya' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch Bank Asya được ủy quyền qua trang BoaCompra. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới BoaCompra';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng Bank Asya';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang BoaCompra bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới 5 phút. Sau khi chấp thuận thanh toán, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'finansbank' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch Finansbank được ủy quyền qua trang BoaCompra. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục đến BoaCompra';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng Finansbank';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang BoaCompra bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới 5 phút. Sau khi chấp thuận thanh toán, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'denizbank' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch DenizBank được ủy quyền qua trang BoaCompra. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới BoaCompra';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng DenizBank';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang BoaCompra bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới 5 phút. Sau khi chấp thuận thanh toán, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'ptt' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch PTT được ủy quyền qua trang BoaCompra. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới BoaCompra';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng PTT';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang BoaCompra bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới 5 phút. Sau khi chấp thuận thanh toán, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'cashu' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch CashU được ủy quyền qua trang Smart2Pay. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới CashU';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng CashU';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang Smart2Pay bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới 5 phút. Sau khi chấp thuận thanh toán, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'onecard' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch OneCard được ủy quyền qua trang BoaCompra. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới OneCard';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng OneCard';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang Smart2Pay bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới 5 phút. Sau khi chấp thuận thanh toán, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'tenpay' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch Tenpay được ủy quyền thông qua trang Smart2Pay. Nhấp vào nút dưới đây để mở một cửa sổ trình duyệt mới và bắt đầu giao dịch.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới Tenpay';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng Tenpay';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang Smart2Pay bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới 5 phút. Sau khi chấp thuận thanh toán, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'wechat' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch WeChat được ủy quyền thông qua trang WeChat. Nhấp vào nút dưới đây để mở một cửa sổ trình duyệt mới và bắt đầu giao dịch.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới WeChat';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng WeChat';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang WeChat bằng cách quét mã QR với ứng dụng WeChat của bạn. Vui lòng chú ý rằng tài khoản WeChat của bạn phải được kết nối với một ngân hàng phát hành thẻ Trung Quốc hợp lệ hoặc thanh toán sẽ bị từ chối.<br/><br/>Quá trình này có thể mất tới 5 phút. Sau khi chấp thuận thanh toán, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'molpoints' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch MOL Points được ủy quyền qua trang MOL. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới MOL';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng MOLPoints';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang MOL bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới 5 phút. Sau khi chấp thuận thanh toán, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'konbini' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch Konbini được ủy quyền qua trang Degica. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới Degica';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng Konbini';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Đảm bảo rằng bạn đã lưu hoặc in Konbini của bạn từ trang Degica khi đã hoàn thành giao dịch. Degica sẽ gửi cho bạn email cùng với các thông tin về Konbini của bạn.<br/><br/>Bạn sẽ cần phải thanh toán tờ hóa đơn trước khi giao dịch của bạn được hoàn thành. Quá trình này có thể mất đến vài ngày làm việc phụ thuộc vào thời gian bạn hoàn thành thanh toán Konbini của bạn. Một khi việc chuyển tiền của bạn đã được xác nhận, bạn sẽ nhận được biên lai qua email xác nhận việc mua hàng của bạn.';
					}
				}
				else if ( method.value == 'credit_card_japan' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch thẻ tín dụng nội địa được ủy quyền qua trang Degica. Nhấp vào nút dưới đây để mở một cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới Degica';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng Domestic Credit Card (Nhật)';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang Degica bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới vài phút. Sau khi việc thanh toán đã được xác nhận, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'bank_transfer_japan' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch chuyển khoản ngân hàng được ủy quyền qua trang web Degica. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới và bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới Degica';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng Bank Transfer';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang Degica bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất vài ngày hành chính dựa vào thời điểm bạn hoàn thành thanh toán. Sau khi tiền gửi được xác thực, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'payeasy' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch Pay Easy được ủy quyền qua trang Degica. Nhấn vào nút dưới đây sẽ mở ra trang mới để bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới Degica';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng Pay Easy';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang Degica bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất vài ngày hành chính dựa vào thời điểm bạn hoàn thành thanh toán. Sau khi tiền gửi được xác thực, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'webmoney_japan' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch WebMoney được ủy quyền qua trang Degica. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới Degica';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng WebMoney';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang Degica bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới một vài phút. Sau khi việc thanh toán đã được xác nhận, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'webmoney_japan_steam_card' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch thẻ Steam trả trước được ủy quyền bởi WebMoney thông qua trang web Degica. Nhấn vào nút bên dưới để mở một cửa sổ trình duyệt mới để bắt đầu giao dịch.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới Degica';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng thẻ Steam trả trước';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang Degica bằng cách đăng nhập và hoàn thành giao dịch của bạn.<br/><br/>Quá trình này có thể mất nhiều phút. Sau khi thanh toán được xác nhận, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'bitcash' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch BitCash được ủy quyền qua trang Degica. Nhấp vào nút dưới đây để mở một cửa sổ trình duyệt mới và bắt đầu giao dịch.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới Degica';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng BitCash';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang Degica bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới một vài phút. Sau khi việc thanh toán đã được xác nhận, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'netcash' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch NetCash được ủy quyền thông qua trang Degica. Nhấp vào nút dưới đây để mở một cửa sổ trình duyệt mới và bắt đầu giao dịch.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới Degica';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng NetCash';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang Degica bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới một vài phút. Sau khi việc thanh toán đã được xác nhận, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'nanaco' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch Nanaco được ủy quyền thông qua trang Degica. Nhấp vào nút dưới đây để mở một cửa sổ trình duyệt mới và bắt đầu giao dịch.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới Degica';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng Nanaco';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang Degica bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới một vài phút. Sau khi việc thanh toán đã được xác nhận, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'zong' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch Zong phải được ủy quyền thông qua trang Payments Hub của Paypal. Nhấp vào nút dưới đây để mở trình duyệt và bắt đầu giao dịch.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới PayPal Payments Hub';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng Zong';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang PayPal Payments Hub bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới 5 phút. Sau khi chấp thuận thanh toán, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'culturevoucher' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch Culture Voucher phải được ủy quyền thông qua trang của Degica. Nhấp vào nút dưới đây để mở trình duyệt và bắt đầu giao dịch.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới Degica';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng Culture Voucher';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang Degica bằng cách nhập chi tiết tài khoản Cultureland.<br/><br/>Quá trình này có thể mất tới 60 giây. Sau khi chấp thuận thanh toán, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'happymoneyvoucher' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch Happymoney Voucher phải được ủy quyền thông qua trang Degica. Nhấp vào nút dưới đây để mở trình duyệt và bắt đầu giao dịch.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới Degica';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng Happymoney Voucher';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang Degica bằng cách nhập thông tin voucher của bạn.<br/><br/>Quá trình này có thể mất đến 60 giây. Sau khi chấp thuận thanh toán, bạn sẽ nhận được một hóa đơn qua email, xác nhận việc mua hàng.';
					}
				}
				else if ( method.value == 'toss' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch Toss được ủy quyền thông qua trang web Degica. Nhấn vào nút bên dưới để mở một trình duyệt mới để bắt đầu giao dịch.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới Degica';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng Toss';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang Degica bằng cách nhập các thông tin thanh toán của bạn.<br/><br/>Quá trình này có thể mất tới 60 giây. Sau khi chấp thuận thanh toán, bạn sẽ nhận được một hóa đơn qua email, xác nhận việc mua hàng.';
					}
				}
				else if ( method.value == 'payco' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Các giao dịch PAYCO được ủy quyền qua trang web Degica. Nhấp nút dưới đây để mở trình duyệt web mới và bắt đầu giao dịch.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới Degica';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Mẹo cho người dùng PAYCO';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất mua hàng qua trang web Degica bằng cách quét mã QR với ứng dụng PAYCO.<br/><br/>Quá trình này có thể mất tới 60 giây. Khi đã chấp nhận thanh toán, bạn sẽ nhận được biên lai qua email để xác nhận việc mua hàng.';
					}
				}
				else if ( method.value == 'mobile_wallet_japan' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Các giao dịch bằng ví di động được ủy quyền qua trang web Degica. Nhấp nút dưới đây để mở trình duyệt web mới và bắt đầu giao dịch.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới Degica';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Mẹo cho người dùng ví điện tử';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất mua hàng qua trang web Degica bằng cách nhập thông tin thanh toán của ví di động.<br/><br/>Quá trình này có thể mất tới 60 giây. Khi đã chấp nhận thanh toán, bạn sẽ nhận được biên lai qua email để xác nhận việc mua hàng.';
					}
				}
				else if ( method.value == 'eclubpoints' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch eClub Points được ủy quyền qua trang eClub Store. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới eClub Store';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng eClub Points';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang eClub Store bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới 5 phút. Sau khi chấp thuận thanh toán, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'pse' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch PSE được ủy quyền qua trang BoaCompra. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới BoaCompra';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng PSE';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang BoaCompra bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới 5 phút. Sau khi chấp thuận thanh toán, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'exito' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch Exito được ủy quyền qua trang BoaCompra. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới BoaCompra';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng Exito';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang BoaCompra bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới 5 phút. Sau khi chấp thuận thanh toán, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'efecty' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch Efecty được ủy quyền qua trang BoaCompra. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới BoaCompra';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng Efecty';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hãy nhớ lưu hoặc in phiếu thanh toán từ trang Boacompra khi bạn hoàn thành giao dịch. Một email sẽ được gửi từ BoaCompra với một đường dẫn tới bản in của phiếu thanh toán.<br/><br/>Bạn sẽ cần nạp tiền cho phiếu thanh toán này trước khi giao dịch có thể hoàn thành. Quy trình này có thể mất vài ngày hành chính tùy thuộc vào thời điểm bạn hoàn thành thanh toán. Một khi tiền gửi được xác thực bởi ngân hàng của bạn, bạn sẽ nhận được hóa đơn email xác thực việc mua hàng của bạn.';
					}
				}
				else if ( method.value == 'baloto' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch Baloto được ủy quyền qua trang BoaCompra. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới BoaCompra';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng Baloto';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hãy nhớ lưu hoặc in Baloto từ trang Boacompra khi bạn hoàn thành giao dịch. Một email sẽ được gửi từ BoaCompra với một đường dẫn tới bản in của Baloto.<br/><br/>Bạn sẽ cần nạp tiền cho phiếu thanh toán này trước khi giao dịch có thể hoàn thành. Quy trình này có thể mất vài ngày hành chính tùy thuộc vào thời điểm bạn hoàn thành thanh toán. Một khi tiền gửi được xác thực bởi ngân hàng của bạn, bạn sẽ nhận được hóa đơn email xác thực việc mua hàng của bạn.';
					}
				}
				else if ( method.value == 'pinvalidda' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch PinValidda được ủy quyền qua trang BoaCompra. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới BoaCompra';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng payvalidda';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang BoaCompra bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới 5 phút. Sau khi chấp thuận thanh toán, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'mangirkart' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch MangirKart được ủy quyền qua trang BoaCompra. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới BoaCompra';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng MangirKart';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang BoaCompra bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới 15 phút. Sau khi chấp thuận thanh toán, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'bancocreditodeperu' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch Banco Credito de Peru được ủy quyền qua trang BoaCompra. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới BoaCompra';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng Banco Credito de Peru';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang BoaCompra bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới 5 phút. Sau khi chấp thuận thanh toán, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'bbvacontinental' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch BBVA Continental được ủy quyền qua trang BoaCompra. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới BoaCompra';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng BBVA Continental';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang BoaCompra bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới 5 phút. Sau khi chấp thuận thanh toán, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'safetypay' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch SafetyPay được ủy quyền qua trang BoaCompra. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới BoaCompra';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng SafetyPay';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang BoaCompra bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới 5 phút. Sau khi chấp thuận thanh toán, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'pagoefectivo' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch PagoEfectivo được ủy quyền qua trang BoaCompra. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới BoaCompra';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng PagoEfectivo';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hãy nhớ lưu hoặc in phiếu thanh toán từ trang Boacompra khi bạn hoàn thành giao dịch. Một email sẽ được gửi từ BoaCompra với một đường dẫn tới bản in của phiếu thanh toán.<br/><br/>Bạn sẽ cần nạp tiền cho phiếu thanh toán này trước khi giao dịch có thể hoàn thành. Quy trình này có thể mất vài ngày hành chính tùy thuộc vào thời điểm bạn hoàn thành thanh toán. Một khi tiền gửi được xác thực bởi ngân hàng của bạn, bạn sẽ nhận được hóa đơn email xác thực việc mua hàng của bạn.';
					}
				}
				else if ( method.value == 'trustly' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch Trustly được ủy quyền qua trang Smart2Pay. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới Smart2Pay';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng Trustly';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang Smart2Pay bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới một vài phút. Sau khi việc thanh toán được xác nhận, bạn sẽ nhận email hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'bitcoin' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch Bitcoin được uỷ quyền qua trang web BitPay. Bấm nút bên dưới để mở trang web mới để bắt đầu phiên giao dịch.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới BitPay';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng Bitcoin';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hãy chắc chắn rằng bạn xác nhận giao dịch trên BitPay. Sau khi hoàn tất thanh toán, hãy bấm nút "Tiếp tục tới Valve" để tiếp tục giao dịch.<br/><br/> Quá trình có thể kéo dài tới 60 giây. Để giao dịch tránh bị thất bại, vui lòng không nhấn nút back hoặc đóng trang bitpay truớc khi quá trình hoàn tất.';
					}
				}
				else if ( method.value == 'nodwin_cod' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao tiền mặt khi nhận hàng được tiến hành thông qua trang Novaplay. Nhấp vào nút dưới đây để mở một cửa sổ trình duyệt mới và bắt đầu giao dịch.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới Novaplay';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng Novaplay';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Bắt đầu thanh toán của bạn qua trang Novaplay bằng cách đăng nhập vào và hoàn thành phiếu thanh toán sau.<br/><br/>Một khi bạn đã hoàn thành bước đó, một đại diện từ Novaplay sẽ đi theo cùng bạn để hoàn thành việc mua hàng.';
					}
				}
				else if ( method.value == 'credit_card_india' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch thẻ tín dụng nội địa được tiến hành thông qua trang Novaplay. Nhấp vào nút dưới đây để mở một cửa sổ trình duyệt mới và bắt đầu giao dịch. Quá trình này có thể mất tới 5 phút để hoàn thành.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới Novaplay';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng Novaplay';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang Novaplay bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới 5 phút. Sau khi chấp thuận thanh toán, bạn sẽ được email một hóa đơn xác thực việc mua hàng.<br/><br/>Với các thắc mắc về trạng thái xử lý thanh toán, vui lòng liên hệ <a href="http://steamsupport.novaplay.in">NovaPlay</a>.';
					}
				}
				else if ( method.value == 'debit_card_india' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch thẻ ghi nợ được tiến hành thông qua trang Novaplay. Nhấp vào nút dưới đây để mở một cửa sổ trình duyệt mới và bắt đầu giao dịch. Quá trình này có thể mất tới 5 phút để hoàn thành.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới Novaplay';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng Novaplay';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang Novaplay bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới 5 phút. Sau khi chấp thuận thanh toán, bạn sẽ được email một hóa đơn xác thực việc mua hàng.<br/><br/>Với các thắc mắc về trạng thái xử lý thanh toán, vui lòng liên hệ <a href="http://steamsupport.novaplay.in">NovaPlay</a>.';
					}
				}
				else if ( method.value == 'net_banking_india' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch ngân hàng trực tuyến được tiến hành thông qua trang Novaplay. Nhấp vào nút dưới đây để mở một cửa sổ trình duyệt mới và bắt đầu giao dịch. Quá trình này có thể mất tới 5 phút để hoàn thành.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới Novaplay';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng Novaplay';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang Novaplay bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới 5 phút. Sau khi chấp thuận thanh toán, bạn sẽ được email một hóa đơn xác thực việc mua hàng.<br/><br/>Với các thắc mắc về trạng thái xử lý thanh toán, vui lòng liên hệ <a href="http://steamsupport.novaplay.in">NovaPlay</a>.';
					}
				}
				else if ( method.value == 'cash_card_india' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch Thẻ tiền mặt được tiến hành thông qua trang Novaplay. Nhấp vào nút dưới đây để mở một cửa sổ trình duyệt mới và bắt đầu giao dịch. Quá trình này có thể mất tới 5 phút để hoàn thành.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới Novaplay';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng Novaplay';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang Novaplay bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới 5 phút. Sau khi chấp thuận thanh toán, bạn sẽ được email một hóa đơn xác thực việc mua hàng.<br/><br/>Với các thắc mắc về trạng thái xử lý thanh toán, vui lòng liên hệ <a href="http://steamsupport.novaplay.in">NovaPlay</a>.';
					}
				}
				else if ( method.value == 'wallet_india' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch Ví trả trước được tiến hành thông qua trang Novaplay. Nhấp vào nút dưới đây để mở một cửa sổ trình duyệt mới và bắt đầu giao dịch. Quá trình này có thể mất tới 5 phút để hoàn thành.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới Novaplay';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng Novaplay';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang Novaplay bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới 5 phút. Sau khi chấp thuận thanh toán, bạn sẽ được email một hóa đơn xác thực việc mua hàng.<br/><br/>Với các thắc mắc về trạng thái xử lý thanh toán, vui lòng liên hệ <a href="http://steamsupport.novaplay.in">NovaPlay</a>.';
					}
				}
				else if ( method.value == 'korean_mobile' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch thanh toán di động được ủy quyền qua trang Degica. Nhấp vào nút dưới đây để mở trình duyệt và bắt đầu giao dịch.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới Degica';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng thanh toán điện thoại (Degica)';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang Degica bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới một vài phút. Sau khi việc thanh toán đã được xác nhận, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'naranja' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch Naranja được ủy quyền qua trang BoaCompra. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới BoaCompra';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng Naranja';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang BoaCompra bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới một vài phút. Sau khi việc thanh toán đã được xác nhận, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'cencosud' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch Cencosud được ủy quyền qua trang BoaCompra. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới BoaCompra';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng Cencosud';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang BoaCompra bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới một vài phút. Sau khi việc thanh toán đã được xác nhận, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'cabal' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch Cabal được ủy quyền qua trang BoaCompra. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới BoaCompra';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng Cabal';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang BoaCompra bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới một vài phút. Sau khi việc thanh toán đã được xác nhận, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'pagofacil' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch PagoFacil được ủy quyền qua trang Smart2Pay. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới Smart2Pay';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng PagoFacil';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang Smart2Pay bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới một vài phút. Sau khi việc thanh toán đã được xác nhận, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'rapipago' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch Rapipago được ủy quyền qua trang Smart2Pay. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới Smart2Pay';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng Rapipago';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang Smart2Pay bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới một vài phút. Sau khi việc thanh toán đã được xác nhận, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'banconacionaldecostarica' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch Banco Nacional de Costa Rica được ủy quyền qua trang BoaCompra. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới BoaCompra';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng Banco Nacional de Costa Rica';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang BoaCompra bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới một vài phút. Sau khi việc thanh toán đã được xác nhận, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'bancopoplar' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch Banco Poplar được ủy quyền qua trang BoaCompra. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới BoaCompra';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng Banco Poplar';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang BoaCompra bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới một vài phút. Sau khi việc thanh toán đã được xác nhận, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'redpagos' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch RedPagos được ủy quyền qua trang Smart2Pay. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới Smart2Pay';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng RedPagos';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang Smart2Pay bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới một vài phút. Sau khi việc thanh toán đã được xác nhận, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'spe' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch SPE được ủy quyền qua trang BoaCompra. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới BoaCompra';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng SPE';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang BoaCompra bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới một vài phút. Sau khi việc thanh toán đã được xác nhận, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'multicaja' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch Multicaja được ủy quyền qua trang BoaCompra. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới BoaCompra';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng Multicaja';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang BoaCompra bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới một vài phút. Sau khi việc thanh toán đã được xác nhận, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'redcompra' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch RedCompra được ủy quyền qua trang BoaCompra. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới BoaCompra';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng RedCompra';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang BoaCompra bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới một vài phút. Sau khi việc thanh toán đã được xác nhận, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'ziraatbank' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch ZiraatBank được ủy quyền qua trang BoaCompra. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới BoaCompra';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng ZiraatBank';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang BoaCompra bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới một vài phút. Sau khi việc thanh toán đã được xác nhận, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'vakiflarbank' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch VakiflarBank được ủy quyền qua trang BoaCompra. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới BoaCompra';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng VakiflarBank';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang BoaCompra bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới một vài phút. Sau khi việc thanh toán đã được xác nhận, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'kuveytturkbank' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch KuveytTurkBank được ủy quyền qua trang BoaCompra. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới BoaCompra';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng KuveytTurkBank';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang BoaCompra bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới một vài phút. Sau khi việc thanh toán đã được xác nhận, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'ekonomibank' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch EkonomiBank được ủy quyền qua trang BoaCompra. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới BoaCompra';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng EkonomiBank';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang BoaCompra bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới một vài phút. Sau khi việc thanh toán đã được xác nhận, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'pichincha' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch Pichincha được ủy quyền qua trang BoaCompra. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới BoaCompra';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng Pichincha';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang BoaCompra bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới một vài phút. Sau khi việc thanh toán đã được xác nhận, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'pichinchacash' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch PichinchaCash được ủy quyền qua trang BoaCompra. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới BoaCompra';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng PichinchaCash';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang BoaCompra bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới một vài phút. Sau khi việc thanh toán đã được xác nhận, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'przelewy24' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch Przelewy24 được ủy quyền qua trang Smart2Pay. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới Smart2Pay';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng Przelewy24';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang Smart2Pay bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới một vài phút. Sau khi việc thanh toán đã được xác nhận, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'trustpay' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch Trustpay được ủy quyền qua trang Smart2Pay. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới Smart2Pay';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng Trustpay';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang Smart2Pay bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới một vài phút. Sau khi việc thanh toán đã được xác nhận, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'poli' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch POLi được ủy quyền qua trang Smart2Pay. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới Smart2Pay';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng POLi';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang Smart2Pay bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới một vài phút. Sau khi việc thanh toán đã được xác nhận, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'mercadopago' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch MercadoPago được ủy quyền qua trang Smart2Pay. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới Smart2Pay';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng MercadoPago';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang Smart2Pay bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới một vài phút. Sau khi việc thanh toán đã được xác nhận, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'payu' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch PayU được ủy quyền qua trang Smart2Pay. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới Smart2Pay';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng PayU';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang Smart2Pay bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới một vài phút. Sau khi việc thanh toán đã được xác nhận, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'vtcpaywallet' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch ví điện tử VTC Pay được ủy quyền qua trang Smart2Pay. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới Smart2Pay';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng ví điện tử VTC Pay';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang Smart2Pay bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới một vài phút. Sau khi việc thanh toán đã được xác nhận, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'vtcpaycards' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch thẻ nội địa được ủy quyền qua trang Smart2Pay. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới Smart2Pay';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng thẻ tín dụng nội địa';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang Smart2Pay bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới một vài phút. Sau khi việc thanh toán đã được xác nhận, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'vtcpayonlinebanking' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch ngân hàng trực tuyến (online banking) được ủy quyền qua trang Smart2Pay. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới Smart2Pay';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng ngân hàng trực tuyến';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang Smart2Pay bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới một vài phút. Sau khi việc thanh toán đã được xác nhận, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'mrcash' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch MrCash được ủy quyền qua trang Smart2Pay. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới Smart2Pay';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng MrCash';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang Smart2Pay bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới một vài phút. Sau khi việc thanh toán đã được xác nhận, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'eps' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch EPS được ủy quyền qua trang Smart2Pay. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới Smart2Pay';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng EPS';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang Smart2Pay bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới một vài phút. Sau khi việc thanh toán đã được xác nhận, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'interac' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch Interac được ủy quyền qua trang Smart2Pay. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới Smart2Pay';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng Interac';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang Smart2Pay bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới một vài phút. Sau khi việc thanh toán đã được xác nhận, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'santanderrio' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch Santander Rio được ủy quyền qua trang Smart2Pay. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới Smart2Pay';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng Santander Rio';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang Smart2Pay bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới một vài phút. Sau khi việc thanh toán đã được xác nhận, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'cafefunded' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch trực tiếp này sẽ được duyệt bởi %1$s. Nhấp vào nút để mở cửa sổ mới và bắt đầu tiến hành giao dịch.'.replace( '$1%s', sSiteName );
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục giao dịch';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho giao dịch trực tiếp';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Sau khi đã thanh toán xong với thu ngân, bạn sẽ nhận được một email xác nhận đơn mua hàng của mình.';
					}
				}
				else if ( method.value == 'boletoflash' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch Boleto Flash được ủy quyền qua trang BoaCompra. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới và bắt đầu giao dịch.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới BoaCompra';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng Boleto Flash';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hãy nhớ lưu hoặc in Boleto từ trang web của bên xử lý thanh toán khi hoàn thành giao dịch. Một email sẽ được gửi tới bạn với đường dẫn để in Boleto.<br/><br/>Bạn cần phải thêm tiền cho hóa đơn này trước khi giao dịch hoàn thành. Quy trình này có thể mất từ vài giờ tới vài ngày hành chính tùy thuộc thời điểm bạn hoàn thành thanh toán Boleto. Một khi việc thêm tiền đã được xác thực bởi ngân hàng, bạn sẽ nhận một email hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'pix' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch Pix được ủy quyền qua trang BoaCompra. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới và bắt đầu giao dịch.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới BoaCompra';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng Pix';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang BoaCompra bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới một vài phút. Sau khi thanh toán đã được xác nhận, bạn sẽ nhận một email hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'gcash' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch GCash được ủy quyền qua trang Smart2Pay. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới Smart2Pay';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng GCash';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang Smart2Pay bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới một vài phút. Sau khi việc thanh toán đã được xác nhận, bạn sẽ được email hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'kakaopay' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch KakaoPay được ủy quyền thông qua trang Smart2Pay. Nhấp vào nút dưới đây để mở một cửa sổ trình duyệt mới và bắt đầu giao dịch.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới Smart2Pay';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng KakaoPay';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang Smart2Pay bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới một vài phút. Sau khi việc thanh toán đã được xác nhận, bạn sẽ được email hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'dana' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch DANA được ủy quyền qua trang Smart2Pay. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới Smart2Pay';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng DANA';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang Smart2Pay bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới một vài phút. Sau khi việc thanh toán được xác nhận, bạn sẽ nhận email hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'truemoney' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch TrueMoney được ủy quyền qua trang Smart2Pay. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới Smart2Pay';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng TrueMoney';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang Smart2Pay bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới một vài phút. Sau khi việc thanh toán đã được xác nhận, bạn sẽ được email hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'touchngo' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch Touch \'n Go được ủy quyền thông qua trang Smart2Pay. Nhấp vào nút dưới đây để mở một cửa sổ trình duyệt mới và bắt đầu giao dịch.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới Smart2Pay';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng Touch \'n Go';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang Smart2Pay bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới một vài phút. Sau khi việc thanh toán đã được xác nhận, bạn sẽ được email hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'linepay' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch LINE Pay được ủy quyền thông qua trang Degica. Nhấp vào nút dưới đây để mở một cửa sổ trình duyệt mới và bắt đầu giao dịch.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới Degica';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng LINE Pay';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang Degica bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới một vài phút. Sau khi việc thanh toán đã được xác nhận, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'merpay' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch Merpay được ủy quyền thông qua trang Degica. Nhấp vào nút dưới đây để mở một cửa sổ trình duyệt mới và bắt đầu giao dịch.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới Degica';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng Merpay';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang Degica bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới một vài phút. Sau khi việc thanh toán đã được xác nhận, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'paypay' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch PayPay được ủy quyền qua trang Degica. Nhấn vào nút dưới đây sẽ mở ra trang mới để bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới Degica';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng PayPay';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang Degica bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới một vài phút. Sau khi việc thanh toán đã được xác nhận, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'alfaclick' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch Alfa-Click được ủy quyền qua trang ECommPay. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới ECommPay';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng Alfa-Click';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang ECommPay bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới một vài phút. Sau khi thanh toán đã được xác nhận, bạn sẽ nhận một email hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'sberbank' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch SberBank được ủy quyền qua trang ECommPay. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới ECommPay';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng SberBank';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang ECommPay bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới một vài phút. Sau khi thanh toán đã được xác nhận, bạn sẽ nhận một email hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'yoomoney' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch YooMoney được ủy quyền qua trang ECommPay. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới ECommPay';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng YooMoney';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang ECommPay bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới một vài phút. Sau khi thanh toán đã được xác nhận, bạn sẽ nhận một email hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'tinkoff' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch Tinkoff được ủy quyền qua trang ECommPay. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới ECommPay';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng Tinkoff ';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang ECommPay bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới một vài phút. Sau khi thanh toán đã được xác nhận, bạn sẽ nhận một email hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'cashincis' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Các giao dịch CASH được ủy quyền thông qua trang ECommPay. Nhấp vào nút bên dưới để mở một trình duyệt mới và tiến hành giao dịch.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới ECommPay';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng CASH';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang ECommPay bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới một tiếng kể từ lúc bạn hoàn tất việc nộp tiền. Khi thanh toán đã được xác nhận, bạn sẽ nhận một email hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'aupay' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch au PAY được ủy quyền qua trang Degica.  Nhấn vào nút dưới đây sẽ mở ra trang mới để bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới Degica';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng au PAY';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang Degica bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới một vài phút. Sau khi việc thanh toán đã được xác nhận, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'alipayhk' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch AliPayHK được ủy quyền thông qua trang web AliPayHK. Nhấn vào nút bên dưới để mở một trình duyệt web mới để bắt đầu giao dịch.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới AliPayHK';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng AliPayHK';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hãy chắc chắn rằng bạn xác nhận giao dịch trên AliPayHK. Nếu bạn không quay trở lại Steam sau 10 giây, vui lòng chọn mục "Return To Merchant" và cho phép giao dịch được tiếp tục.<br/><br/>Quá trình này có thể mất đến 60 giây. Để tránh giao dịch bị thất bại, vui lòng không nhấn nút back hoặc đóng trang AliPayHK trước khi quá trình hoàn tất.';
					}
				}
				else if ( method.value == 'naverpay' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch NaverPay được ủy quyền qua trang Degica. Nhấn vào nút dưới đây sẽ mở ra trang mới để bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới Degica';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng NaverPay';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang Degica bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới một vài phút. Sau khi việc thanh toán đã được xác nhận, bạn sẽ được email một hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'linkaja' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch Linkaja được ủy quyền qua trang Smart2Pay. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới Smart2Pay';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng Linkaja';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang Smart2Pay bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới một vài phút. Sau khi việc thanh toán được xác nhận, bạn sẽ nhận email hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'shopeepay' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch ShopeePay được ủy quyền thông qua trang Smart2Pay. Nhấp vào nút dưới đây để mở một cửa sổ trình duyệt mới và bắt đầu giao dịch.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới Smart2Pay';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng ShopeePay';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang Smart2Pay bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới một vài phút. Sau khi việc thanh toán được xác nhận, bạn sẽ nhận email hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'grabpay' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch GrabPay được ủy quyền thông qua trang Smart2Pay. Nhấp vào nút dưới đây để mở một cửa sổ trình duyệt mới và bắt đầu giao dịch.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới Smart2Pay';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng GrabPay';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang Smart2Pay bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới một vài phút. Sau khi việc thanh toán được xác nhận, bạn sẽ nhận email hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'paynow' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch PayNow được ủy quyền qua trang Smart2Pay. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới Smart2Pay';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng PayNow';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang Smart2Pay bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới một vài phút. Sau khi việc thanh toán được xác nhận, bạn sẽ nhận email hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'onlinebankingthailand' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch ngân hàng trực tuyến (online banking) được ủy quyền qua trang Smart2Pay. Nhấp vào nút dưới đây để mở một ô cửa sổ trình duyệt mới nhằm bắt đầu chuyển khoản.';
					$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới Smart2Pay';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng ngân hàng trực tuyến';
						$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang Smart2Pay bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới một vài phút. Sau khi việc thanh toán được xác nhận, bạn sẽ nhận email hóa đơn xác thực việc mua hàng.';
					}
				}
				else if ( method.value == 'cashmethodsthailand' )
				{
					$('purchase_bottom_note_paypalgc').innerHTML = '#cashmethodsthailand_authorization_explanation';
					$('purchase_button_bottom_text').innerHTML = '#cashmethodsthailand_authorization_btn';
					if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
					{
						$('col_right_review_payment_tips_header_text').innerHTML = '#cashmethodsthailand_payment_tips_header';
						$('col_right_review_payment_tips_info_text').innerHTML = '#cashmethodsthailand_payment_tips_text';
					}
				}
				else if ( method.value == 'blik' )
					{
						$('purchase_bottom_note_paypalgc').innerHTML = 'Giao dịch Blik được ủy quyền qua trang Smart2Pay. Nhấp vào nút dưới đây để mở một cửa sổ trình duyệt mới và bắt đầu chuyển khoản.';
						$('purchase_button_bottom_text').innerHTML = 'Tiếp tục tới Smart2Pay';
						if ( $('col_right_review_payment_tips_header_text') && $('col_right_review_payment_tips_info_text') )
						{
							$('col_right_review_payment_tips_header_text').innerHTML = 'Lời khuyên cho khách hàng dùng Blik';
							$('col_right_review_payment_tips_info_text').innerHTML = 'Hoàn tất đơn hàng thông qua trang Smart2Pay bằng cách đăng nhập và hoàn thành giao dịch.<br/><br/>Quá trình này có thể mất tới một vài phút. Sau khi việc thanh toán được xác nhận, bạn sẽ nhận email hóa đơn xác thực việc mua hàng.';
						}
					}
			}
			else
			{
				OnGetFinalPriceFailure( 0 );
				return;
			}
		}
		else
		{
			if ( $('col_right_review_payment_tips') )
			{
				$J('#col_right_review_payment_tips').hide();
			}

			$('purchase_button_bottom').href = "javascript:FinalizeTransaction();";
			$J('#purchase_bottom_note_paypalgc').hide();
			$('purchase_top').hide();
			$('purchase_button_bottom_text').innerHTML = 'Mua';
		}

				$J('#purchase_button_bottom').show();
		$J('#purchase_button_disabled_bottom').hide();
		$J('#purchase_button_inprogress_bottom').hide();
		$J('#change_payment_method_button_bottom').hide();
		$J('#cancel_button_bottom').hide();

				if ( BIsStoredCreditCard() )
			SetTabEnabled( 'payment_info', false );

				if ( g_bIsUpdateBillingInfoForm )
		{
			if ( $('is_external_finalize_transaction').value == 1 )
			{
								ReportCheckoutJSError( 'Update payment page is not implemented for this payment method ' + $('payment_method').value );
			}
			else
			{
				FinalizeTransaction();
			}
		}
		else
		{
												SetTabEnabled( 'review' );
		}
	}
	catch(e)
	{
		ReportCheckoutJSError( 'Failed handling GetFinalPrice success', e );
	}
}


function OnGetFinalPriceFailure( eErrorDetail )
{
	try
	{
		SetTabEnabled( 'payment_info' );
		var error_text = 'Một lỗi không ngờ đã xảy ra. Việc mua hàng của bạn chưa hoàn thành.<br>Vui lòng chờ vài phút rồi thử lại.<br>Nếu bạn vẫn gặp phải vấn đề này, hãy liên hệ <a href="http://support.steampowered.com">đội hỗ trợ Steam</a>.';
		switch ( eErrorDetail )
		{
			default:
				error_text = 'Một lỗi không ngờ đã xảy ra. Việc mua hàng của bạn chưa hoàn thành.<br>Vui lòng chờ vài phút rồi thử lại.<br>Nếu bạn vẫn gặp phải vấn đề này, hãy liên hệ <a href="http://support.steampowered.com">đội hỗ trợ Steam</a>.';
				break;
			case 23:
				error_text = 'Địa chỉ thanh toán của bạn không giống với địa chỉ quốc gia hiện tại của bạn. Xin vui lòng liên hệ hỗ trợ để nhận giúp đỡ hoặc sử dụng một hình thức thanh toán được đăng ký với địa chỉ hiện tại của bạn.';
				break;
			case 51:
				var method = $('payment_method');
				switch (method.value)
				{
					case 'sofort':
						error_text = 'Việc mua hàng này không thành công bởi vì lượng tiền tối thiểu phải trả qua Sofort là 0,10 EUR. Xin vui lòng chọn hình thức thanh toán khác cho việc mua hàng của bạn và thử lại sau.';
						break;

					case 'beeline':
						error_text = 'Việc mua hàng này không thành công bởi vì lượng tiền tối thiểu phải trả qua thiết bị di đông là 0,10 EUR. Xin vui lòng chọn hình thức thanh toán khác cho việc mua hàng của bạn và thử lại sau.';
						break;

					case 'nodwin_cod':
					error_text = 'Việc mua hàng này không thể hoàn thành do số tiền cho thanh toán tiền mặt khi nhận hàng phải đạt ít nhất 500 INR. Vui lòng chọn hình thức thanh toán khác để thanh toán và thử lại.';
					break;

					default:
						error_text = 'Việc mua hàng này không thành công bởi vì lượng tiền này không được cho phép bởi hình thức thanh toán này. Xin vui lòng chọn hình thức thanh toán khác cho việc mua hàng của bạn và thử lại sau.';
						break;
				}
				break;
			case 1:
				error_text = 'Thông tin thanh toán của bạn đã không đậu quá trình xác thực địa chỉ. Xin vui lòng sửa lỗi sai hoặc liên hệ đội hỗ trợ để nhận giúp đỡ.';
				break;
			case 56:
				error_text = 'Nào tay tiêu tiền, cứ từ từ mà làm! Giỏ mua sắm của bạn đã vượt giới hạn số lượng giao dịch cho phép của chúng tôi. Hãy <a href=\'https://store.steampowered.com/cart\'>chỉnh lại đồ trong giỏ của bạn</a> rồi thử lại.';
				break;
			case 17:
				var method = $('payment_method');
				if ( method.value == 'giropay' )
				{
					error_text = 'Việc mua hàng này không thành công bởi vì ngân hàng của bạn không hỗ trợ hệ thống mạng GiroPay. Xin vui lòng chọn hình thức thanh toán khác cho việc mua hàng của bạn và thử lại sau.';
				}
				break;
		}

				UpdatePaymentInfoForm();
		DisplayErrorMessage( error_text );
	}
	catch(e)
	{
		ReportCheckoutJSError( 'Failed hadnling GetFinalPrice failure', e );
	}
}


function SubmitSSA()
{
	try
	{
				var errorString = '';

				var rgBadFields = {
			ssa_body: false
		}

		var ssa_check = $('i_agree');
		if ( !ssa_check.checked )
		{
			errorString += "Bạn phải đồng ý với Thỏa thuận người đăng ký Steam để tiếp tục.<br/>";
			rgBadFields.ssa_body = true;
		}

				for ( var key in rgBadFields )
		{
			if ( rgBadFields[key] )
				ValidationMarkFieldBad( key );
			else
				ValidationMarkFieldOk( key );
		}

				if ( errorString != '' )
		{
			DisplayErrorMessage( errorString );
		}
		else
		{
						document.forms['ssa'].submit();
		}
	}
	catch(e)
	{
		ReportCheckoutJSError( 'Failed submitting SSA agreement', e );
	}
}


function IsRadioButtonChecked( objId )
{
	return $(objId).checked;
}
function CheckFriendDisplay()
{
	try
	{
		if ( $('send_via_email') )
		{
			if ( IsRadioButtonChecked( 'send_via_email' ) )
			{
				$( 'email_input' ).disabled = false;
			}
			else
			{
				$( 'email_input' ).disabled = true;
				$( 'email_input' ).value = '';
			}
		}
	}
	catch(e)
	{
		ReportCheckoutJSError( 'Failed handling CheckFriendDisplay', e );
	}
}


function SelectGiftRecipient( id, name )
{
	try
	{
		if ( $( currently_selected_friend_block ) )
		{
			$( currently_selected_friend_block ).removeClassName( 'active' );
		}
		if ( $( 'friend_block_'+id ) )
			$( 'friend_block_'+id ).addClassName( 'active' );

		currently_selected_friend_block = 'friend_block_'+id;
		currently_selected_friend_id = id;
		currently_selected_friend_name = name;
	}
	catch( e )
	{
		ReportCheckoutJSError( 'Failed selecting gift recipient', e );
	}
}

function SubmitGiftDeliveryForm()
{
		var errorString = '';

		var rgBadFields = {
		email_input : false,
		friends_chooser : false,
		schedule_send_time : false
	};

	try
	{

		if ( $J('#cart_send_schedule_options').hasClass( 'schedule_selected' ) && $J('.cart_send_choice.selected').hasClass('supports_schedule_send') )
		{
			var $ScheduleSendElement = $J('#cart_send_schedule_options').find( 'select, input' );
			var $TimeElement = $ScheduleSendElement.filter( '#schedule_send_time' );
			var b24hTime = ( $ScheduleSendElement.filter('#schedule_send_ampm').length == 0 );
			var rgTimeParse = $TimeElement.val().match( /([0-2]?[0-9]) *(?::|h) *([0-5][0-9])/ );
			if ( !rgTimeParse || rgTimeParse[1] > 23 ||
				( !b24hTime && ( rgTimeParse[1] > 12 || rgTimeParse[1] < 1 ) ) )
			{
				rgBadFields.schedule_send_time = true;
				errorString += 'Thời gian ngày định ra không hợp lệ.<br/>';
			}
			else
			{
				var rtTime = GatherScheduledSendFields();

				if ( rtTime && rtTime <= $J.now() / 1000 )
				{
					ShowConfirmDialog( 'Lên lịch chuyển quà...',
								'Thời gian bạn chọn gửi quà nằm trong quá khứ. Có phải bạn muốn gửi quà của mình đi ngay tức thì không?',
								'Gửi ngay'
					).done( function() {
						if ( $J('#reschedule_send_now').length )
						{
							$J('#reschedule_send_now').prop('checked', true ).change();
							SubmitGiftDeliveryForm();
						}
						else
						{
							$J('#cart_send_schedule_options').removeClass( 'schedule_selected' );
							SubmitGiftDeliveryForm();
						}
					});
					return;

				}
			}
		}


		if ( $( 'send_via_email' ) && $( 'send_via_email' ).checked )
		{
			var email = $('email_input').value;
			var email_regex = /^(("[\w-\s]+")|([\w-]+(?:\.[\w-]+)*)|("[\w-\s]+")([\w-]+(?:\.[\w-]+)*))(@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][0-9]\.|1[0-9]{2}\.|[0-9]{1,2}\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\]?$)/i
			if ( email == '' || !email_regex.test(email) )
			{
				errorString += 'Vui lòng nhập một địa chỉ email hợp lệ để cung cấp những món quà của bạn qua email.<br/>';
				rgBadFields.email_input = true;
			}
		}
		else if ( $('send_self') && $('send_self').checked )
		{
			// nothing to validate
		}
		else if ( $('unsend_gift') && $('unsend_gift').checked )
		{
			// nothing to validate
		}
		else if ( $('send_accountid' ) && $('send_accountid').checked )
		{
			if ( $('internal_giftee_accountid').value == '' )
			{
				errorString += 'Hãy chọn một người bạn để cung cấp quà tặng của bạn trực tiếp thông qua Steam.<br/>';
				rgBadFields.internal_giftee_accountid = true;
			}
			else
				rgBadFields.internal_giftee_accountid = false;
		}
		else if ( $J('#reschedule_send_scheduled').is(':checked') || $J('#reschedule_send_now').is(':checked') )
		{
			// nothing to validate (date was validated above)
		}
		else if ( $J('#reschedule_send_cancel').is(':checked') )
		{
			ConfirmRescheduleCancel();
			return;
		}
		else
		{
			var bIsSomethingChecked = false;
			var rgRadios = Form.getInputs( 'gift_recipient_form', 'radio', 'friend_radio' );
			for( var i = 0; i < rgRadios.length; ++i )
			{
				if( rgRadios[i].checked )
					bIsSomethingChecked = true;
			}
			if ( !bIsSomethingChecked )
			{
				errorString += 'Hãy chọn một người bạn để cung cấp quà tặng của bạn trực tiếp thông qua Steam.<br/>';
				rgBadFields.friends_chooser = true;
			}
		}
	}
	catch( e )
	{
		ReportCheckoutJSError( 'Failed validating gift delivery form', e );
	}


	try
	{
				for ( var key in rgBadFields )
		{
			if ( rgBadFields[key] )
				ValidationMarkFieldBad( key );
			else
				ValidationMarkFieldOk( key );
		}

				if ( errorString != '' )
		{
			DisplayErrorMessage( errorString );
		}
		else
		{
						$('error_display').innerHTML = '';
			$J('#error_display').hide();

			if ( g_bIsSendGiftForm )
			{
				if ( $('unsend_gift') && $('unsend_gift').checked )
				{
					UnsendGift();
					return;
				}
				else
				{
					UpdateWillBeSentToNote();
				}
			}

						if ( $('send_self') && $('send_self').checked )
			{
				ProceedToPaymentInfoTab();
			}
			else
			{
				SetTabEnabled( 'gift_note' );
			}
		}
	}
	catch(e)
	{
		ReportCheckoutJSError( 'Failed showing errors or submitting gift delivery form', e );
	}
}

function SubmitGiftNoteForm()
{
		var errorString = '';

		var rgBadFields = {
		gift_recipient_name : false,
		gift_message_text : false,
		gift_sentiment_trigger : false,
		gift_signature : false
	};

	try
	{
		var recipient_name = $('gift_recipient_name').value;
		if ( recipient_name.length < 1 )
		{
			errorString += 'Vui lòng nhập tên đầu tiên của người nhận.<br/>';
			rgBadFields.gift_recipient_name = true;
		}

		var gift_message_text = $('gift_message_text').value;
		if ( gift_message_text.length < 1 )
		{
			errorString += 'Vui lòng nhập một tin nhắn đến người nhận quà.<br/>';
			rgBadFields.gift_message_text = true;
		}

		var gift_signature = $('gift_signature').value;
		if ( gift_signature.length < 1 )
		{
			errorString += 'Vui lòng nhập chữ ký cho món quà của bạn.<br/>';
			rgBadFields.gift_signature = true;
		}


				for ( var key in rgBadFields )
		{
			if ( rgBadFields[key] )
				ValidationMarkFieldBad( key );
			else
				ValidationMarkFieldOk( key );
		}
	}
	catch( e )
	{
		ReportCheckoutJSError( 'Failed validating gift message form', e );
	}

	try
	{
				if ( errorString != '' )
		{
			DisplayErrorMessage( errorString );
		}
		else
		{
						$('error_display').innerHTML = '';
			$J('#error_display').hide();

						if ( g_bIsSendGiftForm )
			{
				SendGift();
				AnimateSubmitGiftNoteButton();
			}
			else
			{
				ProceedToPaymentInfoTab();
			}
		}
	}
	catch(e)
	{
		ReportCheckoutJSError( 'Failed showing errors or submitting gift delivery form', e );
	}
}

function ProceedToPaymentInfoTab()
{
	if ( BIsStoredCreditCard() || BIsSteamAccountSelected() )
	{
		InitializeTransaction();
		AnimateSubmitGiftNoteButton();
	}
	else
	{
		SetTabEnabled( 'payment_info' );
	}
}

function UpdateStateSelectState()
{
	try
	{
		if ( g_bHasBillingStates )
		{
			$J('#billing_state_label').show();
			$J('#billing_state_input').show();
			$J('#billing_state_text').hide();
			$J('#billing_state_select_dselect_container').show();
		}
		else
		{
			$J('#billing_state_label').hide();
			$J('#billing_state_input').hide();
			$J('#billing_state_text').show();
			$J('#billing_state_select_dselect_container').hide();
		}

		Shipping_UpdateStateSelectState();
	}
	catch( e )
	{
		ReportCheckoutJSError( 'Failed in UpdateStateSelectState()', e );
	}
}

function BIsCreditCardMethod( method )
{
  if ( g_bUpdateBillingFormAddressOnly )
    return false;

	return method == 'mastercard' || method == 'visa'
			|| method == 'amex' || method == 'jcb'
			|| method == 'discover' || method == 'cartebleue'
			|| method == 'dankort' || method == 'mir';
}

function BIsStoredCreditCard()
{
	if ( g_bUpdateBillingFormAddressOnly )
		return false;

	var method = $('payment_method');

	return method.value == 'storedcreditcard';
}

function BStoredCreditCardRequiresSecurityCode( method )
{
	return BIsStoredCreditCard() && ( g_bRequiresCVVReEntry || ( method == 'cartebleue' ) );
}

function BIsSteamAccountSelected()
{
	var method = $('payment_method');
	if ( method )
		return (method.value == 'steamaccount');

	return false;
}

function SaveProviderMethod()
{
	var method = $('payment_method');
	if ( method )
	{
		if ( method.value == 'steamaccount' )
			return;

		g_strProviderMethod = method.value;
	}
}

function ShowFirstPaymentStep()
{
		if ( g_bUseRemainingSteamAccount || g_nPaymentMethodStep == 2 )
	{
		SaveProviderMethod();
		DHighlightItemByValue( 'payment_method', 'steamaccount', true );
	}

		g_nPaymentMethodStep = 1;
	g_bUseRemainingSteamAccount = false;

	UpdatePaymentInfoForm();
	ScrollCheckoutFormIntoView();
}

function ShowNextPaymentMethod()
{
		g_nPaymentMethodStep++;

		if ( g_nPaymentMethodStep == 2 )
	{
		if ( g_strProviderMethod != '' )
		{
			DHighlightItemByValue( 'payment_method', g_strProviderMethod, true );
		}
		else
		{
			var paymentMethodDropList = $('payment_method_droplist');
						for ( var i = 0; i < paymentMethodDropList.childNodes.length; i++ )
			{
				var paymentNode = paymentMethodDropList.childNodes[i].childNodes[0];
				if ( paymentNode && rgPaymentMethodProperties[paymentNode.id] &&
					rgPaymentMethodProperties[paymentNode.id].can_be_split )
				{
					DHighlightItem( 'payment_method', i, true );
					break;
				}
			}
		}
	}

	UpdatePaymentInfoForm();
	ScrollCheckoutFormIntoView();
}

function OnSteamAccountSelected()
{
		if ( g_nPurchaseTotal > g_nSteamAccountBalance )
	{
		g_bUseRemainingSteamAccount = true;
		ShowNextPaymentMethod();
		return;
	}

		SubmitPaymentInfoForm();
}

function SelectPaymentMethod( method )
{
	DHighlightItemByValue( 'payment_method', method, true );
	UpdatePaymentInfoForm();
}

function UpdatePaymentInfoForm()
{
	try
	{
		$('error_display').innerHTML = '';
		$J('#error_display').hide();

		var method = $('payment_method');
		if ( !method )
			return;

		var pm = $('steamaccount');

		if ( pm )
		{
			g_nPaymentMethodStep == 2 ? $J(pm).hide() : $J(pm).show();
		}

		var bCanBeSplit = true;

				if ( g_nPaymentMethodStep == 2 )
		{
						$('payment_header').innerHTML = 'Hình thức thanh toán, bước 2';
			$J('#payment_row_step2').show();
			$J('#payment_method_previous_button').show();

			if ( rgPaymentMethodProperties[method.value].can_be_split )
			{
				$('payment_info_method_label').innerHTML = 'Hãy lựa chọn một phương thức thanh toán cho phần còn lại:' + ' ' + g_strProviderRemaining;
				g_bUseRemainingSteamAccount = true;
			}
			else
			{
				bCanBeSplit = false;
				g_bUseRemainingSteamAccount = false;
			}
		}
		else
		{
			$('payment_header').innerHTML = 'Phương thức thanh toán';
			$J('#payment_row_step2').hide();
			$J('#payment_method_previous_button').hide();
			$('payment_info_method_label').innerHTML = 'Hãy lựa chọn một hình thức thanh toán';
		}

		var card_is_stored = BIsStoredCreditCard();

		if ( card_is_stored )
		{
			$('save_my_address_input').hide();
		}
		else
		{
			$('save_my_address_input').show();
		}

		var bShowCVV = false;
		var bShowCreditCardNumberExp = false;
		var bShowPhoneNumber = false;
		var bShowCountryVerification = false;
		var bShowBankAccountForm = false;
		var bShowMobileForm = false;
		var bShowBankAccountIDForm = false;
		var bShowPaymentSpecificNote = false;
		var bShowStoredPayPalDetails = false;
		var bDisabledPaymentMethod = false;
		var bShowBankSelection = false;
		var bPaymentMethodRefundable = rgPaymentMethodProperties[ method.value ].refundable;
		var bPaymentMethodDelaysInProcessing = rgPaymentMethodProperties[ method.value ].delaysinprocessing;
		var bShowCafeFundedInstructions = false;
		var bShowSaveMyAddressOverride = false;
		var nMaxCreditCardDigits = 16;

		$J('#payment_row_one').show();
		$J('#payment_row_eight').hide();

		if ( g_bIsUpdateBillingInfoForm )
		{
						$('submit_payment_info_btn').href = "javascript:SubmitPaymentInfoForm();";
			$( 'payment_info_form' ).onsubmit = function() { SubmitPaymentInfoForm(); return false; };
			SetButtonInnerHtml('submit_payment_info_btn', 'Lưu' );
			if ( g_bUpdateBillingFormAddressOnly )
			{
				$J('#payment_row_one').hide();
				$('payment_header').innerHTML = 'Cập nhật địa chỉ thanh toán';
			}
			else
			{
				$('payment_header').innerHTML = 'Cập nhật hình thức thanh toán đã lưu';
			}
			$('payment_info_method_label').innerHTML = 'Chọn hình thức thanh toán đã lưu của bạn hoặc nhập vào một hình thức thanh toán mới cho các đơn hàng hay đơn đăng ký gia hạn về sau.';
		}
		else if ( g_bPurchaseContainsSubscription )
		{
						$('submit_payment_info_btn').href = "javascript:SubmitPaymentInfoForm();";
			$( 'payment_info_form' ).onsubmit = function() { SubmitPaymentInfoForm(); return false; };
			SetButtonInnerHtml('submit_payment_info_btn', 'Tiếp tục' );
			$('payment_info_method_label').innerHTML = 'Đơn hàng của bạn bao gồm một hoặc nhiều vật phẩm sẽ được lập hóa đơn vào những khoảng thời gian nhất định trong tương lai. Steam sẽ dùng bất kì hình thức thanh toán nào đã lưu để thanh toán cho bạn vào mỗi kì gia hạn. Nếu bạn không có hình thức thanh toán nào được lưu tại thời điểm gia hạn, Ví Steam sẽ được sử dụng để chi trả.';
		}
		else
		{
						$('submit_payment_info_btn').href = "javascript:SubmitPaymentInfoForm();";
			$( 'payment_info_form' ).onsubmit = function() { SubmitPaymentInfoForm(); return false; };
			SetButtonInnerHtml('submit_payment_info_btn', 'Tiếp tục' );
		}

				g_bShowAddressForm = g_bHasBillingStates || g_bRequireBillingInfo;

		if ( BIsStoredCreditCard() )
		{
			g_bShowAddressForm = false;
		}
		else if ( BIsCreditCardMethod( method.value ) )
		{
			// For any of these common credit card methods show all the form elements

						g_bShowAddressForm = true;
			bShowCreditCardNumberExp = true;
			bShowPhoneNumber = true;
						bShowCVV = !card_is_stored;

			if ( method.value == 'mir' )
			{
				nMaxCreditCardDigits = 19;
			}
		}
		else if ( method.value == 'paypal' )
		{
						g_bShowAddressForm = !g_bSkipAddressRequirementForPayPal;
			bShowPhoneNumber = g_bShowAddressForm;
			bShowCountryVerification = g_bSkipAddressRequirementForPayPal;
			bShowSaveMyAddressOverride = g_bEnableCachedPayPalCredentials;

			$('external_payment_processor_notice').innerHTML = 'Giao dịch PayPal của bạn được khởi tạo, xin vui lòng chờ trong giây lát trước khi tiếp tục...';
		}
		else if ( method.value == 'updatepaypal' )
		{
						g_bShowAddressForm = !g_bSkipAddressRequirementForPayPal;
			bShowPhoneNumber = g_bShowAddressForm;
			bShowCountryVerification = g_bSkipAddressRequirementForPayPal;

			$('external_payment_processor_notice').innerHTML = 'Giao dịch PayPal của bạn được khởi tạo, xin vui lòng chờ trong giây lát trước khi tiếp tục...';
			bShowPaymentSpecificNote = true;
			$('payment_method_specific_note').innerHTML = 'Vì lí do bảo mật, bạn sẽ phải xác thực lại việc mua hàng với Paypal.';
		}
		else if ( method.value == 'storedpaypal' )
		{
			g_bShowAddressForm = false;
			bShowCountryVerification = true;
			bShowStoredPayPalDetails = true;
		}
		else if ( method.value == 'giropay' )
		{
			bShowCountryVerification = true;
			bShowBankAccountForm = true;
		}
		else if ( BIsBankChoiceMethod( method.value ) )
		{
			bShowCountryVerification = true;
			bShowBankSelection = true;
		}
		else if ( method.value == 'paysafe' || method.value == 'sofort' || method.value == 'webmoney' || method.value == 'moneybookers' || method.value == 'unionpay' || method.value == 'yandex'
			|| method.value == 'boacompragold' || method.value == 'pagseguro' || method.value == 'visabrazil'
			|| method.value == 'amexbrazil' || method.value == 'aura' || method.value == 'hipercard' || method.value == 'mastercardbrazil' || method.value == 'dinerscardbrazil'
			|| method.value == 'multibanco' || method.value == 'payshop' || method.value == 'maestroboacompra' || method.value == 'visaelectronboacompra'
			|| method.value == 'oxxo' || method.value == 'toditocash' || method.value == 'carnet'
			|| method.value == 'spei' || method.value == '3pay' || method.value == 'isbank'
			|| method.value == 'garanti' || method.value == 'akbank' || method.value == 'yapikredi'
			|| method.value == 'halkbank' || method.value == 'bankasya' || method.value == 'finansbank'
			|| method.value == 'denizbank' || method.value == 'ptt' || method.value == 'cashu'
			|| method.value == 'onecard'
			|| method.value == 'molpoints' || method.value == 'eclubpoints'
			|| method.value == 'oxxo' || method.value == 'toditocash' || method.value == 'pse' || method.value == 'exito' || method.value == 'efecty'
			|| method.value == 'baloto' || method.value == 'pinvalidda' || method.value == 'mangirkart' || method.value == 'bancocreditodeperu'
			|| method.value == 'bbvacontinental' || method.value == 'pagoefectivo' || method.value == 'trustly'
			|| method.value == 'nodwin_cod' || method.value == 'credit_card_india' || method.value == 'debit_card_india'
			|| method.value == 'net_banking_india' || method.value == 'cash_card_india' || method.value == 'wallet_india'
			|| method.value == 'naranja' || method.value == 'cencosud' || method.value == 'cabal' || method.value == 'pagofacil'
			|| method.value == 'rapipago' || method.value == 'banconacionaldecostarica' || method.value == 'bancopoplar' || method.value == 'redpagos'
			|| method.value == 'spe' || method.value == 'multicaja' || method.value == 'redcompra' || method.value == 'ziraatbank' || method.value == 'vakiflarbank'
			|| method.value == 'kuveytturkbank' || method.value == 'ekonomibank' || method.value == 'pichincha' || method.value == 'pichinchacash'
			|| method.value == 'przelewy24' || method.value == 'trustpay' || method.value == 'poli' || method.value == 'mercadopago' || method.value == 'payu'
			|| method.value == 'mrcash' || method.value == 'eps' || method.value == 'interac' || method.value == 'santanderrio' || method.value == 'degica_mobile'
			|| method.value == 'zong' || method.value == 'credit_card_japan' || method.value == 'payeasy'
			|| method.value == 'webmoney_japan' || method.value == 'webmoney_japan_steam_card' || method.value == 'bitcash' || method.value == 'netcash'
			|| method.value == 'nanaco' || method.value == 'culturevoucher' || method.value == 'happymoneyvoucher' || method.value == 'toss'
			|| method.value == 'payco' || method.value == 'mobile_wallet_japan' || method.value == 'boletoflash' || method.value == 'pix'
			|| method.value == 'gcash' || method.value == 'kakaopay' || method.value == 'dana' || method.value == 'truemoney'
			|| method.value == 'touchngo' || method.value == 'linepay' || method.value == 'merpay' || method.value == 'paypay'
			|| method.value == 'sberbank' || method.value == 'yoomoney' || method.value == 'tinkoff' || method.value == 'cashincis'
			|| method.value == 'aupay' || method.value == 'alipayhk' || method.value == 'naverpay' || method.value == 'linkaja'
			|| method.value == 'shopeepay' || method.value == 'grabpay' || method.value == 'paynow' || method.value == 'onlinebankingthailand'
			|| method.value == 'cashoptionsthailand' || method.value == 'blik'
		)
		{
			bShowCountryVerification = true;
		}
		else if ( method.value == 'alfaclick' )
		{
			bShowCountryVerification = true;
			bShowBankAccountIDForm = true;
		}
		else if ( method.value == 'alipay' && true )
		{
			bShowCountryVerification = true;
		}
		else if ( method.value == 'boleto' || method.value == 'bancodobrasilonline' || method.value == 'itauonline' || method.value == 'bradescoonline' || method.value == 'safetypay' )
		{
			bShowCountryVerification = true;
			bShowPaymentSpecificNote = true;
			$('payment_method_specific_note').innerHTML = 'Ngân hàng hoặc bên xử lý thanh toán của bạn có thể tính thêm phí dịch vụ khi sử dụng hình thức thanh toán này';
		}
		else if ( method.value == 'qiwi' )
		{
			bShowCountryVerification = true;
			bShowMobileForm = true;
		}
		else if ( method.value == 'konbini' || method.value == 'bank_transfer_japan' )
		{
			bShowCountryVerification = true;
			bShowPaymentSpecificNote = true;
			$('payment_method_specific_note').innerHTML = 'Ngân hàng hoặc bên xử lý thanh toán của bạn có thể tính thêm phí dịch vụ khi sử dụng hình thức thanh toán này';
		}
		else if ( method.value == 'beeline' )
		{
			bShowCountryVerification = true;
			bShowPaymentSpecificNote = true;
			$('payment_method_specific_note').innerHTML = 'Ngân hàng hoặc bên xử lý thanh toán của bạn có thể tính thêm phí dịch vụ khi sử dụng hình thức thanh toán này';
		}
		else if ( method.value == 'bitcoin' )
		{
						bShowCountryVerification = $('billing_country').value != 'US';
		}
		else if ( method.value == 'cafefunded' )
		{
			g_bShowAddressForm = false;
			bShowCountryVerification = true;
			bShowCafeFundedInstructions = true;
		}
		else if ( method.value == 'wechat' && true )
		{
			bShowCountryVerification = true;
			bShowPaymentSpecificNote = true;
			$('payment_method_specific_note').innerHTML = 'Thanh toán WeChat chỉ có thể được thực hiện từ những tài khoản WeChat đã được kết nối tới một thẻ tín dụng hợp lệ được cấp bởi một ngân hàng Trung Quốc. Vui lòng xem <a href=\'http://kf.qq.com/faq/130807me2YZf140909yumYFb.html\' target=\'_blank\'>đường dẫn</a> này để biết thêm chi tiết.';
		}
		else if ( method.value == 'tenpay' )
		{
			bShowCountryVerification = true;
			bShowPaymentSpecificNote = true;
			$('payment_method_specific_note').innerHTML = 'Những thanh toán qua Tenpay chỉ có thể được thực hiện thông qua tài khoản Tenpay đã liên kết với một số điện thoại được xác thực.';
		}
		else if ( method.value == 'vtcpaywallet' || method.value == 'vtcpaycards' || method.value == 'vtcpayonlinebanking' )
		{
			bShowCountryVerification = true;
			bShowPaymentSpecificNote = true;
			$('payment_method_specific_note').innerHTML = 'Xin lưu ý rằng VTCPay sẽ tính thêm thuế giá trị gia tăng và thuế thu nhập doanh nghiệp cho tổ chức nước ngoài vào khoản tiền bạn phải trả.';
		}
		else if ( method.value == 'steamaccount' )
		{
						$J('#payment_row_eight').show();

						$('external_payment_processor_notice').innerHTML = 'Trong trường hợp số dư ví Steam không đủ để thanh toán toàn bộ chi phí giao dịch này, bạn sẽ được yêu cầu trả phần còn lại bằng một hình thức thanh toán bổ sung.';

						$('submit_payment_info_btn').href = "javascript:OnSteamAccountSelected();";
			$( 'payment_info_form' ).onsubmit = function() { OnSteamAccountSelected(); return false; };
			SetButtonInnerHtml('submit_payment_info_btn', 'Tiếp tục' );
		}
		else if ( method.value == 'disabled' )
		{
			g_bShowAddressForm = false;
			bShowPaymentSpecificNote = true;
			bDisabledPaymentMethod = true;
			$('payment_method_specific_note').innerHTML = 'Hiện chúng tôi tạm thời không thể xử lý các giao dịch được thực hiện thông qua hình thức thanh toán này. Xin thứ lỗi vì sự bất tiện.';
		}
		else if ( method.value == 'guest' )
		{
			g_bShowAddressForm = false;
			bShowPaymentSpecificNote = true;
			bDisabledPaymentMethod = true;
			$('payment_method_specific_note').innerHTML = 'Phương thức thanh toán này không thể sử dụng bởi người dùng khách, vui lòng cân nhắc phương thức thanh toán khác hoặc tạo một tài khoản Steam đầy đủ để hoàn thành đơn hàng của bạn.';
		}
		else if ( method.value == 'disabled_for_wallet' )
		{
			g_bShowAddressForm = false;
			bShowPaymentSpecificNote = true;
			bDisabledPaymentMethod = true;
			$('payment_method_specific_note').innerHTML = 'Không thể dùng hình thức thanh toán này để nạp tiền vào ví.';
		}

		$J('#submit_payment_info_btn').show();
		$J('#cant_use_payment_method_in_overlay').hide();

		var $CCFields = $J('#credit_card_row, #card_number_label, #card_number, #expiration_date_cvv_label, #expiration_date_label, #expiration_month_dselect_container, #expiration_year_dselect_container')
		if ( bShowCreditCardNumberExp )
		{
			$CCFields.show();
			$('card_number').maxLength = nMaxCreditCardDigits;
			$('card_number').value = $('card_number').value.substring( 0, nMaxCreditCardDigits );
		}
		else
			$CCFields.hide();

				if ( bShowCVV  )
		{
			$('security_code_section' ).show();
		}
		else
		{
			$('security_code_section' ).hide();
		}

		var $AddressFields = $J('#payment_row_address, #payment_header_title');
		if ( g_bShowAddressForm )
		{
			$AddressFields.show();
			if ( bShowPhoneNumber )
				$J('#payment_row_phone').show();
			else
				$J('#payment_row_phone').hide();
		}
		else
			$AddressFields.hide();

		var bShowSaveMyAddress = ( g_bShowAddressForm || bShowSaveMyAddressOverride ) && ( !g_bIsUpdateBillingInfoForm || g_bUpdateBillingFormAddressOnly );
		var strSaveMyAddressDisplay = bShowSaveMyAddress ? 'block' : 'none';
		$('payment_row_save_my_address').style.display = strSaveMyAddressDisplay;

		var strShowStoredPayPalDetails = bShowStoredPayPalDetails ? 'block' : 'none';
		$('payment_row_stored_paypal_details').style.display = strShowStoredPayPalDetails;

		var strBankAccountDisplay = !g_bEnableIBANForGiroPay && bShowBankAccountForm ? 'block' : 'none';
		var strBankAccountDisplayIBAN = g_bEnableIBANForGiroPay && bShowBankAccountForm ? 'block' : 'none';
		$('bank_code_row').style.display = strBankAccountDisplay;
		$('bank_iban_row').style.display = strBankAccountDisplayIBAN;

		var strCountryVerificationDisplay = bShowCountryVerification ? 'block' : 'none';
		$('payment_row_country_verification').style.display = strCountryVerificationDisplay;

		var strPaymentMethodSpecificNote = bShowPaymentSpecificNote ? 'list-item' : 'none';
		$('payment_method_specific_note').style.display = strPaymentMethodSpecificNote;

		var strMobileVerificationDisplay = bShowMobileForm ? 'block' : 'none';
		$('mobile_number_row').style.display = strMobileVerificationDisplay;

		var strBankAccountIDDisplay = bShowBankAccountIDForm ? 'block' : 'none';
		$('bank_account_id_row').style.display = strBankAccountIDDisplay;

		var strAllowPaymentMethod = !bDisabledPaymentMethod ? 'block' : 'none';
		$('youll_get_to_review').style.display = strAllowPaymentMethod;
		$('submit_payment_info_btn').style.display = strAllowPaymentMethod;
		$('payment_row_bank_name').style.display = ( bShowBankSelection && ( g_bHasBankDirectoryArray ) ) ? 'block' : 'none';

		var strPaymentMethodCanBeSplit = !bCanBeSplit ? 'list-item' : 'none';
		$('payment_method_unable_to_split' ).style.display = strPaymentMethodCanBeSplit;

		var strPaymentMethodNotRefundable = !bPaymentMethodRefundable ? 'list-item' : 'none';
		$('payment_row_not_refundable' ).style.display = strPaymentMethodNotRefundable;

		var strPaymentMethodDelayInProcessing = bPaymentMethodDelaysInProcessing ? 'list-item' : 'none';
		$('payment_method_delays_in_processing' ).style.display = strPaymentMethodDelayInProcessing;

		var strCafeFundedInstructions = bShowCafeFundedInstructions ? 'list-item' : 'none';
		$('payment_method_cafe_funded' ).style.display = strCafeFundedInstructions;

		var strPaymentMethodNotes = !bCanBeSplit || !bPaymentMethodRefundable || bShowPaymentSpecificNote || bShowCafeFundedInstructions || bPaymentMethodDelaysInProcessing ? 'block': 'none';
		$('payment_method_notes' ).style.display = strPaymentMethodNotes;
	}
	catch( e )
	{
		ReportCheckoutJSError( 'Failed updating payment info form after payment method change', e );
	}
}

function IsDigitOrEditKeypress( e )
{
	try
	{
		var keynum = 0;

		if( e.keyCode ) 	  	{
			keynum = e.keyCode;
		}
		else if( e.which ) 		{
			keynum = e.which;
		}

		// tab
		if ( keynum == 9 ) return true;
		// backspace
		if ( keynum == 8 ) return true;
		// delete
		if ( keynum == 46 ) return true;
		// arrows
		if ( keynum == 37 || keynum == 38 || keynum == 39 || keynum == 40 ) return true;

		// digits
		if ( keynum >= 48 && keynum <= 57 ) return true;
	}
	catch( e )
	{
		ReportCheckoutJSError( 'Failed in IsDigitOrEditkeypress()', e );
	}

	return false;
}


var g_bAutoSubmitPaymentInfo = false;
function SubmitShippingInfoForm( bAutoSubmitPaymentInfo )
{
	g_bAutoSubmitPaymentInfo = bAutoSubmitPaymentInfo;
	try
	{
				$('error_display').innerHTML = '';
		$('error_display').style.display = 'none';

		VerifyShippingAddress();
	}
	catch(e)
	{
		ReportCheckoutJSError( 'Failed showing errors or submitting shipping info form', e );
	}
}

var g_bVerifyShippingAddressCallRunning = false;
function VerifyShippingAddress()
{
		if( g_bVerifyShippingAddressCallRunning )
		return;

	try
	{
				g_bVerifyShippingAddressCallRunning = true;

				AnimateSubmitPaymentInfoButton();

		Shipping_VerifyShippingAddress( g_sessionID, 'https://checkout.steampowered.com/checkout/verifyshippingaddress/',
			{
				onSuccess: function( result ) {
					g_bVerifyShippingAddressCallRunning = false;
					// Success...
					if ( result.success == 1 )
					{
						OnVerifyShippingAddressSuccess( result );
						return;
					}
					else
					{
						OnVerifyShippingAddressFailure();
						return;
					}

										OnVerifyShippingAddressFailure();
				},
				onFailure: function(){
										g_bVerifyShippingAddressCallRunning = false;
					OnVerifyShippingAddressFailure();
				}
			} );
	}
	catch(e)
	{
		ReportCheckoutJSError( 'Failed gathering form data and calling VerifyShippingAddress', e );
	}
}


function OnVerifyShippingAddressSuccess( result )
{
	try
	{
		ValidationMarkFieldOk( $('shipping_address') );
		ValidationMarkFieldOk( $('shipping_address_two') );
		ValidationMarkFieldOk( $('shipping_postal_code') );
		ValidationMarkFieldOk( $('shipping_city') );
		ValidationMarkFieldOk( $('shipping_phone') );

				if ( result.eShippingAddressVerificationDetail != 0 )
		{
						SetTabEnabled( 'shipping_info' );
			var error_text = 'Chúng tôi không thể đưa đơn hàng đến địa chỉ bạn đã cung cấp.';
			switch ( result.eShippingAddressVerificationDetail )
			{
				case 4:
					error_text = 'Chúng tôi không thể giao đến địa chỉ bạn cung cấp vì một phần địa chỉ bị thiếu hoặc có vẻ không hợp lệ.';
					if ( $('shipping_address' ).value == '' )
						ValidationMarkFieldBad( $('shipping_address') );

					if ( $('shipping_phone' ).value == '' )
						ValidationMarkFieldBad( $('shipping_phone') );

					if ( $('shipping_city' ).value == '' )
						ValidationMarkFieldBad( $('shipping_city') );

					if ( $('shipping_postal_code' ).value == '' )
						ValidationMarkFieldBad( $('shipping_postal_code') );
					break;

				case 3:
					error_text = 'Chúng tôi không thể giao đến địa chỉ bạn cung cấp vì một phần địa chỉ quá dài. Tổ hợp tên và mỗi khoảng gõ địa chỉ tối đa chỉ được 35 kí tự.';
					break;

				case 1:
				case 5:
					error_text = 'Chúng tôi không thể chuyển đơn hàng của bạn tới hộp P.O, APO, FPO, hoặc DPO theo địa chỉ bạn cấp.';
					ValidationMarkFieldBad( $('shipping_address') );
					ValidationMarkFieldBad( $('shipping_address_two') );
					break;

				case 6:
					error_text = 'Chúng tôi không thể gửi đơn hàng của bạn bởi mã bưu chính bạn cung cấp cho chúng tôi thuộc về một khu vực bên ngoài của 48 lục địa Hoa Kỳ.';
					break;

				case 7:
					error_text = 'Chúng tôi không thể giao đến địa chỉ bạn cung cấp vì mã bưu chính của bạn thuộc về một khu vực đặc biệt mà chúng tôi không thể gửi hàng được.';
					ValidationMarkFieldBad( $('shipping_postal_code') );
					break;

				case 2:
					error_text = 'Chúng tôi không đưa đơn hàng đến địa chỉ bạn đã cung cấp vì nó chứa kí tự không phải là chữ cái latin.';
					break;

				case 8:
					error_text = 'Mã bưu chính có vẻ không đúng và phải theo định dạng như sau \'%1$s\'.<br>Vui lòng kiểm tra và nhập lại mã bưu chính để hoàn thành lệnh đặt.'.replace( /%1\$s/, result.verificationDetailExample );
					ValidationMarkFieldBad( $('shipping_postal_code') );
					break;

				case 9:
					error_text = 'Chúng tôi không thể giao đến địa chỉ bạn cung cấp vì thông tin bang/tỉnh bị thiếu.';
					break;
			}
			DisplayErrorMessage( error_text );
		}
		else if ( result.bValidAddress || result.bSuggestedAddressMatches )
		{
			ShippingAddressVerified( false );
		}
		else
		{
			Shipping_UpdateFieldsFromVerificationCall( result );
			$('shipping_info_confirm').show();
			$('shipping_info_entry').hide();
			$('shipping_info_verify_update').checked = true;

						var error_text = 'Chúng tôi đã tìm thấy một gợi ý cho địa chỉ giao hàng của bạn.';

			DisplayErrorMessage( error_text );
		}
	}
	catch( e )
	{
		ReportCheckoutJSError( 'Failed handling VerifyShippingAddress success', e );
	}
}

function ShowShippingAddressForm()
{
	$('shipping_info_entry').show();
	$('shipping_info_confirm').hide();

		$('error_display').innerHTML = '';
	$('error_display').style.display = 'none';
}

function SelectShippingAddressSuggestion()
{
	ShippingAddressVerified( $('shipping_info_verify_update').checked );
}

function ShippingAddressVerified( bUseCorrected )
{
	if ( bUseCorrected )
	{
		Shipping_UpdateAddressWithCorrectedFields();
	}

	ShowShippingAddressForm();

	if ( g_bAutoSubmitPaymentInfo )
	{
		SubmitPaymentInfoForm();
	}
	else
	{
		SetTabEnabled( 'payment_info' );
	}
}

function OnVerifyShippingAddressFailure()
{
	try
	{
				SetTabEnabled( 'shipping_info' );
		var error_text = 'Đã có một lỗi khi thực thi hoặc cập nhật giao dịch của bạn. Xin đợi một phút và thử lại hoặc liên hệ hỗ trợ để nhận giúp đỡ.';

		DisplayErrorMessage( error_text );
	}
	catch (e)
	{
		ReportCheckoutJSError( 'Failed handling VerifyShippingAddress failure', e );
	}
}

function SubmitPaymentInfoForm()
{
		var method = $('payment_method');
	if ( !method )
		return;

		var errorString = '';

		var rgBadFields = {
		card_number : false,
		first_name : false,
		last_name : false,
		billing_address : false,
		security_code : false,
		billing_city : false,
		billing_state_text : false,
		billing_phone : false,
		billing_postal_code : false,
		expiration_month_trigger : false,
		expiration_year_trigger : false,
		payment_method_trigger : false,
		billing_state_select_trigger : false,
		bank_account : false,
		bank_code : false,
		bank_iban : false,
		bank_bic : false,
		mobile_number_label: false
	}

	try
	{
		var card_is_stored = BIsStoredCreditCard();
				if ( BIsCreditCardMethod( method.value ) )
		{
						if ( !card_is_stored )
			{
				var val = $( 'security_code' ).value;
				var len = val.length;
				var requiredLen = ( method.value == 'amex' ) ? 4 : 3;
				if ( len != requiredLen )
				{
					errorString += 'Vui lòng nhập mã an ninh thẻ của bạn.<br/>';
					rgBadFields.security_code = true;
				}
				else if ( len > 0 )
				{
					var bAllDigits = true;
					for ( i = 0; i < len; ++i )
					{
						var c = val.charAt(i);
						if ( c < '0' || c > '9' )
						{
							bAllDigits = false;
						}
					}
					if ( !bAllDigits )
					{
						errorString += 'Vui lòng nhập mã an ninh thẻ của bạn.<br/>';
						rgBadFields.security_code = true;
					}
				}
			}

			var dateNow = new Date();
			var month = dateNow.getMonth()+1; // 0-11 in JS
			var year = dateNow.getFullYear();
			if ( ( $( 'expiration_year' ).value == '' ) || ( $('expiration_month').value == '' ) || ( $( 'expiration_year' ).value < year ) || ( $('expiration_year').value == year && $('expiration_month').value < month ) )
			{
				errorString += 'Hãy nhập một ngày hết hạn hợp lệ.<br/>';
				rgBadFields.expiration_month_trigger = true;
				rgBadFields.expiration_year_trigger = true;
			}
		}

		if ( method.value == 'qiwi' )
		{
			// Expect 10 digits, we'll make sure we at least have that many digits
			var num = $( 'mobile_number').value;

			// check to make sure qiwi phone number starts with +7
			var re = new RegExp(/^\+7/ );
			var m = re.exec(num);

			if ( m == null )
			{
				errorString += 'Vui lòng nhập 10 chữ số số tài khoản điện thoại di động của bạn, bắt đầu bằng số "9"<br/>';
				rgBadFields.mobile_number_label = true;
			}
			else
			{
				num = num.replace( m, "" );
				num = num.replace(/\D/g, "");

				var digitsFound = 0;
				var bInvalidMobilePhone = false;
				for ( i = 0; i < num.length; ++i )
				{
					var c = num.charAt(i);
					if ( i == 0 && c != '9' )
					{
						bInvalidMobilePhone = true;
						break;
					}
					else if ( c >= '0' && c <= '9' )
						++digitsFound;
				}

				if ( digitsFound != 10 || bInvalidMobilePhone )
				{
					errorString += 'Vui lòng nhập 10 chữ số số tài khoản điện thoại di động của bạn, bắt đầu bằng số "9"<br/>';
					rgBadFields.mobile_number_label = true;
				}
				else
				{
					$('billing_phone').value = $( 'mobile_number').value;
				}
			}
		}
		else if ( ( !g_bSkipAddressRequirementForPayPal && ( method.value == 'paypal' || method.value == 'updatepaypal' ) ) || BIsCreditCardMethod( method.value ) || g_bShowAddressForm )
		{
			errorString += BillingAddress_VerifyAddressFields( rgBadFields, g_bHasBillingStates );
		}

		if ( method.value == 'giropay' )
		{
			if ( !g_bEnableIBANForGiroPay )
			{
				if ( isNaN( $('bank_account').value ) || $('bank_account').value.length < 1 || $('bank_account').value.length > 10 )
				{
					errorString += 'Vui lòng nhập số tài khoản của bạn.<br/>';
					rgBadFields.bank_account = true;
				}
				if ( isNaN( $('bank_code').value ) || $('bank_code').value.length < 1 || $('bank_code').value.length > 8 )
				{
					errorString += 'Vui lòng nhập mã ngân hàng của bạn.<br/>';
					rgBadFields.bank_code = true;
				}
			}
			else
			{
				if ( $('bank_iban').value.length < 15 || $('bank_iban').value.length > 50 )
				{
					errorString += 'Vui lòng xác nhận và nhập mã IBAN của bạn (Số tài khoản ngân hàng quốc tế).<br/>';
					rgBadFields.bank_iban = true;
				}
				else
				{
					
										var sIBAN = $('bank_iban').value.substring(4).toUpperCase() + $('bank_iban').value.substring(0, 4).toUpperCase();

										var sCalculatedIBAN = '';
					var nACode = 'A'.charCodeAt( 0 );

					for ( var i = 0; i < sIBAN.length; i++ )
					{
						var c = sIBAN.substring( i, i + 1 );

						if ( isNaN( c ) )
						{
							var nCharCode = c.charCodeAt( 0 );

							sCalculatedIBAN += ( nCharCode - nACode + 10 );
						}
						else
						{
							sCalculatedIBAN += c;
						}
					}

					
					while ( sCalculatedIBAN.length > 10 )
					{
						var sLHS = sCalculatedIBAN.slice( 0, 9 );
						sCalculatedIBAN = ( parseInt( sLHS ) % 97 ) + sCalculatedIBAN.slice( sLHS.length );
					}


					if ( ( parseInt( sCalculatedIBAN ) % 97 ) != 1 )
					{
						errorString += 'Vui lòng xác nhận và nhập mã IBAN của bạn (Số tài khoản ngân hàng quốc tế).<br/>';
						rgBadFields.bank_iban = true;
					}
				}

				if ( $('bank_bic').value.length != 8 && $('bank_bic').value.length != 11 && $('bank_bic').value.length != 12 )
				{
					errorString += 'Vui lòng xác nhận và nhập mã SWIFT của bạn.<br/>';
					rgBadFields.bank_bic = true;
				}
			}
		}
	}
	catch(e)
	{
		ReportCheckoutJSError( 'Failed validating payment info form', e );
	}

	try
	{
				for ( var key in rgBadFields )
		{
			if ( rgBadFields[key] )
			{
				ValidationMarkFieldBad( key );
			}
			else
			{
				ValidationMarkFieldOk( key );
			}
		}

				if ( errorString != '' )
		{
						var rgErrors = errorString.split( '<br/>' );
			if ( rgErrors.length > 3 )
			{
				errorString = '';
				errorString = rgErrors[0] + '<br/>' + rgErrors[1] + '<br/>' + 'Và nhìn vào các lỗi khác được tô sáng dưới đây.' + '<br/>';
			}

      			SetTabEnabled( 'payment_info' );
			DisplayErrorMessage( errorString );
		}
		else
		{
						$('error_display').innerHTML = '';
			$('error_display').style.display = 'none';

						if ( $('cancel_pending_verification') )
				$('cancel_pending_verification').style.display = 'none';

						InitializeTransaction();
		}
	}
	catch(e)
	{
		ReportCheckoutJSError( 'Failed showing error or submitting payment info form', e );
	}
}


function UpdateReviewPageBillingInfoWithCurrentValues( price_data )
{
	try
	{
				var method = $('payment_method');
		if ( method && price_data )
		{
			var providerPaymentMethod = price_data.providerpaymentmethod ? price_data.providerpaymentmethod : 0;
			var steamAccountTotal = price_data.steamAccountTotal ? price_data.steamAccountTotal : 0;
			var formattedProviderTotal = price_data.formattedProviderTotal ? price_data.formattedProviderTotal : '';
			var formattedSteamAccountTotal = price_data.formattedSteamAccountTotal ? price_data.formattedSteamAccountTotal : '';
			var hitMinProviderAmount = price_data.hitminprovideramount ? price_data.hitminprovideramount : false;

			var card_number;
			if ( method.value == 'storedcreditcard' )
			{
				method = $('stored_payment_method');
				card_number = $('stored_card_number');
				if ( BStoredCreditCardRequiresSecurityCode( method.value ) )
				{
					$('payment_method_review_row_provider_cvv').style.display = 'block';
					$('security_code_cached').value = '';
				}
			}
			else
			{
				card_number = $( 'card_number' );
				$('payment_method_review_row_provider_cvv').style.display = 'none';
			}
			if ( card_number )
				card_number = card_number.value
			else
				card_number = '';

						$('payment_method_review_row_provider').style.display = 'block';
			$('payment_method_review_row_steam_account').style.display = 'none';
			$('payment_method_review_row_min_provider_amount').style.display = 'none';
			$('payment_method_review_provider_total').style.display = 'none';
			$('payment_method_review_steam_account_total').style.display = 'none';

			if ( providerPaymentMethod == 0 )
			{
								$('payment_method_review_row_provider_cvv').style.display = 'none';
				$('payment_method_review_row_steam_account').style.display = 'block';
				$('payment_method_review_row_provider').style.display = 'none';
			}
			else if ( steamAccountTotal > 0 )
			{
								$('payment_method_review_row_steam_account').style.display = 'block';
				$('payment_method_review_provider_total').style.display = 'block';
				$('payment_method_review_steam_account_total').style.display = 'block';
				$('payment_method_review_row_min_provider_amount').style.display = hitMinProviderAmount ? 'block' : 'none';
			}
			else
			{
							}

						$('payment_method_review_provider_total').innerHTML = formattedProviderTotal;
			$('payment_method_review_steam_account_total').innerHTML = formattedSteamAccountTotal;
						$('checkout_review_payment_info_area').style.display = g_bShowAddressForm ? '' : 'none';

						if ( method.value == 'visa' && providerPaymentMethod == 2 )
			{
				$('payment_method_review_text').innerHTML = 'Visa'+' có số cuối: '+ (card_number.substr( Math.max( 0, card_number.length-4 ) ) );
			}
			else if ( method.value == 'mastercard' && providerPaymentMethod == 2 )
			{
				$('payment_method_review_text').innerHTML = 'MasterCard'+' có số cuối: '+ (card_number.substr( Math.max( 0, card_number.length-4 ) ) );
			}
			else if ( method.value == 'amex' && providerPaymentMethod == 2 )
			{
				$('payment_method_review_text').innerHTML = 'American Express'+' có số cuối: '+ (card_number.substr( Math.max( 0, card_number.length-4 ) ) );
			}
			else if ( method.value == 'discover' && providerPaymentMethod == 2 )
			{
				$('payment_method_review_text').innerHTML = 'Discover'+' có số cuối: '+ (card_number.substr( Math.max( 0, card_number.length-4 ) ) );
			}
			else if ( method.value == 'jcb' && providerPaymentMethod == 2 )
			{
				$('payment_method_review_text').innerHTML = 'JCB'+' có số cuối: '+ (card_number.substr( Math.max( 0, card_number.length-4 ) ) );
			}
			else if ( method.value == 'cartebleue' && providerPaymentMethod == 2 )
			{
				$('payment_method_review_text').innerHTML = 'Carte Bleue'+' có số cuối: '+ (card_number.substr( Math.max( 0, card_number.length-4 ) ) );
			}
			else if ( method.value == 'dankort' && providerPaymentMethod == 2 )
			{
				$('payment_method_review_text').innerHTML = 'Visa Dankort'+' có số cuối: '+ (card_number.substr( Math.max( 0, card_number.length-4 ) ) );
			}
			else if ( method.value == 'mir' && providerPaymentMethod == 2 )
			{
				$('payment_method_review_text').innerHTML = 'Mir'+' có số cuối: '+ (card_number.substr( Math.max( 0, card_number.length-4 ) ) );
			}
			else if ( method.value == 'steamaccount' && providerPaymentMethod == 0 )
			{
			}
			else if ( method.value == 'storedpaypal' && providerPaymentMethod == 4 )
			{
				$('payment_method_review_text').innerHTML = 'Tài khoản Paypal của tôi (' + $('stored_paypal_email').value + ')';
			}
			else if ( method.value == 'paypal' && providerPaymentMethod == 4 )
			{
				$('payment_method_review_text').innerHTML = 'PayPal';
			}
			else if ( method.value == 'updatepaypal' && providerPaymentMethod == 4 )
			{
				$('payment_method_review_text').innerHTML = 'PayPal';
			}
			else if ( method.value == 'giropay' && providerPaymentMethod == 3 )
			{
				$('payment_method_review_text').innerHTML = 'GiroPay';
			}
			else if ( method.value == 'paysafe' && providerPaymentMethod == 6 )
			{
				$('payment_method_review_text').innerHTML = 'paysafecard';
			}
			else if ( method.value == 'ideal' && providerPaymentMethod == 5 )
			{
				$('payment_method_review_text').innerHTML = 'iDEAL';
			}
			else if ( method.value == 'sofort' && providerPaymentMethod == 7 )
			{
								if ( price_data.storeCountryCode == 'GB' || price_data.storeCountryCode == 'BE' )
				{
					$('payment_method_review_text').innerHTML = 'DIRECTebanking.com';
				}
				else
				{
					$('payment_method_review_text').innerHTML = 'Sofortüberweisung';
				}

			}
			else if ( method.value == 'webmoney' && providerPaymentMethod == 9 )
			{
				$('payment_method_review_text').innerHTML = 'WebMoney';
			}
			else if ( method.value == 'moneybookers' && providerPaymentMethod == 10 )
			{
				$('payment_method_review_text').innerHTML = 'Skrill';
			}
			else if ( method.value == 'alipay' && providerPaymentMethod == 11 )
			{
				$('payment_method_review_text').innerHTML = 'AliPay';
			}
			else if ( method.value == 'unionpay' && providerPaymentMethod == 78 )
			{
				$('payment_method_review_text').innerHTML = 'UnionPay';
			}
			else if ( method.value == 'yandex' && providerPaymentMethod == 12 )
			{
				$('payment_method_review_text').innerHTML = 'Yandex';
			}
			else if ( method.value == 'qiwi' && providerPaymentMethod == 14 )
			{
				$('payment_method_review_text').innerHTML = 'QIWI Wallet';
			}
			else if ( method.value == 'beeline' && providerPaymentMethod == 33 )
			{
				$('payment_method_review_text').innerHTML = 'Thanh toán qua điện thoại';
			}
			else if ( method.value == 'boleto' && providerPaymentMethod == 18 )
			{
				$('payment_method_review_text').innerHTML = 'Boleto Bancario';
			}
			else if ( method.value == 'boacompragold' && providerPaymentMethod == 19 )
			{
				$('payment_method_review_text').innerHTML = 'BoaCompra Gold';
			}
			else if ( method.value == 'bancodobrasilonline' && providerPaymentMethod == 20 )
			{
				$('payment_method_review_text').innerHTML = 'Banco Do Brasil Online';
			}
			else if ( method.value == 'itauonline' && providerPaymentMethod == 21 )
			{
				$('payment_method_review_text').innerHTML = 'Itau Online';
			}
			else if ( method.value == 'bradescoonline' && providerPaymentMethod == 22 )
			{
				$('payment_method_review_text').innerHTML = 'Bradesco Online';
			}
			else if ( method.value == 'pagseguro' && providerPaymentMethod == 23 )
			{
				$('payment_method_review_text').innerHTML = 'Pagseguro';
			}
			else if ( method.value == 'visabrazil' && providerPaymentMethod == 24 )
			{
				$('payment_method_review_text').innerHTML = 'Visa (Trong nước)';
			}
			else if ( method.value == 'amexbrazil' && providerPaymentMethod == 25 )
			{
				$('payment_method_review_text').innerHTML = 'American Express (Trong nước)';
			}
			else if ( method.value == 'aura' && providerPaymentMethod == 26 )
			{
				$('payment_method_review_text').innerHTML = 'Aura';
			}
			else if ( method.value == 'hipercard' && providerPaymentMethod == 27 )
			{
				$('payment_method_review_text').innerHTML = 'Hipercard';
			}
			else if ( method.value == 'mastercardbrazil' && providerPaymentMethod == 28 )
			{
				$('payment_method_review_text').innerHTML = 'Mastercard (Trong nước)';
			}
			else if ( method.value == 'dinerscardbrazil' && providerPaymentMethod == 29 )
			{
				$('payment_method_review_text').innerHTML = 'Diner\'s Club (Trong nước)';
			}
			else if ( method.value == 'multibanco' && providerPaymentMethod == 45 )
			{
				$('payment_method_review_text').innerHTML = 'Multibanco';
			}
			else if ( method.value == 'payshop' && providerPaymentMethod == 46 )
			{
				$('payment_method_review_text').innerHTML = 'Payshop';
			}
			else if ( method.value == 'maestroboacompra' && providerPaymentMethod == 47 )
			{
				$('payment_method_review_text').innerHTML = 'Maestro (Nội địa)';
			}
			else if ( method.value == 'visaelectronboacompra' && providerPaymentMethod == 121 )
			{
				$('payment_method_review_text').innerHTML = 'Visa Electron (Nội địa)';
			}
			else if ( method.value == 'oxxo' && providerPaymentMethod == 48 )
			{
				$('payment_method_review_text').innerHTML = 'OXXO';
			}
			else if ( method.value == 'toditocash' && providerPaymentMethod == 49 )
			{
				$('payment_method_review_text').innerHTML = 'Todito Cash';
			}
			else if ( method.value == 'carnet' && providerPaymentMethod == 50 )
			{
				$('payment_method_review_text').innerHTML = 'Carnet';
			}
			else if ( method.value == 'spei' && providerPaymentMethod == 51 )
			{
				$('payment_method_review_text').innerHTML = 'SPEI';
			}
			else if ( method.value == '3pay' && providerPaymentMethod == 52 )
			{
				$('payment_method_review_text').innerHTML = 'Thanh toán qua điện thoại';
			}
			else if ( method.value == 'isbank' && providerPaymentMethod == 53 )
			{
				$('payment_method_review_text').innerHTML = 'Is Bank';
			}
			else if ( method.value == 'garanti' && providerPaymentMethod == 54 )
			{
				$('payment_method_review_text').innerHTML = 'Garanti';
			}
			else if ( method.value == 'akbank' && providerPaymentMethod == 55 )
			{
				$('payment_method_review_text').innerHTML = 'Akbank';
			}
			else if ( method.value == 'yapikredi' && providerPaymentMethod == 56 )
			{
				$('payment_method_review_text').innerHTML = 'Yapi Kredi';
			}
			else if ( method.value == 'halkbank' && providerPaymentMethod == 57 )
			{
				$('payment_method_review_text').innerHTML = 'Halkbank';
			}
			else if ( method.value == 'bankasya' && providerPaymentMethod == 58 )
			{
				$('payment_method_review_text').innerHTML = 'Bank Asya';
			}
			else if ( method.value == 'finansbank' && providerPaymentMethod == 59 )
			{
				$('payment_method_review_text').innerHTML = 'Finansbank';
			}
			else if ( method.value == 'denizbank' && providerPaymentMethod == 60 )
			{
				$('payment_method_review_text').innerHTML = 'DenizBank';
			}
			else if ( method.value == 'ptt' && providerPaymentMethod == 61 )
			{
				$('payment_method_review_text').innerHTML = 'PTT';
			}
			else if ( method.value == 'cashu' && providerPaymentMethod == 62 )
			{
				$('payment_method_review_text').innerHTML = 'CashU';
			}
			else if ( method.value == 'onecard' && providerPaymentMethod == 66 )
			{
				$('payment_method_review_text').innerHTML = 'OneCard';
			}
			else if ( method.value == 'tenpay' && providerPaymentMethod == 84 )
			{
				$('payment_method_review_text').innerHTML = 'Tenpay';
			}
			else if ( method.value == 'wechat' && providerPaymentMethod == 85 )
			{
				$('payment_method_review_text').innerHTML = 'WeChat';
			}
			else if ( method.value == 'molpoints' && providerPaymentMethod == 31 )
			{
				$('payment_method_review_text').innerHTML = 'MOL Points';
			}
			else if ( method.value == 'konbini' && providerPaymentMethod == 34 )
			{
				$('payment_method_review_text').innerHTML = 'Konbini';
			}
			else if ( method.value == 'credit_card_japan' && providerPaymentMethod == 36 )
			{
				$('payment_method_review_text').innerHTML = 'Thẻ tín dụng (Nội địa)';
			}
			else if ( method.value == 'bank_transfer_japan' && providerPaymentMethod == 37 )
			{
				$('payment_method_review_text').innerHTML = 'Giao dịch ngân hàng (Nhật bản)';
			}
			else if ( method.value == 'payeasy' && providerPaymentMethod == 38 )
			{
				$('payment_method_review_text').innerHTML = 'Pay Easy';
			}
			else if ( method.value == 'webmoney_japan' && providerPaymentMethod == 65 )
			{
				$('payment_method_review_text').innerHTML = 'WebMoney';
			}
			else if ( method.value == 'webmoney_japan_steam_card' && providerPaymentMethod == 125 )
			{
				$('payment_method_review_text').innerHTML = 'Thẻ Steam trả trước';
			}
			else if ( method.value == 'bitcash' && providerPaymentMethod == 81 )
			{
				$('payment_method_review_text').innerHTML = 'BitCash';
			}
			else if ( method.value == 'netcash' && providerPaymentMethod == 82 )
			{
				$('payment_method_review_text').innerHTML = 'NetCash';
			}
			else if ( method.value == 'nanaco' && providerPaymentMethod == 83 )
			{
				$('payment_method_review_text').innerHTML = 'nanacoギフト';
			}
			else if ( method.value == 'zong' && providerPaymentMethod == 39 )
			{
				$('payment_method_review_text').innerHTML = 'Zong';
			}
			else if ( method.value == 'culturevoucher' && providerPaymentMethod == 40 )
			{
				$('payment_method_review_text').innerHTML = 'Culture Voucher';
			}
			else if ( method.value == 'happymoneyvoucher' && providerPaymentMethod == 42 )
			{
				$('payment_method_review_text').innerHTML = 'Happymoney Voucher';
			}
			else if ( method.value == 'toss' && providerPaymentMethod == 127 )
			{
				$('payment_method_review_text').innerHTML = 'Toss';
			}
			else if ( method.value == 'payco' && providerPaymentMethod == 135 )
			{
				$('payment_method_review_text').innerHTML = 'PAYCO';
			}
			else if ( method.value == 'mobile_wallet_japan' && providerPaymentMethod == 136 )
			{
				$('payment_method_review_text').innerHTML = 'Ví di động';
			}
			else if ( method.value == 'eclubpoints' && providerPaymentMethod == 35 )
			{
				$('payment_method_review_text').innerHTML = 'Điểm eClub';
			}
			else if ( method.value == 'pse' && providerPaymentMethod == 67 )
			{
				$('payment_method_review_text').innerHTML = 'PSE';
			}
			else if ( method.value == 'exito' && providerPaymentMethod == 68 )
			{
				$('payment_method_review_text').innerHTML = 'Éxito';
			}
			else if ( method.value == 'efecty' && providerPaymentMethod == 69 )
			{
				$('payment_method_review_text').innerHTML = 'Efecty';
			}
			else if ( method.value == 'baloto' && providerPaymentMethod == 70 )
			{
				$('payment_method_review_text').innerHTML = 'Baloto';
			}
			else if ( method.value == 'pinvalidda' && providerPaymentMethod == 71 )
			{
				$('payment_method_review_text').innerHTML = 'Payvalida';
			}
			else if ( method.value == 'mangirkart' && providerPaymentMethod == 72 )
			{
				$('payment_method_review_text').innerHTML = 'Mangır Kart';
			}
			else if ( method.value == 'bancocreditodeperu' && providerPaymentMethod == 73 )
			{
				$('payment_method_review_text').innerHTML = 'Banco Crédito de Perú';
			}
			else if ( method.value == 'bbvacontinental' && providerPaymentMethod == 74 )
			{
				$('payment_method_review_text').innerHTML = 'BBVA';
			}
			else if ( method.value == 'safetypay' && providerPaymentMethod == 75 )
			{
				$('payment_method_review_text').innerHTML = 'SafetyPay';
			}
			else if ( method.value == 'pagoefectivo' && providerPaymentMethod == 76 )
			{
				$('payment_method_review_text').innerHTML = 'PagoEfectivo';
			}
			else if ( method.value == 'trustly' && providerPaymentMethod == 77 )
			{
				$('payment_method_review_text').innerHTML = 'Trustly';
			}
			else if ( method.value == 'bitcoin' && providerPaymentMethod == 79 )
			{
				$('payment_method_review_text').innerHTML = 'Bitcoin';
			}
			else if ( method.value == 'nodwin_cod' && providerPaymentMethod == 86 )
			{
				$('payment_method_review_text').innerHTML = 'Thanh toán khi giao hàng';
			}
			else if ( method.value == 'credit_card_india' && providerPaymentMethod == 87 )
			{
				$('payment_method_review_text').innerHTML = 'Thẻ tín dụng (Nội địa)';
			}
			else if ( method.value == 'debit_card_india' && providerPaymentMethod == 88 )
			{
				$('payment_method_review_text').innerHTML = 'Thẻ ghi nợ (Nội địa)';
			}
			else if ( method.value == 'net_banking_india' && providerPaymentMethod == 89 )
			{
				$('payment_method_review_text').innerHTML = 'Ngân hàng trực tuyến';
			}
			else if ( method.value == 'cash_card_india' && providerPaymentMethod == 90 )
			{
				$('payment_method_review_text').innerHTML = 'Cash Card';
			}
			else if ( method.value == 'wallet_india' && providerPaymentMethod == 91 )
			{
				$('payment_method_review_text').innerHTML = 'Ví trả trước (Nội địa)';
			}
			else if ( method.value == 'korean_mobile' && providerPaymentMethod == 92 )
			{
				$('payment_method_review_text').innerHTML = 'Thanh toán qua điện thoại';
			}
			else if ( method.value == 'naranja' && providerPaymentMethod == 93 )
			{
				$('payment_method_review_text').innerHTML = 'Naranja';
			}
			else if ( method.value == 'cencosud' && providerPaymentMethod == 94 )
			{
				$('payment_method_review_text').innerHTML = 'Cencosud';
			}
			else if ( method.value == 'cabal' && providerPaymentMethod == 95 )
			{
				$('payment_method_review_text').innerHTML = 'Cabal';
			}
			else if ( method.value == 'pagofacil' && providerPaymentMethod == 96 )
			{
				$('payment_method_review_text').innerHTML = 'Pago Fácil';
			}
			else if ( method.value == 'rapipago' && providerPaymentMethod == 97 )
			{
				$('payment_method_review_text').innerHTML = 'Rapipago';
			}
			else if ( method.value == 'banconacionaldecostarica' && providerPaymentMethod == 98 )
			{
				$('payment_method_review_text').innerHTML = 'Banco Nacional De Costa Rica';
			}
			else if ( method.value == 'bancopoplar' && providerPaymentMethod == 99 )
			{
				$('payment_method_review_text').innerHTML = 'Banco Popular';
			}
			else if ( method.value == 'redpagos' && providerPaymentMethod == 100 )
			{
				$('payment_method_review_text').innerHTML = 'RedPagos';
			}
			else if ( method.value == 'spe' && providerPaymentMethod == 101 )
			{
				$('payment_method_review_text').innerHTML = 'SPE';
			}
			else if ( method.value == 'multicaja' && providerPaymentMethod == 102 )
			{
				$('payment_method_review_text').innerHTML = 'Multicaja';
			}
			else if ( method.value == 'redcompra' && providerPaymentMethod == 103 )
			{
				$('payment_method_review_text').innerHTML = 'Redcompra';
			}
			else if ( method.value == 'ziraatbank' && providerPaymentMethod == 104 )
			{
				$('payment_method_review_text').innerHTML = 'Ziraat Bankası';
			}
			else if ( method.value == 'vakiflarbank' && providerPaymentMethod == 105 )
			{
				$('payment_method_review_text').innerHTML = 'VakıfBank';
			}
			else if ( method.value == 'kuveytturkbank' && providerPaymentMethod == 106 )
			{
				$('payment_method_review_text').innerHTML = 'Kuveyt Türk';
			}
			else if ( method.value == 'ekonomibank' && providerPaymentMethod == 107 )
			{
				$('payment_method_review_text').innerHTML = 'TEB';
			}
			else if ( method.value == 'pichincha' && providerPaymentMethod == 108 )
			{
				$('payment_method_review_text').innerHTML = 'Pichincha';
			}
			else if ( method.value == 'pichinchacash' && providerPaymentMethod == 109 )
			{
				$('payment_method_review_text').innerHTML = 'PichinchaCash';
			}
			else if ( method.value == 'przelewy24' && providerPaymentMethod == 110 )
			{
				$('payment_method_review_text').innerHTML = 'Przelewy24';
			}
			else if ( method.value == 'trustpay' && providerPaymentMethod == 111 )
			{
				$('payment_method_review_text').innerHTML = 'TrustPay';
			}
			else if ( method.value == 'poli' && providerPaymentMethod == 112 )
			{
				$('payment_method_review_text').innerHTML = 'POLi';
			}
			else if ( method.value == 'mercadopago' && providerPaymentMethod == 113 )
			{
				$('payment_method_review_text').innerHTML = 'Mercado Pago';
			}
			else if ( method.value == 'payu' && providerPaymentMethod == 114 )
			{
				$('payment_method_review_text').innerHTML = 'PayU';
			}
			else if ( method.value == 'vtcpaywallet' && providerPaymentMethod == 115 )
			{
				$('payment_method_review_text').innerHTML = 'Ví điện tử VTC Pay';
			}
			else if ( method.value == 'vtcpaycards' && providerPaymentMethod == 119 )
			{
				$('payment_method_review_text').innerHTML = 'Thẻ tín dụng nội địa';
			}
			else if ( method.value == 'vtcpayonlinebanking' && providerPaymentMethod == 120 )
			{
				$('payment_method_review_text').innerHTML = 'Ngân hàng trực tuyến';
			}
			else if ( method.value == 'mrcash' && providerPaymentMethod == 116 )
			{
				$('payment_method_review_text').innerHTML = 'Bancontact';
			}
			else if ( method.value == 'eps' && providerPaymentMethod == 117 )
			{
				$('payment_method_review_text').innerHTML = 'EPS';
			}
			else if ( method.value == 'interac' && providerPaymentMethod == 118 )
			{
				$('payment_method_review_text').innerHTML = 'Interac';
			}
			else if ( method.value == 'santanderrio' && providerPaymentMethod == 63 )
			{
				$('payment_method_review_text').innerHTML = 'Santander Rio';
			}
			else if ( method.value == 'cafefunded' && providerPaymentMethod == 122 )
			{
				$('payment_method_review_text').innerHTML = 'Giao dịch trực tiếp: ' + sSiteName;
			}
			else if ( method.value == 'valve' && providerPaymentMethod == 129 )
			{
				$('payment_method_review_text').innerHTML = 'Không';
			}
			else if ( method.value == 'boletoflash' && providerPaymentMethod == 137 )
			{
				$('payment_method_review_text').innerHTML = 'Boleto Flash';
			}
			else if ( method.value == 'pix' && providerPaymentMethod == 138 )
			{
				$('payment_method_review_text').innerHTML = 'Pix';
			}
			else if ( method.value == 'gcash' && providerPaymentMethod == 139 )
			{
				$('payment_method_review_text').innerHTML = 'GCash';
			}
			else if ( method.value == 'kakaopay' && providerPaymentMethod == 140 )
			{
				$('payment_method_review_text').innerHTML = 'KakaoPay';
			}
			else if ( method.value == 'dana' && providerPaymentMethod == 141 )
			{
				$('payment_method_review_text').innerHTML = 'Dana';
			}
			else if ( method.value == 'truemoney' && providerPaymentMethod == 142 )
			{
				$('payment_method_review_text').innerHTML = 'TrueMoney';
			}
			else if ( method.value == 'touchngo' && providerPaymentMethod == 143 )
			{
				$('payment_method_review_text').innerHTML = 'Touch \'n Go';
			}
			else if ( method.value == 'linepay' && providerPaymentMethod == 144 )
			{
				$('payment_method_review_text').innerHTML = 'LINE Pay';
			}
			else if ( method.value == 'merpay' && providerPaymentMethod == 145 )
			{
				$('payment_method_review_text').innerHTML = 'Merpay';
			}
			else if ( method.value == 'paypay' && providerPaymentMethod == 146 )
			{
				$('payment_method_review_text').innerHTML = 'PayPay';
			}
			else if ( method.value == 'alfaclick' && providerPaymentMethod == 147 )
			{
				$('payment_method_review_text').innerHTML = 'Alfa-Click';
			}
			else if ( method.value == 'sberbank' && providerPaymentMethod == 148 )
			{
				$('payment_method_review_text').innerHTML = 'SberBank';
			}
			else if ( method.value == 'yoomoney' && providerPaymentMethod == 149 )
			{
				$('payment_method_review_text').innerHTML = 'YooMoney';
			}
			else if ( method.value == 'tinkoff' && providerPaymentMethod == 150 )
			{
				$('payment_method_review_text').innerHTML = 'Tinkoff';
			}
			else if ( method.value == 'cashincis' && providerPaymentMethod == 151 )
			{
				$('payment_method_review_text').innerHTML = 'CASH';
			}
			else if ( method.value == 'aupay' && providerPaymentMethod == 152 )
			{
				$('payment_method_review_text').innerHTML = 'au PAY';
			}
			else if ( method.value == 'alipayhk' && providerPaymentMethod == 153 )
			{
				$('payment_method_review_text').innerHTML = 'AliPayHK';
			}
			else if ( method.value == 'naverpay' && providerPaymentMethod == 154 )
			{
				$('payment_method_review_text').innerHTML = 'NaverPay';
			}
			else if ( method.value == 'linkaja' && providerPaymentMethod == 155 )
			{
				$('payment_method_review_text').innerHTML = 'Linkaja';
			}
			else if ( method.value == 'shopeepay' && providerPaymentMethod == 156 )
			{
				$('payment_method_review_text').innerHTML = 'ShopeePay';
			}
			else if ( method.value == 'grabpay' && providerPaymentMethod == 157 )
			{
				$('payment_method_review_text').innerHTML = 'GrabPay';
			}
			else if ( method.value == 'paynow' && providerPaymentMethod == 158 )
			{
				$('payment_method_review_text').innerHTML = 'PayNow';
			}
			else if ( method.value == 'onlinebankingthailand' && providerPaymentMethod == 159 )
			{
				$('payment_method_review_text').innerHTML = 'Ngân hàng trực tuyến';
			}
			else if ( method.value == 'cashoptionsthailand' && providerPaymentMethod == 160 )
			{
				$('payment_method_review_text').innerHTML = 'Tùy chọn tiền mặt';
			}
			else if ( method.value == 'blik' && providerPaymentMethod == 161 )
				{
					$('payment_method_review_text').innerHTML = 'Blik';
				}
			}

		$J('#review_address_body').text( $('first_name').value+' '+$('last_name').value+' ' );
		$J('#review_address_body').append( '<br>', document.createTextNode( $('billing_address').value+' ' ) );
		if ( $('billing_address_two').value.length > 0 )
		{
			$J('#review_address_body').append( '<br>', document.createTextNode($('billing_address_two').value+' ' ) );
		}
		if ( g_bHasBillingStates )
		{
			$J('#review_address_body').append( '<br>', document.createTextNode( $('billing_city').value+', '+$('billing_state_select_trigger').text+', '+$('billing_postal_code').value+' ' ) );
		}
		else
		{
			$J('#review_address_body').append( '<br>', document.createTextNode( $('billing_city').value+', '+$('billing_state_text').value+', '+$('billing_postal_code').value+' ' ) );
		}
		$J('#review_address_body').append( '<br>', document.createTextNode(  $('billing_country').value ) );

		if ( g_bRequiresShipping )
		{
			$J('#shipping_review_name').text( $('shipping_first_name').value+' '+$('shipping_last_name').value );
			$J('#review_shipping_address_body').text( $('shipping_address').value );
			if ( $('shipping_address_two').value.length > 0 )
			{
				$J('#review_shipping_address_body').append( '<br>', document.createTextNode( $('shipping_address_two').value ) );
			}

			if ( g_bHasBillingStates )
			{
				$J('#review_shipping_address_body').append( '<br>', document.createTextNode( $('shipping_city').value+', '+$('shipping_state_select').value ) );
			}
			else
			{
				$J('#review_shipping_address_body').append( '<br>', document.createTextNode( $('shipping_city').value+', '+$('shipping_state_text').value ) );
			}

			$J('#review_shipping_address_body').append( '<br>', document.createTextNode( $('shipping_postal_code').value ) );
			$J('#review_shipping_address_body').append( '<br>', document.createTextNode( $('shipping_country').value ) );
		}
		else
		{
			$('checkout_review_shipping_address_area').style.display = 'none';
		}

		$J('#review_phone_body').text( $('billing_phone').value );


				if( $('checkout_review_gift_willbesent') && $('checkout_review_gift_willbekept') )
		{
			if ( $('send_self') && $('send_self').checked )
			{
				$('checkout_review_gift_willbesent').hide();
				$('checkout_review_gift_willbekept').show();
			}
			else
			{
				var rtFutureDate = GatherScheduledSendFields();
				if ( rtFutureDate )
				{
					$('checkout_review_gift_willbesent').update( 'Quà bạn mua cho %1$s sẽ được gửi vào %2$s.'.replace( /%1\$s/, currently_selected_friend_name ).replace( /%2\$s/, new Date( rtFutureDate * 1000 ).toLocaleString() ) );
				}
				else
				{
					$('checkout_review_gift_willbesent').update( 'Quà bạn mua cho &nbsp;<span id="giftee_name_review"></span>&nbsp;sẽ được gửi sau khi bạn hoàn tất thanh toán.' );
				}
				$('checkout_review_gift_willbesent').show();
				$('checkout_review_gift_willbekept').hide();
			}
		}

		var $giftee_name_review = $J('#giftee_name_review');
		if ( $giftee_name_review.length )
		{
			if ( $( 'send_via_email' ) && $( 'send_via_email' ).checked )
			{
				$giftee_name_review.text( $( 'email_input' ).value );
			}
			else
			{
				// this value is already escaped
				$giftee_name_review.html( currently_selected_friend_name );
			}
		}

		if ( $('checkout_review_gift_refundnote_wallet') )
		{
			if ( method.value == 'steamaccount' && providerPaymentMethod == 0 )
			{
				$('checkout_review_gift_refundnote_wallet').hide();
			}
			else
			{
				$('checkout_review_gift_refundnote_wallet').show();
			}
		}

				if ( price_data )
		{
			if ( price_data.base )
				$('review_subtotal_value').innerHTML = price_data.formattedSubTotal;
			else
				$('review_subtotal_value').innerHTML = '';
			if ( price_data.totalloyaltypoints > 0 )
			{
				$('checkout_steam_rewards_banner_to_earn').show();
				$('checkout_receipt_steam_rewards').show();
				$('reward_points_to_earn').innerHTML = price_data.formattedTotalLoyaltyPoints;
				$('reward_points_earned').innerHTML = price_data.formattedTotalLoyaltyPoints;
			}
			else
			{
				$('checkout_steam_rewards_banner_to_earn').hide();
				$('checkout_receipt_steam_rewards').hide();
			}
			// deal with promotion elements
			var promotionNodes = document.getElementsByClassName('cart_total_row_promotion');

			for (var i = 0; i < promotionNodes.length; i++)
			{
				promotionNodes[i].parentNode.removeChild(element);
			}

			if ( price_data.promotions || price_data.nRewardDiscountAmount > 0 )
			{
				var oldElements = document.getElementsByClassName('cart_row_promotion');

				while(oldElements[0])
				{
					oldElements[0].parentNode.removeChild(oldElements[0]);
				}

				var insertNode = $( 'cart_price_summary' );
				if ( price_data.nRewardDiscountAmount > 0 )
				{
					var newElement = document.createElement('div');
					newElement.className = 'cart_total_row cart_row_promotion';
					newElement.setAttribute( 'id', 'cart_price_summary_text' );

					var newPrice = document.createElement('div');
					newPrice.className = 'price';
					newPrice.innerHTML = price_data.strRewardDiscountAmount;
					newElement.appendChild(newPrice);

					var newDescription = document.createElement('div');
					newDescription.innerHTML =  'Ưu đãi qua phần thưởng Steam:';
					newElement.appendChild( newDescription);
					insertNode.parentNode.insertBefore( newElement, insertNode.nextSibling );

					insertNode = newElement;
				}
				for ( var i = 0; i < price_data.promotions.length; i++ )
				{
					var newElement = document.createElement('div');
					newElement.className = 'cart_total_row cart_total_row_promotion cart_row_promotion';
					newElement.setAttribute( 'id', 'cart_price_summary_text' );

					var newPrice = document.createElement('div');
					newPrice.className = 'price';
					newPrice.innerHTML = price_data.promotions[i].formattedDiscount;
					newElement.appendChild(newPrice);

					var newDescription = document.createElement('div');
					newDescription.innerHTML = price_data.promotions[i].description;
					newElement.appendChild( newDescription);
					insertNode.parentNode.insertBefore( newElement, insertNode.nextSibling );

					insertNode = newElement;
				}

				$('cart_price_summary_discounted_subtotal').style.display =  'block';
				$('review_discounted_subtotal_value').style.display = 'block';
				$('review_discounted_subtotal_value').innerHTML = price_data.formattedDiscountedSubTotal;
			}
			else
			{
				$('cart_price_summary_discounted_subtotal').style.display =  'none';
				$('review_discounted_subtotal_value').style.display = 'none';
			}

			if ( price_data.formattedTax && price_data.formattedTax != '' )
			{
				$('review_taxes_value').innerHTML = price_data.formattedTax;
				$('cart_price_summary_taxes').style.display = 'block';
				$('review_taxes_value').style.display = 'block';

				if ( price_data.taxdetails.billing.state != '' || ( g_bRequiresShipping && price_data.taxdetails.shipping.state != '') )
				{
					var taxState = '';
					if ( price_data.taxdetails.billing.state != '' )
					{
						taxState = price_data.taxdetails.billing.state;
						if ( g_bRequiresShipping && price_data.taxdetails.shipping.state != '' && price_data.taxdetails.shipping.state != taxState )
						{
							taxState = taxState + '/' + price_data.taxdetails.shipping.state;
							$('cart_price_summary_taxes_different_shipping').style.display = 'inline-block';
						}
						else
						{
							$('cart_price_summary_taxes_different_shipping').style.display = 'none';
						}
					}
					else if ( g_bRequiresShipping )
					{
						taxState = price_data.taxdetails.shipping.state;
						$('cart_price_summary_taxes_different_shipping').style.display = 'inline-block';
					}
					$('cart_price_summary_taxes_text').innerHTML = 'Thuế' + ' (' + taxState + ')';
				}
				else
				{
					$('cart_price_summary_taxes_different_shipping').style.display = 'none';
					$('cart_price_summary_taxes_text').innerHTML = 'Thuế';
				}
			}
			else
			{
				$('cart_price_summary_taxes').style.display =  'none';
				$('review_taxes_value').style.display = 'none';
			}

			if ( price_data.formattedShipping && price_data.formattedShipping != '' )
			{
				$('review_shipping_value').innerHTML = price_data.formattedShipping;
				$('cart_price_summary_shipping').style.display = 'block';
				$('review_shipping_value').style.display = 'block';
			}
			else
			{
				$('cart_price_summary_shipping').style.display =  'none';
				$('review_shipping_value').style.display = 'none';
			}

			if ( price_data.formattedImportFee && price_data.formattedImportFee != '' )
			{
				$('review_import_fee_value').innerHTML = price_data.formattedImportFee;
				$('cart_price_summary_import_fee').style.display = 'block';
				$('review_import_fee_value').style.display = 'block';
			}
			else
			{
				$('cart_price_summary_import_fee').style.display =  'none';
				$('review_import_fee_value').style.display = 'none';
			}

			if ( price_data.formattedRecyclingFee && price_data.formattedRecyclingFee != '' )
			{
				$('review_recycling_fee_value').innerHTML = price_data.formattedRecyclingFee;
				$('cart_price_summary_recycling_fee').style.display = 'block';
				$('review_recycling_fee_value').style.display = 'block';
			}
			else
			{
				$('cart_price_summary_recycling_fee').style.display =  'none';
				$('review_recycling_fee_value').style.display = 'none';
			}

			if ( price_data.formattedDepositApplied && price_data.formattedDepositApplied != '' )
			{
				$('review_deposit_value').innerHTML = price_data.formattedDepositApplied;
				$('cart_price_summary_deposit').style.display = 'block';
				$('review_deposit_value').style.display = 'block';
			}
			else
			{
				$('cart_price_summary_deposit').style.display =  'none';
				$('review_deposit_value').style.display = 'none';
			}

			if ( price_data.base )
				$('review_total_value').innerHTML = price_data.formattedTotal;
			else
				$('review_total_value').innerHTML = '';

			$('checkout_review_cart_area').innerHTML = price_data.lineItemsHTML;

			// bugbug - kurt - show promotion discount data?

			if ( price_data.taxNotice && price_data.taxNotice != '' )
			{
				$('checkout_review_tax_notice').innerHTML = price_data.taxNotice;
				$('checkout_review_tax_notice').style.display = 'block';
			}
			else
			{
				$('checkout_review_tax_notice').style.display = 'none';
			}

			if ( price_data.purchaseNotice && price_data.purchaseNotice != '' )
			{
				//in V5, this is a seperate notice
				$('checkout_review_purchase_notice').innerHTML = price_data.purchaseNotice;
				$('checkout_review_purchase_notice_area').show();
			}
		}
	}
	catch(e)
	{
		ReportCheckoutJSError( 'Failed updating review page with new billing/pricing data', e );
	}
}



function NewSetTabEnabledClosure( a_tab_name )
{
	var tab_name = a_tab_name;
	return function() { SetTabEnabled( tab_name ) };
}

function NavigateToPreviousTab()
{
    if ( g_bPayPalAuthInFlight )
    {
        //swallow these because we cant interact with the paypal iframe and we dont want to nav around behind the window
        return true;
    }

    for( var i=0; i < rgValidTabs.length; ++i )
    {
        var curTab = rgValidTabs[i];

		        if ( $(rgValidTabs[i] + '_tab_select').className == 'cart_tab_on' )
        {
            if ( i == 0 )
                return false;

            var prevTag = rgValidTabs[i-1];
            SetTabEnabled( prevTag );
            return true;
        }
    }

    return false;
}


function SetTabEnabled( tab_name, bResetTab )
{

		if ( bResetTab == undefined )
		bResetTab = true;

		try
	{
		if ( g_bFinalizeTransactionInProgress )
			return;
	}
	catch( e )
	{
	}

		if ( g_timeoutPoll )
	{
		clearTimeout( g_timeoutPoll );
	}
	g_timeoutPoll = false;
	g_bPollingForTransactionStatus = false;

	try
	{
				var bTabNameOK = false;
		for( var i=0; i < rgValidTabs.length; ++i )
		{
			if ( rgValidTabs[i] == tab_name )
			{
				bTabNameOK = true;
				break;
			}
		}

				if ( !bTabNameOK )
			return;

		if ( $( 'checkout_page_content' ) )
			$( 'checkout_page_content' ).className = 'page_content ' + tab_name + '_active';

		for( var i=0; i < rgValidTabs.length; ++i )
		{
			var curTab = rgValidTabs[i];

						if ( curTab != tab_name && $( rgValidTabs[i]+'_tab_select' ).className == 'cart_tab_on' )
			{
				$( curTab+'_tab_select' ).className = 'cart_tab_inactive';
				$( curTab+'_tab_select_left' ).className = 'cart_tab_left_inactive';
				$( curTab+'_tab_select_right' ).className = 'cart_tab_right_inactive';
				$J('#'+curTab+'_tab_select').data( 'gpFocusDisabled', false );

																if ( curTab == 'review' )
					$( curTab+'_tab_select' ).onclick = function() { SubmitPaymentInfoForm(); };
				else
					$( curTab+'_tab_select' ).onclick = NewSetTabEnabledClosure( curTab );

				$( curTab+'_tab' ).style.display = 'none';
				$( 'col_right_'+curTab ).style.display = 'none';
				if ( $('footer_note_'+curTab) ) $('footer_note_'+curTab).hide();
			}
			else if ( curTab == tab_name )
			{
				$( curTab+'_tab_select' ).className = 'cart_tab_on';
				$( curTab+'_tab_select_left' ).className = 'cart_tab_left_on';
				$( curTab+'_tab_select_right' ).className = 'cart_tab_right_on';
				$( curTab+'_tab_select' ).onclick = function() { return true; };
				$J('#'+curTab+'_tab_select').data( 'gpFocusDisabled', true );
				$( curTab+'_tab' ).style.display = 'block';
				$( 'col_right_'+curTab ).style.display = 'block';
				if ( $('footer_note_'+curTab) ) $('footer_note_'+curTab).show();

				if ( rgFocusOnTabSelect && rgFocusOnTabSelect[curTab] )
				{
										try {
						$( rgFocusOnTabSelect[curTab] ).focus();
					} catch(e) {
											}
				}

				if ( bResetTab && curTab == 'payment_info' )
				{
										ShowFirstPaymentStep();
				}
			}
			else
			{
				$J('#'+curTab+'_tab_select').data( 'gpFocusDisabled', true );
			}
		}

		if ( curTab == 'review' && typeof GPNavFocusChild !== 'undefined' && BStoredCreditCardRequiresSecurityCode( $('payment_method').value ) )
		{
						GPNavFocusChild( $J( '#security_code_cached' ) );
			ScrollToIfNotInView( $J('#security_code_cached'), null, 20 );
		}
		else
		{
						ScrollToIfNotInView( $J('#checkout_pipeline'), null, 20 );
		}

				$('error_display').innerHTML = '';
		$('error_display').style.display = 'none';

				$('footer').hide();
		$('footer').show();
	}
	catch(e)
	{
		ReportCheckoutJSError( 'Failed in SetTabEnabled(\''+tab_name+'\')', e );
	}

}

function UpdateGiftTextCharsRemaining()
{
	try
	{
		var element = $( 'gift_message_text' );
		if ( !element )
			return;

		var len = element.value.length;
		if ( len > 160 )
		{
			element.value = element.value.substring( 0, 160 );
		}

		var remaining = 160 - Math.min( len, 160 );
		$( 'message_chars_left' ).innerHTML = remaining;
	}
	catch(e)
	{
		ReportCheckoutJSError( 'Failed in UpdateGiftTextCharsRemaining', e );
	}
}

function HandleFinalizeTransactionFailure( ePaymentType, eErrorDetail, bShowBRSpecificCreditCardError, sErrorText )
{
	try
	{
		var error_text = '';

		if ( sErrorText && sErrorText != '' )
		{
			error_text = sErrorText;
		}
		else
		{
			switch ( ePaymentType )
			{
				case 2:
				{
					if ( bShowBRSpecificCreditCardError && (
						eErrorDetail == 1						|| eErrorDetail == 4						|| eErrorDetail == 0						|| eErrorDetail == 2						|| eErrorDetail == 13						)
					)
					{
						error_text = 'Giao dịch tín dụng của bạn bị từ chối.<br/><br/>Vài ngân hàng Brazil có thể từ chối những mua sắm với thẻ tín dụng quốc tế khi mua ở các cửa hàng nước ngoài hỗ trợ đồng Real. Chúng tôi đề nghị bạn thử giao dịch lại, chọn phiên bản quốc gia của loại thẻ của bạn hoặc hình thức trả khác.';
					}
					else
					{
						switch ( eErrorDetail )
						{
							default:
							case 3:
							case 8:
							case 9:
							case 7:
							case 11:
							case 57:
								error_text = 'Một lỗi không ngờ đã xảy ra. Việc mua hàng của bạn chưa hoàn thành.<br>Vui lòng chờ vài phút rồi thử lại.<br>Nếu bạn vẫn gặp phải vấn đề này, hãy liên hệ <a href="http://support.steampowered.com">đội hỗ trợ Steam</a>.';
								break;
							case 1:
								error_text = 'Việc mua hàng của bạn không hoàn thành. Thông tin thẻ tín dụng của bạn đã bị từ chối bởi công ty phát hành thẻ do địa chỉ nhập vào chưa được chính xác.<br><br>Xin lưu ý rằng trong một số trường hợp, công ty phát hành thẻ có thể \'giữ\' tiền trong tài khoản của bạn, nhưng bạn sẽ không bị tính tiền. Sau khi đã sửa lại bất kì lỗi nào đang hiển thị ở dưới, xin vui lòng thử mua hàng lại.';
								break;
							case 4:
								error_text = 'Máy tính của bạn hoặc đang không thể kết nối đến các máy chủ Steam, hoặc do dịch vụ liên quan đang tạm thời bị vô hiệu hóa. Xin vui lòng thử lại sau.';
								break;
							case 0:
							case 86:
								error_text = 'Việc mua hàng của bạn không hoàn thành. Thông tin thẻ tín dụng của bạn đã bị từ chối bởi công ty phát hành thẻ.<br><br>Xin lưu ý rằng trong một số trường hợp, công ty phát hành thẻ có thể \'giữ\' tiền trong tài khoản của bạn, nhưng bạn sẽ không bị tính tiền. Sau khi đã sửa lại bất kì lỗi nào đang hiển thị ở dưới, xin vui lòng thử mua hàng lại.';
								break;
							case 2:
								error_text = 'Việc mua hàng của bạn không hoàn thành. Thông tin thẻ tín dụng của bạn đã bị từ chối bởi công ty phát hành thẻ vì không đủ tiền trong tài khoản.<br><br>Xin lưu ý rằng trong một số trường hợp, công ty phát hành thẻ có thể \'giữ\' tiền trong tài khoản của bạn, nhưng bạn sẽ không bị tính tiền.';
								break;
							case 13:
								error_text = 'Xin lỗi, một trong những vật phẩm bạn đang mua không thể được mua được tại nước này. Giao dịch của bạn đã bị hủy bỏ.';
								break;
							case 35:
								error_text = 'Việc mua hàng của bạn không hoàn thành.<br>Số tiền thêm vào Ví tiền Steam của bạn đã vượt quá giới hạn tối đa được cho phép trong Ví tiền Steam.';
								break;
							case 44:
								error_text = 'Giao dịch của bạn đã không hoàn thành. Chức năng thanh toán của tài khoản bạn hiện đang bị khóa. Xin hãy liên lạc đội hỗ trợ Steam để biết thêm chi tiết.';
								break;
							case 46:
								error_text = 'Vì sự an toàn của chủ khoản, giao dịch này đã bị hủy. Các lần mua hàng tiếp theo sẽ tạm bị giới hạn - xin vui lòng liên hệ đội hỗ trợ Steam để giải quyết vấn đề này.';
								break;
						}
					}
				}
				break;

				default:
				{
					if ( ePaymentType == 122 && g_winExternal )
					{
						g_winExternal.close();
						g_winExternal = false;
					}

					switch ( eErrorDetail )
					{
						default:
						case 3:
						case 8:
						case 9:
						case 7:
						case 11:
						case 57:
							error_text = 'Một lỗi không ngờ đã xảy ra. Việc mua hàng của bạn chưa hoàn thành.<br>Vui lòng chờ vài phút rồi thử lại.<br>Nếu bạn vẫn gặp phải vấn đề này, hãy liên hệ <a href="http://support.steampowered.com">đội hỗ trợ Steam</a>.';
							break;
						case 13:
							error_text = 'Xin lỗi, một trong những vật phẩm bạn đang mua không thể được mua được tại nước này. Giao dịch của bạn đã bị hủy bỏ.';
							break;
						case 4:
							error_text = 'Máy tính của bạn hoặc đang không thể kết nối đến các máy chủ Steam, hoặc do dịch vụ liên quan đang tạm thời bị vô hiệu hóa. Xin vui lòng thử lại sau.';
							break;
						case 0:
						case 22:
							error_text = 'Việc mua hàng của bạn không hoàn thành.<br>Bên xử lý thanh toán đã báo thất bại xác nhận thẩm quyền. Xin vui lòng chọn một hình thức thanh toán khác.';
							break;
						case 16:
							error_text = 'Việc mua hàng của bạn không hoàn thành.<br>Bên xử lý thanh toán đã báo thất bại xác nhận thẩm quyền. Xin vui lòng chọn một hình thức thanh toán khác.';
							break;
						case 17:
						case 2:
							error_text = 'Việc mua hàng của bạn không hoàn thành.<br>Bên xử lý thanh toán đã báo một vấn đề với nguồn cấp tiền liên quan đến tài khoản của bạn. Vui lòng <a href=\'javascript:SetTabEnabled("payment_info");\'>chọn một hình thức thanh toán khác</a> hoặc cập nhật nguồn tiền của bạn với PayPal và thử lại.';
							break;
						case 18:
							error_text = 'Việc mua hàng của bạn không hoàn thành.<br>Bên xử lý thanh toán đã báo một vấn đề với địa chỉ liên kết với tài khoản của bạn. Bạn có thể sửa lỗi này thông qua bên xử lý thanh toán, hoặc chọn một hình thức thanh toán khác.';
							break;
						case 19:
							error_text = 'Việc mua hàng của bạn không hoàn thành.<br>Hình thức thanh toán được chọn không hiện hữu tại quốc gia của bạn. Xin vui lòng chọn một hình thức thanh toán khác.';
							break;
						case 20:
							error_text = 'Việc mua hàng của bạn không hoàn thành.<br>Bên xử lý thanh toán đã báo một vấn đề với tài khoản của bạn. Xin vui lòng liên hệ bên xử lý thanh toán hoặc chọn một hình thức thanh toán khác.';
							break;
						case 21:
							error_text = 'Việc mua hàng của bạn không hoàn thành.<br>Bên xử lý thanh toán đã báo rằng tài khoản của bạn cần xác thực hoặc nạp thêm tiền để hoàn thành việc mua hàng này. Xin vui lòng liên hệ bên xử lý thanh toán hoặc chọn một hình thức thanh toán khác.';
							break;
						case 35:
							error_text = 'Việc mua hàng của bạn không hoàn thành.<br>Số tiền thêm vào Ví tiền Steam của bạn đã vượt quá giới hạn tối đa được cho phép trong Ví tiền Steam.';
							break;
						case 44:
							error_text = 'Giao dịch của bạn đã không hoàn thành. Chức năng thanh toán của tài khoản bạn hiện đang bị khóa. Xin hãy liên lạc đội hỗ trợ Steam để biết thêm chi tiết.';
							break;
						case 46:
							error_text = 'Vì sự an toàn của chủ khoản, giao dịch này đã bị hủy. Các lần mua hàng tiếp theo sẽ tạm bị giới hạn - xin vui lòng liên hệ đội hỗ trợ Steam để giải quyết vấn đề này.';
							break;
					}
				}
			}
		}
	}
	catch(e)
	{
		ReportCheckoutJSError( 'Failed choosing error string for FinalizeTransaction failure', e );
	}


	try
	{
				if ( error_text != '' )
		{
			DisplayErrorMessage( error_text );
		}

    		$('credit_card_authentication_area').style.display = 'none';
		$('cart_area').style.display = 'block';
		$('receipt_area').style.display = 'none';
		$('col_right_payment_info').style.display = 'block';
		$('pending_receipt_area').style.display = 'none';
		$('col_right_review').style.display = 'block';

				$J('#purchase_button_bottom').hide();
		$J('#purchase_button_inprogress_bottom').hide();
		$J('#purchase_button_disabled_bottom').show();
		$J('#change_payment_method_button_bottom').show();
		$J('#cancel_button_bottom').show();
	}
	catch( e )
	{
		ReportCheckoutJSError( 'Failed showing error after FinalizeTransaction failure', e );
	}
}

function NukeCartCookie()
{
	try
	{
					var cart = $J('#shopping_cart_gid' ).val() || -1;
			if ( cart != -1 )
			{
								$J.ajax( {
					type: 'post',
					url: 'https://store.steampowered.com/cart/forgetcart',
					data: { 'cart': cart },
					crossDomain: true,
					xhrFields: { withCredentials: true }
				} );
			}
			}
	catch ( e )
	{
		ReportCheckoutJSError( 'Failed nuking cart cookie', e );
	}
}

function OnPurchaseSuccess( result )
{
	try
	{
		if ( g_bIsUpdateBillingInfoForm )
		{
						if ( $('cache_return_url') )
				window.location = $('cache_return_url').value;
			else
				window.location = 'https://store.steampowered.com/account/';
			return true;
		}

		$('receipt_total_price').innerHTML = result.purchasereceipt.formattedTotal;
		$('receipt_confirmation_code').innerHTML = result.purchasereceipt.transactionid;
		$('receipt_track_img').innerHTML = result.strReceiptPageHTML;
				$('reward_points_balance').innerHTML = result.purchasereceipt.rewardPointsBalance;
		
		DisplayReceiptPage();

		if ( result.purchaseresultdetail == 29 )
		{
			$('purchase_summary_area').style.display = 'none';
			$('receipt_error_display').style.display = 'block';

			$('receipt_error_display').innerHTML = 'Giao dịch của bạn đang tiến hành và sẽ được xem xét trong thời gian ngắn. Bạn sẽ được thông báo khi giao dịch đã hoàn thành.';

			Effect.ScrollTo( 'receipt_error_display' );
			new Effect.Highlight( 'receipt_error_display', { endcolor : '#000000', startcolor : '#ff9900' } );
		}

		if ( typeof GDynamicStore != 'undefined' )
			GDynamicStore.InvalidateCache();
	}
	catch( e )
	{
		ReportCheckoutJSError( 'Error updating receipt body', e );
	}

		try
	{
		NukeCartCookie();
		var item_count = $('cart_item_count_value');
		if ( item_count )
			item_count.innerHTML = '0 '+'sản phẩm trong giỏ hàng';
	}
	catch ( e )
	{
		ReportCheckoutJSError( 'Failed nuking cart cookie or updating item_count display', e );
	}

}

function DisplayReceiptPage()
{
	$('cart_area').style.display = 'none';
	$('receipt_area').style.display = 'block';
	$('credit_card_authentication_area').style.display = 'none';
	$('pending_receipt_area').style.display = 'none';

	var method = $('payment_method');
	if ( method.value == 'cafefunded' && g_winExternal )
	{
		g_winExternal.close();
		g_winExternal = false;
	}

	if ( $('checkout_pipeline') && $('receipt_pipeline') )
	{
				$('checkout_pipeline').hide();
		$('receipt_pipeline').show();
	}

	if ( $('checkout_logo_default') && $('checkout_logo_receipt' ) )
	{
				$('checkout_logo_default').hide();
		$('checkout_logo_receipt').show();
	}

	if ( $('col_right_receipt') )
	{
		$('col_right_receipt').siblings().invoke('hide');
		$('col_right_receipt').show();
	}

	if ( $('logsuccessfulpurchase_form') )
	{
		var form = $('logsuccessfulpurchase_form');
		form.request();		}
	Effect.ScrollTo( 'receipt_pipeline' );
	if ( typeof GPNavFocusChild !== 'undefined' )
	{
		GPNavFocusChild( $J( '#library_button' ) );
	}
}


function DisplayPendingReceiptPage()
{
	$('cart_area').style.display = 'none';
	$('col_right_review').style.display = 'none';
	$('pending_receipt_area').style.display = 'block';

	$('pending_receipt_total_price').innerHTML = $('review_total_value').innerHTML;
	$('pending_receipt_confirmation_code').innerHTML = $('transaction_id').value;

	var method = $('payment_method');

	switch ( method.value )
	{
		case 'boleto':
		case 'boacompragold':
		case 'bancodobrasilonline':
		case 'itauonline':
		case 'bradescoonline':
		case 'pagseguro':
		case 'visabrazil':
		case 'amexbrazil':
		case 'hipercard':
		case 'aura':
		case 'mastercardbrazil':
		case 'dinerscardbrazil':
		case 'multibanco':
		case 'payshop':
		case 'maestroboacompra':
		case 'visaelectronboacompra':
		case 'oxxo':
		case 'toditocash':
		case 'carnet':
		case 'spei':
		case '3pay':
		case 'isbank':
		case 'garanti':
		case 'akbank':
		case 'yapikredi':
		case 'halkbank':
		case 'bankasya':
		case 'finansbank':
		case 'denizbank':
		case 'ptt':
		case 'cashu':
		case 'efecty':
		case 'baloto':
		case 'pagoefectivo':
		case 'boletoflash':
			$('pending_purchase_summary_payment_method_description').innerHTML = 'Quá trình mua hàng của bạn đang diễn ra. Chúng tôi hiện đang chờ xác thực từ ngân hàng hoặc bên xử lý thanh toán của bạn. Quá trình này thường mất vài phút.';
			$('pending_purchase_summary_payment_method_notes_text').innerHTML = 'Steam sẽ gửi email hóa đơn khi thanh toán của bạn thành công cho đơn hàng này. Với các thắc mắc về trạng thái xử lý thanh toán, vui lòng liên hệ <a href="https://customer.boacompra.com/en">BoaCompra</a>.';
			break;

		case 'molpoints':
		case 'pagofacil':
		case 'rapipago':
		case 'redpagos':
		case 'santanderrio':
			$('pending_purchase_summary_payment_method_description').innerHTML = 'Quá trình mua hàng của bạn đang diễn ra. Chúng tôi hiện đang chờ xác thực từ ngân hàng hoặc bên xử lý thanh toán của bạn. Quá trình này thường mất vài phút.';
			$('pending_purchase_summary_payment_method_notes_text').innerHTML = 'Steam sẽ gửi email hóa đơn khi thanh toán của bạn thành công cho đơn hàng này.';
			break;

		case 'konbini':
		case 'bank_transfer_japan':
		case 'payeasy':
			$('pending_purchase_summary_payment_method_description').innerHTML = 'Quá trình mua hàng của bạn đang diễn ra. Chúng tôi hiện đang chờ xác thực từ ngân hàng hoặc bên xử lý thanh toán của bạn. Quá trình này thường mất vài phút.';
			$('pending_purchase_summary_payment_method_notes_text').innerHTML = 'Steam sẽ gửi email hóa đơn khi thanh toán của bạn thành công cho đơn hàng này. Với các thắc mắc về trạng thái xử lý thanh toán, vui lòng liên hệ <a href="http://www.degica.com/contact">Degica</a>.';
			break;

		case 'eclubpoints':
			$('pending_purchase_summary_payment_method_description').innerHTML = 'Quá trình mua hàng của bạn đang diễn ra. Chúng tôi hiện đang chờ xác thực từ ngân hàng hoặc bên xử lý thanh toán của bạn. Quá trình này thường mất vài phút.';
			$('pending_purchase_summary_payment_method_notes_text').innerHTML = 'Steam sẽ gửi email hóa đơn khi thanh toán của bạn thành công cho đơn hàng này. Với các thắc mắc về trạng thái xử lý thanh toán, vui lòng liên hệ <a href="https://www.eclubstore.com">eClub Store</a>.';
			break;

		case 'bitcoin':
			$('pending_purchase_summary_payment_method_description').innerHTML = 'Quá trình mua hàng của bạn đang diễn ra. Chúng tôi hiện đang đợi xử lý từ hệ thống bitcoin. Việc xử lý cần ít một lần xác thực cho blockchain và có thể mất vài phút cho tới vài giờ.';
			$('pending_purchase_summary_payment_method_notes_text').innerHTML = 'Với các thắc mắc về trạng thái xử lý thanh toán, vui lòng liên hệ <a target="_blank" href="https://help.bitpay.com/8450-Disputes-/">BitPay</a>.';
			break;

		case 'unionpay':
			$('pending_purchase_summary_payment_method_description').innerHTML = 'Quá trình mua hàng của bạn đang diễn ra. Chúng tôi hiện đang chờ xác thực từ bên xử lý thanh toán của bạn. Quá trình này thường mất vài phút.';
			$('pending_purchase_summary_payment_method_notes_text').innerHTML = 'Trong một số trường hợp, nó có thể mất tới vài ngày. Steam sẽ gửi hóa đơn đến địa chỉ email của bạn khi đã nhận được tiền và việc mua hàng của bạn hoàn tất.';
			break;

		case 'wechat':
			$('pending_purchase_summary_payment_method_description').innerHTML = 'Quá trình mua hàng của bạn đang tiến hành. Chúng tôi hiện đang chờ xác thực từ WeChat. Quá trình này thường mất vài phút.';
			$('pending_purchase_summary_payment_method_notes_text').innerHTML = 'Trong trường hợp cực cùng, nó có thể mất tới vài giờ. Steam sẽ email bạn hóa đơn khi thanh toán được nhận từ WeChat và việc mua hàng của bạn hoàn tất.';
			break;

		case 'tenpay':
			$('pending_purchase_summary_payment_method_description').innerHTML = 'Quá trình mua hàng của bạn đang tiến hành. Chúng tôi hiện đang chờ xác thực từ Tenpay. Quá trình này thường mất vài phút.';
			$('pending_purchase_summary_payment_method_notes_text').innerHTML = 'Trong trường hợp xấu nhất, nó có thể mất tới vài giờ. Steam sẽ email bạn hóa đơn khi khoản thanh toán nhận từ Tenpay và việc mua hàng của bạn hoàn tất.';
			break;

		case 'nodwin_cod':
			$('pending_purchase_summary_payment_method_description').innerHTML = 'Quá trình mua hàng của bạn đang diễn ra. Chúng tôi hiện đang chờ xác thực từ NovaPlay một khi bạn đã hoàn thành quá trình đưa tiền mặt khi nhận hàng.';
			$('pending_purchase_summary_payment_method_notes_text').innerHTML = 'Bạn sẽ mau chóng nhận một email từ NovaPlay để xác minh đơn hàng và các bước kế tiếp. Steam sẽ gửi mail bạn một hóa đơn khi thanh toán được nhận từ NovaPlay và việc mua hàng của bạn hoàn thành. Với các thắc mắc về trạng thái xử lý thanh toán, vui lòng liên hệ <a href="http://steamsupport.novaplay.in">NovaPlay</a>.';
			break;

		case 'cafefunded':
			$('pending_purchase_summary_payment_method_description').innerHTML = '';
			$('pending_purchase_summary_payment_method_notes_text').innerHTML = 'checkout_receipt_pending_cafefunded_details';
			break;

		case 'cashincis':
  		$('pending_purchase_summary_payment_method_description').innerHTML = 'Quá trình mua hàng của bạn đang diễn ra. Chúng tôi hiện đang chờ xác thực từ ngân hàng hoặc bên xử lý thanh toán của bạn. Quá trình này thường mất vài phút.';
	  	$('pending_purchase_summary_payment_method_notes_text').innerHTML = 'Steam sẽ gửi email hóa đơn khi thanh toán của bạn thành công cho đơn hàng này.';
		break;

		default:
			break;
	}

	NukeCartCookie();

	if ( $('checkout_pipeline') && $('receipt_pipeline') )
	{
				$('checkout_pipeline').hide();
		$('receipt_pipeline').show();
	}

	if ( $('checkout_logo_default') && $('checkout_logo_receipt' ) )
	{
				$('checkout_logo_default').hide();
		$('checkout_logo_receipt').show();
	}

	if ( $('col_right_pending_receipt') )
	{
		$('col_right_pending_receipt').siblings().invoke('hide');
		$('col_right_pending_receipt').show();
	}

	Effect.ScrollTo( 'receipt_pipeline' );
}

var g_eLastAuthenticationStep = false;
function DisplayCreditCardAuthentication( authentication_data, txnid, retries )
{
	if ( !authentication_data )
	{
		try
		{
			new Ajax.Request('https://checkout.steampowered.com/checkout/authenticationdetails/',
			{
			    method:'get',
			    parameters: {
					'transid' : txnid
				},
			    onSuccess: function(transport)
			    {
					var result = transport.responseText.evalJSON(true);

					if ( result.eresult != 1 )
					{
						var error_text = 'Đã có một lỗi khi thực thi hoặc cập nhật giao dịch của bạn. Xin đợi một phút và thử lại hoặc liên hệ hỗ trợ để nhận giúp đỡ.';
						DisplayErrorMessage( error_text );
						return;
					}

					authentication_data = result.data;
			    },
			    onFailure: function()
			    {

					var error_text = 'Đã có một lỗi khi thực thi hoặc cập nhật giao dịch của bạn. Xin đợi một phút và thử lại hoặc liên hệ hỗ trợ để nhận giúp đỡ.';
					DisplayErrorMessage( error_text );
					return;
			    }
		    } );
		}
		catch( e )
		{
			var error_text = 'Đã có một lỗi khi thực thi hoặc cập nhật giao dịch của bạn. Xin đợi một phút và thử lại hoặc liên hệ hỗ trợ để nhận giúp đỡ.';
			DisplayErrorMessage( error_text );
			ReportCheckoutJSError( 'Failed showing error after DisplayCreditCardAuthentication failure', e );
		}
	}

	if ( authentication_data.threed_secure_step == g_eLastAuthenticationStep )
	{
		// no change, so keep polling
		g_timeoutPoll = setTimeout( NewPollForTransactionStatusClosure( g_LastFinalizedTransactionID, retries, 5 ), 15*1000 );
		return;
	}

	g_eLastAuthenticationStep = authentication_data.threed_secure_step;

	switch ( authentication_data.threed_secure_step )
	{
		case 1:
		case 5:
			  		g_timeoutPoll = setTimeout( NewPollForTransactionStatusClosure( g_LastFinalizedTransactionID, retries, 5 ), 2*1000 );
  		return;

		case 2:
						var params = [];
			if ( g_bInMobile )
			{
				ShowAlertDialog( 'Giao dịch của bạn cần phải được xác thực thẩm quyền',
				'Bạn sắp được điều hướng tới trang xác thực cho đơn hàng này với ngân hàng cấp phát thẻ.',
				'OK'
				).done( function() {
				var auth_url = encodeURIComponent( 'https://checkout.steampowered.com/checkout/beginauthentication/?transid='+txnid );
				window.location = "steammobile://openurl?url=" + encodeURIComponent( 'https://checkout.steampowered.com/paypal/launchauth/?webbasedpurchasing=1&transid=' + txnid + '&authurl='+auth_url + '&s=' + g_sessionID );
				});
			}
			else if ( g_bIsInSteamDeck )
			{
				OpenUrlInNewBlankWindow( 'https://checkout.steampowered.com/checkout/beginauthentication/?transid='+txnid )
			}
			else
			{
				params.push( { name: "MD", value: authentication_data.md } );
				params.push( { name: "PaReq", value: authentication_data.pa_request } );
				params.push( { name: "TermUrl", value: authentication_data.term_url } );

				SetUpCreditCardAuthentication( authentication_data.issuer_url, params );
			}
			g_timeoutPoll = setTimeout( NewPollForTransactionStatusClosure( g_LastFinalizedTransactionID, retries, 5 ), 15*1000 );
			return;

		case 3:
			
		case 4:
			
		default:
			var error_text = 'Đã có một lỗi khi thực thi hoặc cập nhật giao dịch của bạn. Xin đợi một phút và thử lại hoặc liên hệ hỗ trợ để nhận giúp đỡ.';
			DisplayErrorMessage( error_text );
			return;
	}
}

var g_nFinalizeWorkingButtonState = 1;
function AnimateFinalizeWorkingButton()
{
	try
	{
				if ( !g_bFinalizeTransactionInProgress && !g_bPollingForTransactionStatus )
			return;

		g_nFinalizeWorkingButtonState++;
		if ( g_nFinalizeWorkingButtonState > 3 )
			g_nFinalizeWorkingButtonState = 1;

		var append = '';
		if ( g_nFinalizeWorkingButtonState == 1 )
		{
			append = '.';
		}
		else if ( g_nFinalizeWorkingButtonState == 2 )
		{
			append = '..';
		}
		else
		{
			append = '...';
		}

		SetButtonInnerHtml('purchase_button_inprogress_bottom', 'Đang xử lý'+append );

		setTimeout( AnimateFinalizeWorkingButton, 500 );
	}
	catch ( e )
	{
		ReportCheckoutJSError( 'Error animating finalize working button', e );
	}
}


function HandlePollForTransactionStatusFailure()
{
	try
	{
		var method = $('payment_method');

		if ( method.value == 'unionpay' || method.value == 'wechat' || method.value == 'tenpay' )
		{
			DisplayPendingReceiptPage();
			return;
		}

		if ( method.value == 'cafefunded' )
		{
			g_winExternal.close();
			g_winExternal = false;
		}

		var error_text = '';
		error_text = 'Việc mua hàng của bạn có thể đã hoàn tất, nhưng đã có vấn đề phát sinh khi kiểm tra trạng thái giao dịch. Hãy kiểm tra <a href="https://store.steampowered.com//account/history/">trang trạng thái tài khoản</a> hoặc email của bạn để tìm biên lai xác nhận.';
	}
	catch(e)
	{
		ReportCheckoutJSError( 'Failed choosing error string for PollForTransactionStatus failure', e );
	}


	try
	{
				if ( error_text != '' )
		{
			DisplayErrorMessage( error_text );
		}

				$J('#purchase_button_bottom').hide();
		$J('#purchase_button_inprogress_bottom').hide();
		$J('#purchase_button_disabled_bottom').show();
		$J('#change_payment_method_button_bottom').hide();
		$J('#cancel_button_bottom').show();
	}
	catch( e )
	{
		ReportCheckoutJSError( 'Failed showing error after PollForTransactionStatus failure', e );
	}
}


var g_nGetPurchaseStatusCalls = 0;
var g_timeoutPoll = false;
var g_bPollingForTransactionStatus = false;
function PollForTransactionStatus( txnid, retries, timeout )
{
	g_bPollingForTransactionStatus = true;

		AnimateFinalizeWorkingButton();

		if ( retries < 0 )
	{
		g_bFinalizeTransactionInProgress = false;
		g_timeoutPoll = false;
		HandlePollForTransactionStatusFailure();
		return;
	}

	try
	{
		new Ajax.Request('https://checkout.steampowered.com/checkout/transactionstatus/',
		{
		    method:'get',
		    parameters: {
				'count' : ++g_nGetPurchaseStatusCalls,
				'transid' : txnid
			},
		    onSuccess: function(transport)
		    {
				if ( transport.responseText )
				{
					try {
						var result = transport.responseText.evalJSON(true);
			      		} catch ( e ) {
		      							    			g_timeoutPoll = setTimeout( NewPollForTransactionStatusClosure( txnid, retries-1, timeout ), timeout*1000 );
		      				return;
		      			}

			      					      		var bNeedsApproval = (result.success == 22 && result.purchaseresultdetail == 29);
			      		var bPurchaseResultDelayed = (result.success == 22 && result.purchaseresultdetail == 66);
			      		var bNeedsAuthentication = (result.success == 22 && result.purchaseresultdetail == 86);
			      		if ( result.success == 22 && !bNeedsApproval && !bPurchaseResultDelayed && !bNeedsAuthentication )
		      			{
		      						      				g_timeoutPoll = setTimeout( NewPollForTransactionStatusClosure( txnid, retries-1, timeout ), timeout*1000 );
			      			return;
			      		}

			      		g_bFinalizeTransactionInProgress = false;
			      		g_bPollingForTransactionStatus = false;
								g_timeoutPoll = false;

			      	   				      	   	if ( result.success == 1 || bNeedsApproval )
		      		   	{
		      	   			OnPurchaseSuccess( result );
		      	   			return;
			      	   	}
			      	   	else if ( bPurchaseResultDelayed )
			      	   	{
			      	   		DisplayPendingReceiptPage();
			      	   	}
			      	   	else if ( bNeedsAuthentication )
			      	   	{
			      	   		DisplayCreditCardAuthentication( result.authenticationdetails, txnid, retries-1 );
			      	   		return;
			      	   	}
			      	   	else
			      	   	{
		      		   		var ePaymentMethod = 2;
		      	   			if ( result.purchasereceipt && result.purchasereceipt.paymentmethod )
		      	   				ePaymentMethod = result.purchasereceipt.paymentmethod;

			      	   		HandleFinalizeTransactionFailure( ePaymentMethod, result.purchaseresultdetail, result.bShowBRSpecificCreditCardError, result.errorDescription );
			      	   		return;
			      	   	}
				}

			  			      		g_bFinalizeTransactionInProgress = false;
			  	g_bPollingForTransactionStatus = false;
				g_timeoutPoll = false;
				HandleFinalizeTransactionFailure( 2, 3, false, '' );
		    },
		    onFailure: function()
			{
						      		g_timeoutPoll = setTimeout( NewPollForTransactionStatusClosure( txnid, retries-1, timeout ), timeout*1000 );
			      	return;
			}
		});
	}
	catch( e )
	{
		ReportCheckoutJSError( 'Error submitting TransactionStatus request', e );
	}
}

function NewPollForTransactionStatusClosure( txnid, retries, timeout )
{
	var closure_txnid = txnid;
	var closure_retries = retries;
	var closure_timeout = timeout;
	return function() { PollForTransactionStatus( closure_txnid, closure_retries, closure_timeout ); };
}

var g_LastFinalizedTransactionID = -1;
function FinalizeTransaction()
{
	var method = $('payment_method');
		if ( g_bFinalizeTransactionInProgress || g_timeoutPoll )
		return;

		if ( BStoredCreditCardRequiresSecurityCode( method.value ) && $('security_code_cached').value == '' )
	{
		DisplayErrorMessage( 'Vui lòng nhập mã an ninh thẻ của bạn.' );
		ValidationMarkFieldBad( $('security_code_cached' ) );
		return;
	}

		if ( !g_bIsUpdateBillingInfoForm && ( !$('accept_ssa') || !$('accept_ssa').checked ) )
	{
		DisplayErrorMessage( 'Bạn phải đồng ý với các điều khoản trong Thỏa thuận người đăng ký Steam để bán vật phẩm này.' );
		ValidationMarkFieldBad( $('purchase_confirm_ssa') );
		return;
	}

	if ( !g_bIsUpdateBillingInfoForm && $('accept_right_withdrawal') && !$('accept_right_withdrawal').checked )
	{
		DisplayErrorMessage( 'Bạn phải đồng ý với điều khoản trong quyền hoàn trả theo luật định của mình.' );
		ValidationMarkFieldBad( $('purchase_confirm_right_withdrawal') );
		return;
	}


		if ( $('transaction_id').value == -1 || $('transaction_id').value == '' )
	{
		HandleFinalizeTransactionFailure( 2, 0, false, '' );
		return;
	}


		g_bFinalizeTransactionInProgress = true;

	try
	{
				$J('#purchase_button_bottom').hide();
		$J('#purchase_button_disabled_bottom').hide();
		$J('#purchase_button_inprogress_bottom').show();
		$J('#change_payment_method_button_bottom').hide();
		$J('#cancel_button_bottom').hide();
	}
	catch ( e )
	{
		ReportCheckoutJSError( 'Error disabling buttons during FinalizeTransaction', e );
	}

	try
	{
				setTimeout( AnimateFinalizeWorkingButton, 500 );
	}
	catch ( e )
	{
		ReportCheckoutJSError( 'Error initializing finalize working animation', e );
	}

	try
	{
				g_LastFinalizedTransactionID = $('transaction_id').value;
		$('transaction_id').value = -1;

		// Create this here, so its not nested within the onSuccess closure
		var StatusPollFunc = NewPollForTransactionStatusClosure( g_LastFinalizedTransactionID, 60, 5 );

		var browserInfo  =  {
			language: navigator.language,
			javaEnabled: navigator.javaEnabled() ? 'true' : 'false',
			colorDepth: screen.colorDepth,
			screenHeight: screen.height,
			screenWidth: screen.width
		};

		new Ajax.Request('https://checkout.steampowered.com/checkout/finalizetransaction/',
		{
		    method:'post',
		    parameters: {
								'transid' : g_LastFinalizedTransactionID,
				'CardCVV2' : ( BIsStoredCreditCard() ? $('security_code_cached').value : $('security_code').value ),
				'browserInfo' : JSON.stringify( browserInfo )
			},
		    onSuccess: function(transport){
				if ( transport.responseText ){
					try {
						var result = transport.responseText.evalJSON(true);
		      		} catch ( e ) {
		      			// Failure
		      			HandleFinalizeTransactionFailure( 2, 3, false, '' );
		      			g_bFinalizeTransactionInProgress = false;
		      			return;
		      		}

		      				      		var bNeedsApproval = (result.success == 22 && result.purchaseresultdetail == 29);
			      	var bNeedsAuthentication = (result.success == 22 && result.purchaseresultdetail == 86);
		      		if ( result.success == 22 && !bNeedsApproval && !bNeedsAuthentication )
		      		{
		      					      			g_timeoutPoll = setTimeout( StatusPollFunc, 2*1000 );
		      			return;
		      		}

		      		g_bFinalizeTransactionInProgress = false;
		      	   	// Success...
		      	   	if ( result.success == 1 || bNeedsApproval )
		      	   	{
		      	   		OnPurchaseSuccess( result );
		      	   		return;
		      	   	}
		      	   	else if ( bNeedsAuthentication )
		      	   	{
		      	   		DisplayCreditCardAuthentication(false, g_LastFinalizedTransactionID, 60);
		      	   		return;
		      	   	}
		      	   	else
		      	   	{
		      	   		var ePaymentMethod = 2;
		      	   		if ( result.purchasereceipt && result.purchasereceipt.paymentmethod )
		      	   			ePaymentMethod = result.purchasereceipt.paymentmethod;

		      	   		HandleFinalizeTransactionFailure( ePaymentMethod, result.purchaseresultdetail, result.bShowBRSpecificCreditCardError, result.errorDescription );
		      	   		return;
		      	   	}
			  	}

			  				  	g_bFinalizeTransactionInProgress = false;
				HandleFinalizeTransactionFailure( 2, 3, false, '' );
		    },
		    onFailure: function(){
								g_bFinalizeTransactionInProgress = false;
				HandleFinalizeTransactionFailure( 2, 3, false, '' );
			}
		});
	}
	catch( e )
	{
		ReportCheckoutJSError( 'Error submitting FinalizeTransaction request', e );
	}
}

function SSAPopup()
{
		var win = window.open( 'https://checkout.steampowered.com/checkout/ssapopup','steam_ssa','width=536,height=546,resize=yes,scrollbars=yes');
	win.focus();
}

function RefundPaymentMethodsPopup()
{
		var win = window.open( 'https://store.steampowered.com/steam_refunds_methods','steam_refund_details','width=1024,height=768');
	win.focus();
}

function HardwareAgreementPopup()
{
		var win = OpenUrlInNewBlankWindow( 'https://store.steampowered.com/hardware_order_terms','steam_hardwareterms' );
	win.focus();
}

function HardwareLimitedWarrantyPopup()
{
		var win = OpenUrlInNewBlankWindow( 'https://support.steampowered.com/kb_article.php?ref=4577-TUJV-6223','steam_limited_warranty_terms' );
	win.focus();
}

function DisplayErrorMessage( strMessage )
{
	$('error_display').innerHTML = strMessage;
	$('error_display').style.display = 'block';
	Effect.ScrollTo( 'error_display' );

	new Effect.Highlight( 'error_display', { endcolor : '#000000', startcolor : '#ff9900' } );
}

function ValidationMarkFieldBad( elem )
{
	if ( $(elem) )
	{
		if ( $(elem).hasClassName( 'highlight_on_error' ) )
			new Effect.Morph( elem, {style: 'color: #FF9900', duration: 0.5 } );
		else
			new Effect.Morph( elem, {style: 'border-color: #FF9900', duration: 0.5 } )
	}
}

function ValidationMarkFieldOk( elem )
{
	if ( $(elem) )
	{
		if ( $(elem).hasClassName( 'highlight_on_error' ) )
			$(elem).style.color='';
		else
			$(elem).style.borderColor = '';
	}

}

function UpdateWillBeSentToNote()
{
	var elSentToNote = $('sendgift_willbesentto');
	if ( elSentToNote )
	{
		if ( $( 'send_via_email' ) && $( 'send_via_email' ).checked )
		{
			$('sendto_email').show();
			$('sendto_steamaccount').hide();
			$('sendto_email_value').update( $( 'email_input' ).value );
		}
		else
		{
			$('sendto_email').hide();
			$('sendto_steamaccount').show();
			$('sendto_steamaccount_value').update( currently_selected_friend_name );
			$J('#sendto_steamaccount_value').attr('data-miniprofile', currently_selected_friend_id || '' );
		}
		elSentToNote.show();
	}
}

// could validate we rendered correct timezone with:
// 		parseInt( V_GetCookie( 'timezoneOffset' ) ) * -1 / 60 == (new Date()).getTimezoneOffset()
function GatherScheduledSendFields()
{
	if ( !$J('#cart_send_schedule_options').hasClass( 'schedule_selected' ) )
		return 0;

	var year = $J('#schedule_send_year').val();
	var month = $J('#schedule_send_month').val();
	var day = $J('#schedule_send_day').val();

	var rgTimeParse = $J('#schedule_send_time').val().match( /([0-2]?[0-9]) *(?::|h) *([0-5][0-9])/ );

	if ( !rgTimeParse )
		return 0;	// should have validated before

	var hour = parseInt( rgTimeParse[1] );
	var minute = parseInt( rgTimeParse[2] );

	var b24hTime = (  $J('#schedule_send_ampm').length == 0 );
	if ( !b24hTime )
	{
		if ( hour == 12 )
			hour -= 12;	
		if ( $J('#schedule_send_ampm' ).val() == 'pm' )
			hour += 12;
	}

	var d = new Date( year, month - 1, day, hour, minute );
	return d.getTime() / 1000;
}

var g_bSendGiftCallRunning = false;
function SendGift()
{
		if( g_bSendGiftCallRunning )
		return;

	var giftee_account_id = 0;
	var giftee_email = '';
	var giftee_name = '';
	var gift_message = '';
	var gift_sentiment = '';
	var gift_signature = '';
	var gift_scheduled_send = 0;
	var gift_is_reschedule = typeof g_bIsReschedule != 'undefined' && g_bIsReschedule;

	try
	{
				if ( $( 'send_via_email' ) && $( 'send_via_email' ).checked )
		{
			giftee_email = $( 'email_input' ).value;
		}
		else
		{
			giftee_account_id = currently_selected_friend_id;
		}
		giftee_name = $('gift_recipient_name').value;
		gift_message = $('gift_message_text').value;
		gift_sentiment = $('gift_sentiment').value;
		gift_signature = $('gift_signature').value;
		gift_scheduled_send = GatherScheduledSendFields();

		if ( $J('#reschedule_send_now').is(':checked') )
			gift_scheduled_send = 0;

				g_bSendGiftCallRunning = true;

		new Ajax.Request('https://checkout.steampowered.com/checkout/sendgiftsubmit/',
		{
		    method:'post',
		    parameters: {
				// gift info
				'GifteeAccountID' : giftee_account_id,
				'GifteeEmail' : giftee_email,
				'GifteeName' : giftee_name,
				'GiftMessage' : gift_message,
				'GiftSentiment' : gift_sentiment,
				'GiftSignature' : gift_signature,
				'ScheduledSendOnDate': gift_scheduled_send,
				'GiftGID':		g_gidGift,
				'SessionID':	g_sessionID,
				'IsReschedule':	gift_is_reschedule
			},
		    onSuccess: function(transport){
		    	g_bSendGiftCallRunning = false;
				if ( transport.responseJSON && transport.responseJSON.success )
				{
					var result = transport.responseJSON.success;
			      	   	// Success...
					if ( result == 1 || result == 22 )
					{
						if ( gift_scheduled_send )
							$J('#send_gift_success_msg').html( 'Quà của bạn đã được lên lịch chuyển đi' );
						else
							$J('#send_gift_success_msg').html( 'Quà tặng của bạn đã được gửi' );

						OnSendGiftSuccess( result );
					}
					else
					{
						OnSendGiftFailure( result );
					}
			  	}
				else
				{
										OnSendGiftFailure( 2  );
				}
			},
			onFailure: function()
			{
								g_bSendGiftCallRunning = false;
				OnSendGiftFailure( 3  );
			}
		});
	}
	catch(e)
	{
		ReportCheckoutJSError( 'Failed gathering form data and calling DoSendGift', e );
	}
}


function OnSendGiftSuccess( result )
{
	// show receipt tab
	DisplayReceiptPage();
}

function OnUnsendGiftSuccess( result )
{
	$('send_gift_success').hide();
	$('unsend_gift_success').show();
	DisplayReceiptPage();
}

function OnSendGiftFailure( eresult )
{
	try
	{
		SetTabEnabled( 'gift_recipient' );
		var error_text = 'Đã có một lỗi khi thực thi hoặc cập nhật giao dịch của bạn. Xin đợi một phút và thử lại hoặc liên hệ hỗ trợ để nhận giúp đỡ.';

		DisplayErrorMessage( error_text );
	}
	catch (e)
	{
		ReportCheckoutJSError( 'Failed handling OnSendGiftFailure failure', e );
	}
}

function UnsendGift()
{
		if( g_bSendGiftCallRunning )
		return;

	try
	{
				g_bSendGiftCallRunning = true;

		new Ajax.Request('https://checkout.steampowered.com/checkout/unsendgiftsubmit/',
		{
		    method:'post',
		    parameters: {
				// gift info
				'GiftGID':		g_gidGift,
				'SessionID':	g_sessionID
			},
		    onSuccess: function(transport){
		    	g_bSendGiftCallRunning = false;
				if ( transport.responseJSON && transport.responseJSON.success )
				{
					var result = transport.responseJSON.success;
			      	   	// Success...
			      	   	if ( result == 1 || result == 22 )
			      	   	{
							OnUnsendGiftSuccess( result );
			      	   	}
					else
					{
						OnSendGiftFailure( result );
					}
			  	}
				else
				{
										OnSendGiftFailure( 2  );
				}
			},
			onFailure: function()
			{
								g_bSendGiftCallRunning = false;
				OnSendGiftFailure( 3  );
			}
		});
	}
	catch(e)
	{
		ReportCheckoutJSError( 'Failed gathering form data and calling DoSendGift', e );
	}
}

function ConfirmRescheduleCancel()
{
	ShowConfirmDialog(
		'Hủy gửi món quà này',
		'Bạn có chắc muốn hủy việc chuyển quà? Nếu hủy, bạn sẽ nhận được hoàn tiền đầy đủ.',
		'Có, hủy và hoàn tiền',
		'Không, đừng hủy'
	).done( function () {
		UnsendGift();
	});
}
function ShowMatchingFriends( parentId, childClass, attr, val ) {
	var term = (!val || 0 === val.length || !val.trim()) ? '' : val.trim().replace(/"/g, '').toLowerCase();

	$J('#' + parentId + '>.' + childClass + (term ? '[' + attr + '*="' + term + '"]' : '') + ':hidden').show();
	if (term) {
		$J('#' + parentId + '>.' + childClass + ':not([' + attr + '*="' + term + '"])').hide();
	}
}

function ClearFriendsSearch () {
	document.getElementById("seach_friends").value = "";
	ShowMatchingFriends( 'friends_chooser', 'friend_block', 'data-search', $J('#seach_friends').val() );
}

