var embedTTS;let arrTTSPlayer=[];function embedTTSLoadJs(e,t){if(0==document.querySelectorAll('script[src="'+e+'"]').length){var i=document.getElementsByTagName("head")[0],a=document.createElement("script");a.type="text/javascript",a.async=!0,"function"==typeof t&&(a.onreadystatechange=a.onload=function(){t(!1)}),a.src=e,0==document.querySelectorAll('script[src="'+e+'"]').length&&i.appendChild(a)}else"function"==typeof t&&t(!0)}function embedTTSDeclare(){embedTTS=function(){var e={wrapper:"",cookieName:"embedTTS",primaryColor:"#ff5400",newsId:"",distributionDate:"",nameSpace:"",domainStorage:"https://tts.mediacdn.vn",srcAudioFormat:"{0}/{1}/{2}-{3}-{4}.{5}",ext:"wav",defaultVoice:"nu",apiCheckUrlExists:"https://demo.corenlp.admicro.vn/tts/get_file",labelAudio:"ĐỌC B\xc0I",inited:!1},t=[{id:"nam",name:"Nam miền Bắc"},{id:"nu",name:"Nữ miền Bắc"},{id:"nam-1",name:"Nam miền Nam"},{id:"nu-1",name:"Nữ miền Nam"}];function i(i,a,n,d,o,r){i.html(String.format('<div class="audioplayer" data-file="{0}" data-id="{1}" data-voice="{2}"></div>',a,r,n)),function i(a,n,d){var o=$(a),r=o.attr("data-file"),s=o.attr("data-id"),l=o.attr("data-voice"),c="",m=playerInitScript.getPlayers();void 0!==m&&void 0!==m["#streamid_"+s]&&(c="_"+Math.random().toString(36).substr(2,9)),o.prepend('<audio width="100%" id="streamid_'+s+c+'" class="videoNewsPlayer" playsinline="" webkit-playsinline=""></audio>');try{playerInitScript("streamid_"+s+c,{params:{file:r,firstLabelAudio:l,audioSwitchVoice:d,autoplay:n,replay:!0,mute:!1,nonFullWidth:!0},secure:"L3NlY3VyZS92ZXJpZnkveHZxcmNhZGhlYmZpMHY1dm5zM2Ywd3d3a3Y2MDdkMDgvMTAxODQ3L2V5SmhiR2NpT2lKSVV6STFOaUlzSW5SNWNDSTZJa3BYVkNKOS5leUp5WldZaU9pSWlMQ0poY0hCclpYa2lPaUo0ZG5GeVkyRmthR1ZpWm1rd2RqVjJibk16WmpCM2QzZHJkall3TjJRd09DSXNJbkJzWVhsbGNpSTZJakV3TVRnME55SXNJbWxuYm05eVpVVjRjR2x5WVhScGIyNGlPblJ5ZFdVc0ltbGhkQ0k2TVRZMk16RXlOekV3Tml3aVpYaHdJam94TmpZek1USTNNakkyZlEuV1lIWU5ieFJZOEZEeGh5M3V0VGdrRUVWUzRuWkxzZWw0NU9TN1NVRVNiWQ"},function(){this.on("audio:voiceSelect",function(i,a){try{var n,d,o,r,s=t.filter(e=>e.name===a.name)[0],l=new Date;n=e.cookieName,d=s.id,o=new Date(l.getTime()+e.cookieLifeTime),r=escape(d)+(null==o?"":"; expires="+o.toUTCString()),document.cookie=n+"="+r}catch(c){console.log("audio:voiceSelect",c)}}),arrTTSPlayer.push(this)})}catch(p){console.log(p)}}(o+" .audioplayer",!1,d)}function a(t,i,a,n){return String.format(e.srcAudioFormat,e.domainStorage,i,a,n,t,e.ext)}return String.format=function(e){if(arguments.length<=1)return e;for(var t=arguments.length-2,i=0;i<=t;i++)e=e.replace(RegExp("\\{"+i+"\\}","gi"),arguments[i+1]);return e},{init:function(n,d){$.extend(e,n),console.log(e),e.inited||($("head").append("<style>.embed-tts{display:flex;max-width:100%;align-items:center;}.embed-tts.hidden{display:none}.embed-tts .audioplayer{width:100%;background-color:transparent!important}.embed-tts audio{width:100%;outline:none;max-width:100%;max-height:35px}.embed-tts .user-voice-list{margin:0 5px;position:relative}.embed-tts .user-voice-list svg{fill:#ec566b;height:30px;width:30px}.embed-tts .user-voice-list .spmn{position:absolute;list-style:none;padding:0;background-color:#eee;margin:0;right:0;top:100%;width:160px;display:none}.embed-tts .user-voice-list.active .spmn{display:block;z-index:1}.embed-tts .user-voice-list .spmn li{line-height:40px}.embed-tts .user-voice-list .spmn li a:hover{background:rgba(0,0,0,.3)}.embed-tts .user-voice-list .spmn li a{text-decoration:none;color:#222;font:600 13px/normal Arial;display:block;padding:5px 10px}</style>"),$("head").append("<style>.embed-tts .user-voice-list svg{fill:"+e.primaryColor+"}</style>")),function n(d){if(0!=$(e.wrapper).length){var o='<div class="embed-tts hidden" data-newsid="{NewsId}" data-distributiondate="{DistributionDate}" data-namespace="{NameSpace}">					</div>'.replace("{NewsId}",e.newsId).replace("{DistributionDate}",e.distributionDate).replace("{NameSpace}",e.nameSpace);$(e.wrapper).append(o),function n(d){var o=$(e.wrapper).find(".embed-tts"),r=e.wrapper,s=e.newsId;if(0!=o.length){var l=o.attr("data-newsid"),c=o.attr("data-distributiondate"),m=o.attr("data-namespace");if(void 0!==l&&void 0!==c&&void 0!==m){var p,u,f=function e(t){var i=document.cookie,a=i.indexOf(" "+t+"=");if(-1==a&&(a=i.indexOf(t+"=")),-1==a)i=null;else{a=i.indexOf("=",a)+1;var n=i.indexOf(";",a);-1==n&&(n=i.length),i=unescape(i.substring(a,n))}return i}(e.cookieName),h=t.filter(t=>t.id===(f||e.defaultVoice))[0],v=a(l,c,m,f||e.defaultVoice),b=[];$.each(t,function(e,t){t.id!==h.id&&b.push({name:t.name,link:a(l,c,m,t.id)})}),p=v,u=function(t){t&&(o.removeClass("hidden"),"undefined"==typeof playerInitScript?embedTTSLoadJs("https://adminplayer.sohatv.vn/resource/init-script/playerInitScript.js",function(){i(o,v,h.name,b,r,s)}):i(o,v,h.name,b,r,s)),"function"==typeof d&&d(e,t)},$.ajax({method:"GET",url:e.apiCheckUrlExists+"?filename="+p.replace(e.domainStorage+"/",""),success:function(e){console.log("UrlExists: ",e),"function"==typeof u&&u(1==e.status)},error:function(e){console.log("UrlExists Ex: ",p,"-",e),"function"==typeof u&&u(!1)}})}}}(d)}}(d),e.inited=!0},settings:e}}(jQuery)}"undefined"==typeof jQuery?embedTTSLoadJs("https://static.mediacdn.vn/common/js/jquery-1.11.0.min.js",embedTTSDeclare):embedTTSDeclare();